binary-debuggable-source
0000 0000 f tracker.asm
0000 0000 s ; TRACKER Version 1.2
0000 0000 s ; to do: mute track, real-time sequencing, MIDI in, more sensible pre-selected instruments, .... 
0000 0000 s 
8000 8000 s 	org $8000
8000 8000 s 
8000 8000 s POSMARKSYM equ	$aa
8000 8000 s SETSYM 	equ	$8f
8000 8000 s CURSYM 	equ	'X'
8000 8000 s ENTER	equ	$0d ; @DSPLY with newline
8000 8000 s 
8000 8000 s KCURLEFT	equ 8
8000 8000 s KCURRIGHT	equ 9
8000 8000 s KCURUP		equ 91
8000 8000 s KCURDOWN	equ 10
8000 8000 s 
8000 8000 s @DSPLY		equ	$4467
8000 8000 s @EXIT		equ	$402d
8000 8000 s @KBD    	equ 	$002b 
8000 8000 s @KEY    	equ 	$0049 
8000 8000 s @DSP    	equ 	$0033
8000 8000 s 
8000 8000 d 53
8000 8000 u 01 02
8000 8000 s stopped: ascii   'S'
8001 8001 d 50
8001 8001 u 01 02
8001 8001 s playing: ascii   'P'
8002 8002 d 46
8002 8002 u 01 02
8002 8002 s free: 	 ascii   'F'
8003 8003 d 54
8003 8003 u 01 02
8003 8003 s tracked: ascii   'T'
8004 8004 s 
8004 8004 s 
8004 8004 d 2a2a2a2a2a204d4944492f3830204452554d20545241434b45522056312e33202d2d202843292032303234204259204c414d4244414d494b454c202a2a2a2a2a
8004 8004 u 40 02
8004 8004 s title:	ascii   '***** MIDI/80 DRUM TRACKER V1.3 -- (C) 2024 BY LAMBDAMIKEL *****'
8044 8044 d 545241434b3a20312053504545443a202d2d20564f4c3a203746204e4f54453a20323420424152533a203820535445503a203031205041543a204120532d4620
8044 8044 u 40 02
8044 8044 s 	ascii   'TRACK: 1 SPEED: -- VOL: 7F NOTE: 24 BARS: 8 STEP: 01 PAT: A S-F '
8084 8084 d 313d3d3d2d3d3d3d2b3d3d3d2d3d3d3d323d3d3d2d3d3d3d2b3d3d3d2d3d3d3d333d3d3d2d3d3d3d2b3d3d3d2d3d3d3d343d3d3d2d3d3d3d2b3d3d3d2d3d3d3d
8084 8084 u 40 02
8084 8084 s 	ascii	'1===-===+===-===2===-===+===-===3===-===+===-===4===-===+===-===' 
80c4 80c4 d 7c2e2e2e2d2e2e2e2b2e2e2e2d2e2e2e7c2e2e2e2d2e2e2e2b2e2e2e2d2e2e2e7c2e2e2e2d2e2e2e2b2e2e2e2d2e2e2e7c2e2e2e2d2e2e2e2b2e2e2e2d2e2e2e
80c4 80c4 u 40 02
80c4 80c4 s data:	ascii   '|...-...+...-...|...-...+...-...|...-...+...-...|...-...+...-...'
8104 8104 d 7c2e2e2e2d2e2e2e2b2e2e2e2d2e2e2e7c2e2e2e2d2e2e2e2b2e2e2e2d2e2e2e7c2e2e2e2d2e2e2e2b2e2e2e2d2e2e2e7c2e2e2e2d2e2e2e2b2e2e2e2d2e2e2e
8104 8104 u 40 02
8104 8104 s 	ascii   '|...-...+...-...|...-...+...-...|...-...+...-...|...-...+...-...'
8144 8144 d 7c2e2e2e2d2e2e2e2b2e2e2e2d2e2e2e7c2e2e2e2d2e2e2e2b2e2e2e2d2e2e2e7c2e2e2e2d2e2e2e2b2e2e2e2d2e2e2e7c2e2e2e2d2e2e2e2b2e2e2e2d2e2e2e
8144 8144 u 40 02
8144 8144 s 	ascii   '|...-...+...-...|...-...+...-...|...-...+...-...|...-...+...-...'
8184 8184 d 7c2e2e2e2d2e2e2e2b2e2e2e2d2e2e2e7c2e2e2e2d2e2e2e2b2e2e2e2d2e2e2e7c2e2e2e2d2e2e2e2b2e2e2e2d2e2e2e7c2e2e2e2d2e2e2e2b2e2e2e2d2e2e2e
8184 8184 u 40 02
8184 8184 s 	ascii   '|...-...+...-...|...-...+...-...|...-...+...-...|...-...+...-...'
81c4 81c4 d 7c2e2e2e2d2e2e2e2b2e2e2e2d2e2e2e7c2e2e2e2d2e2e2e2b2e2e2e2d2e2e2e7c2e2e2e2d2e2e2e2b2e2e2e2d2e2e2e7c2e2e2e2d2e2e2e2b2e2e2e2d2e2e2e
81c4 81c4 u 40 02
81c4 81c4 s 	ascii   '|...-...+...-...|...-...+...-...|...-...+...-...|...-...+...-...'
8204 8204 d 7c2e2e2e2d2e2e2e2b2e2e2e2d2e2e2e7c2e2e2e2d2e2e2e2b2e2e2e2d2e2e2e7c2e2e2e2d2e2e2e2b2e2e2e2d2e2e2e7c2e2e2e2d2e2e2e2b2e2e2e2d2e2e2e
8204 8204 u 40 02
8204 8204 s 	ascii   '|...-...+...-...|...-...+...-...|...-...+...-...|...-...+...-...'
8244 8244 d 353d3d3d2d3d3d3d2b3d3d3d2d3d3d3d363d3d3d2d3d3d3d2b3d3d3d2d3d3d3d373d3d3d2d3d3d3d2b3d3d3d2d3d3d3d383d3d3d2d3d3d3d2b3d3d3d2d3d3d3d
8244 8244 u 40 02
8244 8244 s 	ascii	'5===-===+===-===6===-===+===-===7===-===+===-===8===-===+===-===' 
8284 8284 d 7c2e2e2e2d2e2e2e2b2e2e2e2d2e2e2e7c2e2e2e2d2e2e2e2b2e2e2e2d2e2e2e7c2e2e2e2d2e2e2e2b2e2e2e2d2e2e2e7c2e2e2e2d2e2e2e2b2e2e2e2d2e2e2e
8284 8284 u 40 02
8284 8284 s 	ascii   '|...-...+...-...|...-...+...-...|...-...+...-...|...-...+...-...'
82c4 82c4 d 7c2e2e2e2d2e2e2e2b2e2e2e2d2e2e2e7c2e2e2e2d2e2e2e2b2e2e2e2d2e2e2e7c2e2e2e2d2e2e2e2b2e2e2e2d2e2e2e7c2e2e2e2d2e2e2e2b2e2e2e2d2e2e2e
82c4 82c4 u 40 02
82c4 82c4 s 	ascii   '|...-...+...-...|...-...+...-...|...-...+...-...|...-...+...-...'
8304 8304 d 7c2e2e2e2d2e2e2e2b2e2e2e2d2e2e2e7c2e2e2e2d2e2e2e2b2e2e2e2d2e2e2e7c2e2e2e2d2e2e2e2b2e2e2e2d2e2e2e7c2e2e2e2d2e2e2e2b2e2e2e2d2e2e2e
8304 8304 u 40 02
8304 8304 s 	ascii   '|...-...+...-...|...-...+...-...|...-...+...-...|...-...+...-...'
8344 8344 d 7c2e2e2e2d2e2e2e2b2e2e2e2d2e2e2e7c2e2e2e2d2e2e2e2b2e2e2e2d2e2e2e7c2e2e2e2d2e2e2e2b2e2e2e2d2e2e2e7c2e2e2e2d2e2e2e2b2e2e2e2d2e2e2e
8344 8344 u 40 02
8344 8344 s 	ascii   '|...-...+...-...|...-...+...-...|...-...+...-...|...-...+...-...'
8384 8384 d 7c2e2e2e2d2e2e2e2b2e2e2e2d2e2e2e7c2e2e2e2d2e2e2e2b2e2e2e2d2e2e2e7c2e2e2e2d2e2e2e2b2e2e2e2d2e2e2e7c2e2e2e2d2e2e2e2b2e2e2e2d2e2e2e
8384 8384 u 40 02
8384 8384 s 	ascii   '|...-...+...-...|...-...+...-...|...-...+...-...|...-...+...-...'
83c4 83c4 d 7c2e2e2e2d2e2e2e2b2e2e2e2d2e2e2e7c2e2e2e2d2e2e2e2b2e2e2e2d2e2e2e7c2e2e2e2d2e2e2e2b2e2e2e2d2e2e2e7c2e2e2e2d2e2e2e2b2e2e2e2d2e2e2e
83c4 83c4 u 40 02
83c4 83c4 s 	ascii   '|...-...+...-...|...-...+...-...|...-...+...-...|...-...+...-...'
8404 8404 s 
8404 8404 d 2a2a2a2a2a2a2a2a2a2a2a2a2a2a2a2a2a2a2a2a2a2a2a2a2a2a2048454c502050414745202a2a2a2a2a2a2a2a2a2a2a2a2a2a2a2a2a2a2a2a2a2a2a2a2a2a2a
8404 8404 u 40 02
8404 8404 s helpt:	ascii   '************************** HELP PAGE ***************************'
8444 8444 d 435552534f52204d4f56454d454e54202020202020203a2041204420572058202020202020202020202020202020202020202020202020202020202020202020
8444 8444 u 40 02
8444 8444 s 	ascii   'CURSOR MOVEMENT       : A D W X                                 '
8484 8484 d 5820435552534f52204d4f56454d454e542046494e453a205a204320202020202020202020202020202020202020202020202020202020202020202020202020
8484 8484 u 40 02
8484 8484 s 	ascii   'X CURSOR MOVEMENT FINE: Z C                                     '
84c4 84c4 d 4a554d5020544f2042415220504f53202020202020203a2031203220332034203520362037203820202020202020202020202020202020202020202020202020
84c4 84c4 u 40 02
84c4 84c4 s 	ascii   'JUMP TO BAR POS       : 1 2 3 4 5 6 7 8                         '
8504 8504 d 4348414e47452042415220434f554e542020202020203a2042202020202020202020202020202020202020202020202020202020202020202020202020202020
8504 8504 u 40 02
8504 8504 s 	ascii   'CHANGE BAR COUNT      : B                                       '
8544 8544 d 4e455854202f2050524556204752494420504f5320203a204152524f572d5550204152524f572d444f574e202020202020202020202020202020202020202020
8544 8544 u 40 02
8544 8544 s 	ascii   'NEXT / PREV GRID POS  : ARROW-UP ARROW-DOWN                     '
8584 8584 d 434c454152204752494420504f5320202020202020203a20434c4541522020202020202020202020202020202020202020202020202020202020202020202020
8584 8584 u 40 02
8584 8584 s 	ascii   'CLEAR GRID POS        : CLEAR                                   '
85c4 85c4 d 5345542020204752494420504f5320202020202020203a2053504143452020202020202020202020202020202020202020202020202020202020202020202020
85c4 85c4 u 40 02
85c4 85c4 s 	ascii   'SET   GRID POS        : SPACE                                   '
8604 8604 d 5345542020204752494420504f53202620534f554e443a20454e5445522020202020202020202020202020202020202020202020202020202020202020202020
8604 8604 u 40 02
8604 8604 s 	ascii   'SET   GRID POS & SOUND: ENTER                                   '
8644 8644 d 504c415920262053544f5020202020202020202020203a2050202020202020202020202020202020202020202020202020202020202020202020202020202020
8644 8644 u 40 02
8644 8644 s 	ascii   'PLAY & STOP           : P                                       '
8684 8684 d 544f47474c4520545241434b494e47202020202020203a2054202020202020202020202020202020202020202020202020202020202020202020202020202020
8684 8684 u 40 02
8684 8684 s 	ascii   'TOGGLE TRACKING       : T                                       '
86c4 86c4 d 4348414e474520504c41594241434b205350454544203a204e204d202c202e202020202020202020202020202020202020202020202020202020202020202020
86c4 86c4 u 40 02
86c4 86c4 s 	ascii   'CHANGE PLAYBACK SPEED : N M , .                                 '
8704 8704 d 4348414e47452043555220545241434b204452554d203a204152524f572d4c454654204152524f572d5249474854202020202020202020202020202020202020
8704 8704 u 40 02
8704 8704 s 	ascii   'CHANGE CUR TRACK DRUM : ARROW-LEFT ARROW-RIGHT                  '
8744 8744 d 4348414e4745204752494420535445502020202020203a2047202020202020202020202020202020202020202020202020202020202020202020202020202020
8744 8744 u 40 02
8744 8744 s 	ascii   'CHANGE GRID STEP      : G                                       '
8784 8784 d 4c4f41442026205341564520202020202020202020203a204c205320202020202020202020202020202020202020202020202020202020202020202020202020
8784 8784 u 40 02
8784 8784 s 	ascii   'LOAD & SAVE           : L S                                     '
87c4 87c4 d 48454c502020202020202020202020202020202020203a2048202020202020202020202020202020202020202020202020202020202020202020202020202020
87c4 87c4 u 40 02
87c4 87c4 s 	ascii   'HELP                  : H                                       '
8804 8804 d 515549542020202020202020202020202020202020203a2051202020202020202020202020202020202020202020202020202020202020202020202020202020
8804 8804 u 40 02
8804 8804 s 	ascii   'QUIT                  : Q                                       '	
8844 8844 s 
8844 8844 s 
8844 8844 d 2e
8844 8844 u 01 02
8844 8844 s lastcur	     byte	'.'
8845 8845 d c03c
8845 8845 u 02 02
8845 8845 s lastcurpos   word 	$3c00+3*64 
8847 8847 s 
8847 8847 d 00
8847 8847 u 01 02
8847 8847 s cursorx	byte 	0
8848 8848 d 03
8848 8848 u 01 02
8848 8848 s cursory	byte 	3
8849 8849 d 00
8849 8849 u 01 02
8849 8849 s blink   byte    0
884a 884a d 00
884a 884a u 01 02
884a 884a s status  byte    0
884b 884b d 00
884b 884b u 01 02
884b 884b s track	byte    0
884c 884c d 00
884c 884c u 01 02
884c 884c s delayc 	byte	0
884d 884d d 0a
884d 884d u 01 02
884d 884d s tempo   byte	10
884e 884e d 08
884e 884e u 01 02
884e 884e s numbars byte	8
884f 884f d 80
884f 884f u 01 02
884f 884f s numticks byte	8*16 
8850 8850 d 04
8850 8850 u 01 02
8850 8850 s gridres byte  	4 
8851 8851 d fc
8851 8851 u 01 02
8851 8851 s quantpat  byte  11111100b
8852 8852 s tracks1 defs    6*64 		
89d2 89d2 s tracks2 defs    6*64
8b52 8b52 s 
8b52 8b52 d 242628332c2e
8b52 8b52 u 06 02
8b52 8b52 s instracks byte 36, 38, 40, 51, 44, 46 
8b58 8b58 s 
8b58 8b58 d 00
8b58 8b58 u 01 02
8b58 8b58 s memcursorx byte 	0
8b59 8b59 d 00
8b59 8b59 u 01 02
8b59 8b59 s memcursory byte 	0
8b5a 8b5a s 	
8b5a 8b5a d 00
8b5a 8b5a u 01 02
8b5a 8b5a s trackpos    byte        0
8b5b 8b5b d 00
8b5b 8b5b u 01 02
8b5b 8b5b s qtrackpos   byte 	0
8b5c 8b5c s 
8b5c 8b5c s 
8b5c 8b5c s 
8b5c 8b5c s keydown macro key
8b5c 8b5c s 	ld	a,(key >> 8)
8b5c 8b5c s 	and	key % $100
8b5c 8b5c s 	endm 
8b5c 8b5c s 
8b5c 8b5c s k_@	equ	$380101
8b5c 8b5c s k_A	equ	$380102
8b5c 8b5c s k_B	equ	$380104
8b5c 8b5c s k_C	equ	$380108
8b5c 8b5c s k_D	equ	$380110
8b5c 8b5c s k_E	equ	$380120
8b5c 8b5c s k_F	equ	$380140
8b5c 8b5c s k_G	equ	$380180
8b5c 8b5c s 
8b5c 8b5c s k_H	equ	$380201
8b5c 8b5c s k_I	equ	$380202
8b5c 8b5c s k_J	equ	$380204
8b5c 8b5c s k_K	equ	$380208
8b5c 8b5c s k_L	equ	$380210
8b5c 8b5c s k_M	equ	$380220
8b5c 8b5c s k_N	equ	$380240
8b5c 8b5c s k_O	equ	$380280
8b5c 8b5c s 
8b5c 8b5c s k_P	equ	$380401
8b5c 8b5c s k_Q	equ	$380402
8b5c 8b5c s k_R	equ	$380404
8b5c 8b5c s k_S	equ	$380408
8b5c 8b5c s k_T	equ	$380410
8b5c 8b5c s k_U	equ	$380420
8b5c 8b5c s k_V	equ	$380440
8b5c 8b5c s k_W	equ	$380480
8b5c 8b5c s 
8b5c 8b5c s k_X	equ	$380801
8b5c 8b5c s k_Y	equ	$380802
8b5c 8b5c s k_Z	equ	$380804
8b5c 8b5c s 
8b5c 8b5c s k_0	equ	$381001
8b5c 8b5c s k_1	equ	$381002
8b5c 8b5c s k_2	equ	$381004
8b5c 8b5c s k_3	equ	$381008
8b5c 8b5c s k_4	equ	$381010
8b5c 8b5c s k_5	equ	$381020
8b5c 8b5c s k_6	equ	$381040
8b5c 8b5c s k_7	equ	$381080
8b5c 8b5c s 
8b5c 8b5c s k_8	equ	$382001
8b5c 8b5c s k_9	equ	$382002
8b5c 8b5c s k_colon	equ	$382004
8b5c 8b5c s k_semi	equ	$382008
8b5c 8b5c s k_comma	equ	$382010
8b5c 8b5c s k_dash	equ	$382020
8b5c 8b5c s k_dot	equ	$382040
8b5c 8b5c s k_slash	equ	$382080
8b5c 8b5c s 
8b5c 8b5c s k_enter	equ	$384001
8b5c 8b5c s k_clear	equ	$384002
8b5c 8b5c s k_break	equ	$384004
8b5c 8b5c s k_up	equ	$384008
8b5c 8b5c s k_down	equ	$384010
8b5c 8b5c s k_left	equ	$384020
8b5c 8b5c s k_right	equ	$384040
8b5c 8b5c s k_space	equ	$384080
8b5c 8b5c s 
8b5c 8b5c s k_shift	equ	$388001
8b5c 8b5c s 
8b5c 8b5c s 
8b5c 8b5c s main:
8b5c 8b5c s 
8b5c 8b5c d dbff
8b5c 8b5c u 02 01
8b5c 8b5c s 	in  a,($ff)
8b5e 8b5e d f610
8b5e 8b5e u 02 01
8b5e 8b5e s 	or  a,$10 		; enable IO on Model III 
8b60 8b60 s 	; and a,~$20 		; disable video wait states M III 
8b60 8b60 d e6bf
8b60 8b60 u 02 01
8b60 8b60 s 	and a,~$40 		; slode mode M4 
8b62 8b62 d d3ec
8b62 8b62 u 02 01
8b62 8b62 s 	out ($ec),a
8b64 8b64 s 
8b64 8b64 d 21c480
8b64 8b64 u 03 01
8b64 8b64 s 	ld	hl,data 
8b67 8b67 d 115288
8b67 8b67 u 03 01
8b67 8b67 s 	ld	de,tracks1
8b6a 8b6a d 018001
8b6a 8b6a u 03 01
8b6a 8b6a s 	ld	bc,6*64 
8b6d 8b6d d edb0
8b6d 8b6d u 02 01
8b6d 8b6d s 	ldir
8b6f 8b6f s 
8b6f 8b6f d 21c480
8b6f 8b6f u 03 01
8b6f 8b6f s 	ld	hl,data 
8b72 8b72 d 11d289
8b72 8b72 u 03 01
8b72 8b72 s 	ld	de,tracks2 
8b75 8b75 d 018001
8b75 8b75 u 03 01
8b75 8b75 s 	ld	bc,6*64 
8b78 8b78 d edb0
8b78 8b78 u 02 01
8b78 8b78 s 	ldir
8b7a 8b7a s 
8b7a 8b7a s main2:
8b7a 8b7a s 
8b7a 8b7a d 21003c
8b7a 8b7a u 03 01
8b7a 8b7a s 	ld	hl,$3c00
8b7d 8b7d d 11013c
8b7d 8b7d u 03 01
8b7d 8b7d s 	ld	de,$3c00+1
8b80 8b80 d 01ff03
8b80 8b80 u 03 01
8b80 8b80 s 	ld	bc,1024-1
8b83 8b83 d 3620
8b83 8b83 u 02 01
8b83 8b83 s 	ld	(hl),' '
8b85 8b85 d edb0
8b85 8b85 u 02 01
8b85 8b85 s 	ldir
8b87 8b87 s 
8b87 8b87 d 210480
8b87 8b87 u 03 01
8b87 8b87 s 	ld	hl,title
8b8a 8b8a d 11003c
8b8a 8b8a u 03 01
8b8a 8b8a s 	ld	de,$3c00
8b8d 8b8d d 010004
8b8d 8b8d u 03 01
8b8d 8b8d s 	ld	bc,1024
8b90 8b90 d edb0
8b90 8b90 u 02 01
8b90 8b90 s 	ldir
8b92 8b92 s 
8b92 8b92 s 
8b92 8b92 d cd3591
8b92 8b92 u 03 01
8b92 8b92 s 	call screenupdate
8b95 8b95 d cd4c91
8b95 8b95 u 03 01
8b95 8b95 s 	call showcursor
8b98 8b98 d cd0791
8b98 8b98 u 03 01
8b98 8b98 s 	call showplaycursor
8b9b 8b9b d cd8991
8b9b 8b9b u 03 01
8b9b 8b9b s 	call showtempo
8b9e 8b9e s 
8b9e 8b9e s loop:
8b9e 8b9e d 3a4a88
8b9e 8b9e u 03 01
8b9e 8b9e s 	ld a, (status) ; stopped ? 
8ba1 8ba1 d b7
8ba1 8ba1 u 01 01
8ba1 8ba1 s 	or a
8ba2 8ba2 d ca158c
8ba2 8ba2 u 03 01
8ba2 8ba2 s 	jp z, nostep
8ba5 8ba5 s 	
8ba5 8ba5 d 3a4c88
8ba5 8ba5 u 03 01
8ba5 8ba5 s 	ld a, (delayc)
8ba8 8ba8 d 3c
8ba8 8ba8 u 01 01
8ba8 8ba8 s 	inc a
8ba9 8ba9 d 214c88
8ba9 8ba9 u 03 01
8ba9 8ba9 s 	ld hl,delayc
8bac 8bac d 77
8bac 8bac u 01 01
8bac 8bac s 	ld (hl), a
8bad 8bad d 47
8bad 8bad u 01 01
8bad 8bad s 	ld b, a
8bae 8bae d 3a4d88
8bae 8bae u 03 01
8bae 8bae s 	ld a, (tempo) 
8bb1 8bb1 d b8
8bb1 8bb1 u 01 01
8bb1 8bb1 s 	cp b
8bb2 8bb2 d c2158c
8bb2 8bb2 u 03 01
8bb2 8bb2 s 	jp nz, nostep
8bb5 8bb5 s 	
8bb5 8bb5 s 	;;  inc note pointer
8bb5 8bb5 d cdc490
8bb5 8bb5 u 03 01
8bb5 8bb5 s 	call nextnote
8bb8 8bb8 d cd0791
8bb8 8bb8 u 03 01
8bb8 8bb8 s 	call showplaycursor
8bbb 8bbb d cdd191
8bbb 8bbb u 03 01
8bbb 8bbb s 	call playnotes
8bbe 8bbe s 
8bbe 8bbe d 3e00
8bbe 8bbe u 02 01
8bbe 8bbe s 	ld a,0
8bc0 8bc0 d 324c88
8bc0 8bc0 u 03 01
8bc0 8bc0 s 	ld (delayc),a
8bc3 8bc3 s 
8bc3 8bc3 d 3a4b88
8bc3 8bc3 u 03 01
8bc3 8bc3 s 	ld a,(track)
8bc6 8bc6 d b7
8bc6 8bc6 u 01 01
8bc6 8bc6 s 	or a
8bc7 8bc7 d ca158c
8bc7 8bc7 u 03 01
8bc7 8bc7 s 	jp z, nostep
8bca 8bca s 
8bca 8bca s 	;; tracked - set screen cursor x to playcursor x
8bca 8bca s 
8bca 8bca d 3a5a8b
8bca 8bca u 03 01
8bca 8bca s 	ld a,(trackpos)
8bcd 8bcd d cb77
8bcd 8bcd u 02 01
8bcd 8bcd s 	bit 6,a
8bcf 8bcf d 201e
8bcf 8bcf u 02 01
8bcf 8bcf s 	jr nz,trackcury ; > 64 inc y
8bd1 8bd1 s 
8bd1 8bd1 d cbb7
8bd1 8bd1 u 02 01
8bd1 8bd1 s 	res 6,a
8bd3 8bd3 d 324788
8bd3 8bd3 u 03 01
8bd3 8bd3 s 	ld (cursorx),a
8bd6 8bd6 d 32588b
8bd6 8bd6 u 03 01
8bd6 8bd6 s 	ld (memcursorx),a
8bd9 8bd9 s 	
8bd9 8bd9 d 3a4888
8bd9 8bd9 u 03 01
8bd9 8bd9 s 	ld a,(cursory)
8bdc 8bdc d fe0a
8bdc 8bdc u 02 01
8bdc 8bdc s 	cp 10
8bde 8bde d 382b
8bde 8bde u 02 01
8bde 8bde s 	jr c, showtrackcur
8be0 8be0 s 
8be0 8be0 s 	
8be0 8be0 d d607
8be0 8be0 u 02 01
8be0 8be0 s 	sub 7
8be2 8be2 d 324888
8be2 8be2 u 03 01
8be2 8be2 s 	ld (cursory), a
8be5 8be5 d 3a598b
8be5 8be5 u 03 01
8be5 8be5 s 	ld a,(memcursory)
8be8 8be8 d d606
8be8 8be8 u 02 01
8be8 8be8 s 	sub 6
8bea 8bea d 32598b
8bea 8bea u 03 01
8bea 8bea s 	ld (memcursory),a
8bed 8bed s 	
8bed 8bed d 181c
8bed 8bed u 02 01
8bed 8bed s 	jr showtrackcur	
8bef 8bef s 
8bef 8bef s trackcury:
8bef 8bef d cbb7
8bef 8bef u 02 01
8bef 8bef s 	res 6,a	
8bf1 8bf1 s 	
8bf1 8bf1 d 324788
8bf1 8bf1 u 03 01
8bf1 8bf1 s 	ld (cursorx),a
8bf4 8bf4 d 32588b
8bf4 8bf4 u 03 01
8bf4 8bf4 s 	ld (memcursorx),a
8bf7 8bf7 s 
8bf7 8bf7 d 3a4888
8bf7 8bf7 u 03 01
8bf7 8bf7 s 	ld a,(cursory)
8bfa 8bfa d fe0a
8bfa 8bfa u 02 01
8bfa 8bfa s 	cp 10
8bfc 8bfc d 300d
8bfc 8bfc u 02 01
8bfc 8bfc s 	jr nc,showtrackcur
8bfe 8bfe s 	
8bfe 8bfe d c607
8bfe 8bfe u 02 01
8bfe 8bfe s 	add 7	
8c00 8c00 d 324888
8c00 8c00 u 03 01
8c00 8c00 s 	ld (cursory),a
8c03 8c03 d 3a598b
8c03 8c03 u 03 01
8c03 8c03 s 	ld a,(memcursory)
8c06 8c06 d c606
8c06 8c06 u 02 01
8c06 8c06 s 	add 6 
8c08 8c08 d 32598b
8c08 8c08 u 03 01
8c08 8c08 s 	ld (memcursory),a
8c0b 8c0b s 	
8c0b 8c0b s 
8c0b 8c0b s showtrackcur:
8c0b 8c0b d 214988
8c0b 8c0b u 03 01
8c0b 8c0b s 	ld hl, blink
8c0e 8c0e d 367f
8c0e 8c0e u 02 01
8c0e 8c0e s 	ld (hl), 127
8c10 8c10 s 
8c10 8c10 d cd4c91
8c10 8c10 u 03 01
8c10 8c10 s 	call showcursor
8c13 8c13 s 
8c13 8c13 d 1817
8c13 8c13 u 02 01
8c13 8c13 s 	jr scan 
8c15 8c15 s 	
8c15 8c15 s nostep:
8c15 8c15 s 
8c15 8c15 d 3a4988
8c15 8c15 u 03 01
8c15 8c15 s 	ld a,(blink)
8c18 8c18 d 3c
8c18 8c18 u 01 01
8c18 8c18 s 	inc a
8c19 8c19 d 324988
8c19 8c19 u 03 01
8c19 8c19 s 	ld (blink), a
8c1c 8c1c s 
8c1c 8c1c d fe00
8c1c 8c1c u 02 01
8c1c 8c1c s 	cp 0
8c1e 8c1e d c2248c
8c1e 8c1e u 03 01
8c1e 8c1e s 	jp nz, cur1
8c21 8c21 d cd4c91
8c21 8c21 u 03 01
8c21 8c21 s 	call showcursor
8c24 8c24 s 
8c24 8c24 s cur1:	 
8c24 8c24 d fe7f
8c24 8c24 u 02 01
8c24 8c24 s 	cp 127
8c26 8c26 d c22c8c
8c26 8c26 u 03 01
8c26 8c26 s 	jp nz, scan  
8c29 8c29 d cd4c91
8c29 8c29 u 03 01
8c29 8c29 s 	call showcursor
8c2c 8c2c s 		
8c2c 8c2c s scan:
8c2c 8c2c s 	
8c2c 8c2c d 3a4a88
8c2c 8c2c u 03 01
8c2c 8c2c s 	ld a, (status) 
8c2f 8c2f d b7
8c2f 8c2f u 01 01
8c2f 8c2f s 	or a
8c30 8c30 d 2019
8c30 8c30 u 02 01
8c30 8c30 s 	jr nz,scancont
8c32 8c32 s 
8c32 8c32 s 	;; here we only sample if the tracking is stopped!
8c32 8c32 s 
8c32 8c32 d cd2b00
8c32 8c32 u 03 01
8c32 8c32 s 	call @KBD
8c35 8c35 d fe00
8c35 8c35 u 02 01
8c35 8c35 s 	cp 0
8c37 8c37 d ca9e8b
8c37 8c37 u 03 01
8c37 8c37 s 	jp z,loop
8c3a 8c3a s 
8c3a 8c3a d fe20
8c3a 8c3a u 02 01
8c3a 8c3a s         cp ' ' ; space
8c3c 8c3c d ca898f
8c3c 8c3c u 03 01
8c3c 8c3c s 	jp z,setgrid 
8c3f 8c3f s 
8c3f 8c3f d fe0d
8c3f 8c3f u 02 01
8c3f 8c3f s 	cp 13 ; enter
8c41 8c41 d ca478f
8c41 8c41 u 03 01
8c41 8c41 s 	jp z,setgridandsound
8c44 8c44 s 
8c44 8c44 d fe1f
8c44 8c44 u 02 01
8c44 8c44 s 	cp 31 ; clear 
8c46 8c46 d caa18f
8c46 8c46 u 03 01
8c46 8c46 s 	jp z,erasegrid
8c49 8c49 s 
8c49 8c49 d 1808
8c49 8c49 u 02 01
8c49 8c49 s 	jr scancont1
8c4b 8c4b s 
8c4b 8c4b s scancont:
8c4b 8c4b s 
8c4b 8c4b d cd2b00
8c4b 8c4b u 03 01
8c4b 8c4b s 	call @KBD
8c4e 8c4e d fe00
8c4e 8c4e u 02 01
8c4e 8c4e s 	cp 0
8c50 8c50 d ca9e8b
8c50 8c50 u 03 01
8c50 8c50 s 	jp z,loop
8c53 8c53 s 
8c53 8c53 s scancont1:
8c53 8c53 s 
8c53 8c53 d fe5a
8c53 8c53 u 02 01
8c53 8c53 s 	cp 'Z' 
8c55 8c55 d ca1f90
8c55 8c55 u 03 01
8c55 8c55 s 	jp z,left
8c58 8c58 d fe59
8c58 8c58 u 02 01
8c58 8c58 s 	cp 'Y' 
8c5a 8c5a d ca1f90
8c5a 8c5a u 03 01
8c5a 8c5a s 	jp z,left
8c5d 8c5d d fe41
8c5d 8c5d u 02 01
8c5d 8c5d s 	cp 'A' 
8c5f 8c5f d cab08d
8c5f 8c5f u 03 01
8c5f 8c5f s 	jp z,prevbar
8c62 8c62 d fe43
8c62 8c62 u 02 01
8c62 8c62 s 	cp 'C'
8c64 8c64 d ca3290
8c64 8c64 u 03 01
8c64 8c64 s 	jp z,right
8c67 8c67 d fe44
8c67 8c67 u 02 01
8c67 8c67 s 	cp 'D'
8c69 8c69 d ca998d
8c69 8c69 u 03 01
8c69 8c69 s 	jp z,nextbar
8c6c 8c6c d fe57
8c6c 8c6c u 02 01
8c6c 8c6c s 	cp 'W'
8c6e 8c6e d ca4590
8c6e 8c6e u 03 01
8c6e 8c6e s 	jp z,up
8c71 8c71 d fe58
8c71 8c71 u 02 01
8c71 8c71 s 	cp 'X' 
8c73 8c73 d ca6290
8c73 8c73 u 03 01
8c73 8c73 s 	jp z,down
8c76 8c76 s 
8c76 8c76 d fe2c
8c76 8c76 u 02 01
8c76 8c76 s 	cp ',' 
8c78 8c78 d cacd8e
8c78 8c78 u 03 01
8c78 8c78 s 	jp z,faster	
8c7b 8c7b d fe2e
8c7b 8c7b u 02 01
8c7b 8c7b s 	cp '.'
8c7d 8c7d d ca028f
8c7d 8c7d u 03 01
8c7d 8c7d s 	jp z,slower 
8c80 8c80 d fe4e
8c80 8c80 u 02 01
8c80 8c80 s 	cp 'N' 
8c82 8c82 d cae78e
8c82 8c82 u 03 01
8c82 8c82 s 	jp z,faster1
8c85 8c85 d fe4d
8c85 8c85 u 02 01
8c85 8c85 s 	cp 'M' 
8c87 8c87 d ca1c8f
8c87 8c87 u 03 01
8c87 8c87 s 	jp z,slower1 
8c8a 8c8a s 		
8c8a 8c8a d fe50
8c8a 8c8a u 02 01
8c8a 8c8a s 	cp 'P' 
8c8c 8c8c d cad18f
8c8c 8c8c u 03 01
8c8c 8c8c s 	jp z,startstop
8c8f 8c8f s 
8c8f 8c8f d fe54
8c8f 8c8f u 02 01
8c8f 8c8f s 	cp 'T'
8c91 8c91 d caf88f
8c91 8c91 u 03 01
8c91 8c91 s 	jp z,trackstatus
8c94 8c94 s 	
8c94 8c94 d fe08
8c94 8c94 u 02 01
8c94 8c94 s 	cp KCURLEFT
8c96 8c96 d ca3f8f
8c96 8c96 u 03 01
8c96 8c96 s 	jp z,instrdown
8c99 8c99 s 
8c99 8c99 d fe09
8c99 8c99 u 02 01
8c99 8c99 s 	cp KCURRIGHT
8c9b 8c9b d ca378f
8c9b 8c9b u 03 01
8c9b 8c9b s 	jp z,instrup 
8c9e 8c9e s 
8c9e 8c9e d fe5b
8c9e 8c9e u 02 01
8c9e 8c9e s 	cp KCURUP 
8ca0 8ca0 d ca998d
8ca0 8ca0 u 03 01
8ca0 8ca0 s 	jp z,nextbar
8ca3 8ca3 s 
8ca3 8ca3 d fe0a
8ca3 8ca3 u 02 01
8ca3 8ca3 s 	cp KCURDOWN 
8ca5 8ca5 d cab08d
8ca5 8ca5 u 03 01
8ca5 8ca5 s 	jp z,prevbar
8ca8 8ca8 s 
8ca8 8ca8 d fe31
8ca8 8ca8 u 02 01
8ca8 8ca8 s 	cp '1'
8caa 8caa d cac58d
8caa 8caa u 03 01
8caa 8caa s 	jp z,bar1
8cad 8cad s 
8cad 8cad d fe32
8cad 8cad u 02 01
8cad 8cad s 	cp '2'
8caf 8caf d cae68d
8caf 8caf u 03 01
8caf 8caf s 	jp z,bar2
8cb2 8cb2 s 
8cb2 8cb2 d fe33
8cb2 8cb2 u 02 01
8cb2 8cb2 s 	cp '3'
8cb4 8cb4 d ca078e
8cb4 8cb4 u 03 01
8cb4 8cb4 s 	jp z,bar3
8cb7 8cb7 s 
8cb7 8cb7 d fe34
8cb7 8cb7 u 02 01
8cb7 8cb7 s 	cp '4'
8cb9 8cb9 d ca288e
8cb9 8cb9 u 03 01
8cb9 8cb9 s 	jp z,bar4
8cbc 8cbc s 
8cbc 8cbc d fe35
8cbc 8cbc u 02 01
8cbc 8cbc s 	cp '5'
8cbe 8cbe d ca498e
8cbe 8cbe u 03 01
8cbe 8cbe s 	jp z,bar5
8cc1 8cc1 s 
8cc1 8cc1 d fe36
8cc1 8cc1 u 02 01
8cc1 8cc1 s 	cp '6'
8cc3 8cc3 d ca6a8e
8cc3 8cc3 u 03 01
8cc3 8cc3 s 	jp z,bar6
8cc6 8cc6 s 
8cc6 8cc6 d fe37
8cc6 8cc6 u 02 01
8cc6 8cc6 s 	cp '7'
8cc8 8cc8 d ca8b8e
8cc8 8cc8 u 03 01
8cc8 8cc8 s 	jp z,bar7
8ccb 8ccb s 
8ccb 8ccb d fe38
8ccb 8ccb u 02 01
8ccb 8ccb s 	cp '8'
8ccd 8ccd d caac8e
8ccd 8ccd u 03 01
8ccd 8ccd s 	jp z,bar8
8cd0 8cd0 s 
8cd0 8cd0 d fe51
8cd0 8cd0 u 02 01
8cd0 8cd0 s 	cp 'Q'
8cd2 8cd2 d ca968d
8cd2 8cd2 u 03 01
8cd2 8cd2 s 	jp z,quit
8cd5 8cd5 s 
8cd5 8cd5 d fe48
8cd5 8cd5 u 02 01
8cd5 8cd5 s 	cp 'H'
8cd7 8cd7 d ca728d
8cd7 8cd7 u 03 01
8cd7 8cd7 s 	jp z,help
8cda 8cda s 
8cda 8cda d fe4c
8cda 8cda u 02 01
8cda 8cda s 	cp 'L'
8cdc 8cdc d ca908d
8cdc 8cdc u 03 01
8cdc 8cdc s 	jp z,load
8cdf 8cdf s 
8cdf 8cdf d fe53
8cdf 8cdf u 02 01
8cdf 8cdf s 	cp 'S'
8ce1 8ce1 d ca938d
8ce1 8ce1 u 03 01
8ce1 8ce1 s 	jp z,save
8ce4 8ce4 s 
8ce4 8ce4 d fe47
8ce4 8ce4 u 02 01
8ce4 8ce4 s 	cp 'G'
8ce6 8ce6 d ca038d
8ce6 8ce6 u 03 01
8ce6 8ce6 s 	jp z,chgridres
8ce9 8ce9 s 
8ce9 8ce9 d fe42
8ce9 8ce9 u 02 01
8ce9 8ce9 s 	cp 'B'
8ceb 8ceb d ca5a8d
8ceb 8ceb u 03 01
8ceb 8ceb s 	jp z,chgnumbars 
8cee 8cee s 
8cee 8cee d c39e8b
8cee 8cee u 03 01
8cee 8cee s 	jp loop 
8cf1 8cf1 s 	
8cf1 8cf1 s 	;;  do a screen update after keypress and continue 
8cf1 8cf1 s cont:
8cf1 8cf1 d cd3591
8cf1 8cf1 u 03 01
8cf1 8cf1 s 	call screenupdate
8cf4 8cf4 d cdc591
8cf4 8cf4 u 03 01
8cf4 8cf4 s 	call showtrack
8cf7 8cf7 d cdb791
8cf7 8cf7 u 03 01
8cf7 8cf7 s 	call showtrackdrum
8cfa 8cfa d cd5f92
8cfa 8cfa u 03 01
8cfa 8cfa s 	call showgridres
8cfd 8cfd d cd6d92
8cfd 8cfd u 03 01
8cfd 8cfd s 	call showbars
8d00 8d00 s 	
8d00 8d00 d c39e8b
8d00 8d00 u 03 01
8d00 8d00 s 	jp loop
8d03 8d03 s 
8d03 8d03 s chgridres:
8d03 8d03 d 3a5088
8d03 8d03 u 03 01
8d03 8d03 s 	ld a,(gridres)
8d06 8d06 d cb27
8d06 8d06 u 02 01
8d06 8d06 s 	sla a 
8d08 8d08 d e61f
8d08 8d08 u 02 01
8d08 8d08 s 	and $1f
8d0a 8d0a d 2002
8d0a 8d0a u 02 01
8d0a 8d0a s 	jr nz,chgridres1
8d0c 8d0c d 3e01
8d0c 8d0c u 02 01
8d0c 8d0c s 	ld a,1
8d0e 8d0e s 	
8d0e 8d0e s chgridres1: 
8d0e 8d0e d 325088
8d0e 8d0e u 03 01
8d0e 8d0e s 	ld (gridres),a
8d11 8d11 s 	
8d11 8d11 d fe01
8d11 8d11 u 02 01
8d11 8d11 s 	cp a,1
8d13 8d13 d 2008
8d13 8d13 u 02 01
8d13 8d13 s 	jr nz, gridres2
8d15 8d15 d 3eff
8d15 8d15 u 02 01
8d15 8d15 s 	ld a,11111111b
8d17 8d17 d 325188
8d17 8d17 u 03 01
8d17 8d17 s 	ld (quantpat), a	
8d1a 8d1a d c3f18c
8d1a 8d1a u 03 01
8d1a 8d1a s 	jp cont
8d1d 8d1d s 	
8d1d 8d1d s gridres2:
8d1d 8d1d d fe02
8d1d 8d1d u 02 01
8d1d 8d1d s 	cp a,2
8d1f 8d1f d 2008
8d1f 8d1f u 02 01
8d1f 8d1f s 	jr nz, gridres4
8d21 8d21 d 3efe
8d21 8d21 u 02 01
8d21 8d21 s 	ld a,11111110b
8d23 8d23 d 325188
8d23 8d23 u 03 01
8d23 8d23 s 	ld (quantpat), a	
8d26 8d26 d c3f18c
8d26 8d26 u 03 01
8d26 8d26 s 	jp cont
8d29 8d29 s 
8d29 8d29 s gridres4:
8d29 8d29 d fe04
8d29 8d29 u 02 01
8d29 8d29 s 	cp a,4
8d2b 8d2b d 2008
8d2b 8d2b u 02 01
8d2b 8d2b s 	jr nz, gridres8
8d2d 8d2d d 3efc
8d2d 8d2d u 02 01
8d2d 8d2d s 	ld a,11111100b
8d2f 8d2f d 325188
8d2f 8d2f u 03 01
8d2f 8d2f s 	ld (quantpat), a	
8d32 8d32 d c3f18c
8d32 8d32 u 03 01
8d32 8d32 s 	jp cont
8d35 8d35 s 
8d35 8d35 s gridres8:
8d35 8d35 d fe08
8d35 8d35 u 02 01
8d35 8d35 s 	cp a,8
8d37 8d37 d 2008
8d37 8d37 u 02 01
8d37 8d37 s 	jr nz, gridres16
8d39 8d39 d 3ef8
8d39 8d39 u 02 01
8d39 8d39 s 	ld a,11111000b
8d3b 8d3b d 325188
8d3b 8d3b u 03 01
8d3b 8d3b s 	ld (quantpat), a	
8d3e 8d3e d c3f18c
8d3e 8d3e u 03 01
8d3e 8d3e s 	jp cont
8d41 8d41 s 
8d41 8d41 s gridres16:
8d41 8d41 d fe10
8d41 8d41 u 02 01
8d41 8d41 s 	cp a,16
8d43 8d43 d 2008
8d43 8d43 u 02 01
8d43 8d43 s 	jr nz, gridres32
8d45 8d45 d 3ef0
8d45 8d45 u 02 01
8d45 8d45 s 	ld a,11110000b
8d47 8d47 d 325188
8d47 8d47 u 03 01
8d47 8d47 s 	ld (quantpat), a	
8d4a 8d4a d c3f18c
8d4a 8d4a u 03 01
8d4a 8d4a s 	jp cont
8d4d 8d4d s 
8d4d 8d4d s gridres32:
8d4d 8d4d d fe20
8d4d 8d4d u 02 01
8d4d 8d4d s 	cp a,32
8d4f 8d4f d c2f18c
8d4f 8d4f u 03 01
8d4f 8d4f s 	jp nz, cont 
8d52 8d52 d 3ee0
8d52 8d52 u 02 01
8d52 8d52 s 	ld a,11100000b
8d54 8d54 d 325188
8d54 8d54 u 03 01
8d54 8d54 s 	ld (quantpat), a	
8d57 8d57 d c3f18c
8d57 8d57 u 03 01
8d57 8d57 s 	jp cont
8d5a 8d5a s 
8d5a 8d5a s 
8d5a 8d5a s chgnumbars:
8d5a 8d5a d 3a4e88
8d5a 8d5a u 03 01
8d5a 8d5a s 	ld a,(numbars)
8d5d 8d5d d 3d
8d5d 8d5d u 01 01
8d5d 8d5d s 	dec a 
8d5e 8d5e d 3c
8d5e 8d5e u 01 01
8d5e 8d5e s 	inc a
8d5f 8d5f d e607
8d5f 8d5f u 02 01
8d5f 8d5f s 	and $07
8d61 8d61 d 3c
8d61 8d61 u 01 01
8d61 8d61 s 	inc a	
8d62 8d62 d 324e88
8d62 8d62 u 03 01
8d62 8d62 s 	ld (numbars),a
8d65 8d65 s 
8d65 8d65 d 47
8d65 8d65 u 01 01
8d65 8d65 s 	ld b,a
8d66 8d66 d 3e00
8d66 8d66 u 02 01
8d66 8d66 s 	ld a,0
8d68 8d68 s countticks:	
8d68 8d68 d c610
8d68 8d68 u 02 01
8d68 8d68 s 	add 16 
8d6a 8d6a d 10fc
8d6a 8d6a u 02 01
8d6a 8d6a s 	djnz countticks
8d6c 8d6c s 
8d6c 8d6c d 324f88
8d6c 8d6c u 03 01
8d6c 8d6c s 	ld (numticks),a
8d6f 8d6f d c3f18c
8d6f 8d6f u 03 01
8d6f 8d6f s 	jp cont 
8d72 8d72 s 
8d72 8d72 s help:
8d72 8d72 s 
8d72 8d72 d 21003c
8d72 8d72 u 03 01
8d72 8d72 s 	ld	hl,$3c00
8d75 8d75 d 11013c
8d75 8d75 u 03 01
8d75 8d75 s 	ld	de,$3c00+1
8d78 8d78 d 01ff03
8d78 8d78 u 03 01
8d78 8d78 s 	ld	bc,1024-1
8d7b 8d7b d 3620
8d7b 8d7b u 02 01
8d7b 8d7b s 	ld	(hl),' '
8d7d 8d7d d edb0
8d7d 8d7d u 02 01
8d7d 8d7d s 	ldir
8d7f 8d7f s 
8d7f 8d7f d 210484
8d7f 8d7f u 03 01
8d7f 8d7f s 	ld	hl,helpt
8d82 8d82 d 11003c
8d82 8d82 u 03 01
8d82 8d82 s 	ld	de,$3c00
8d85 8d85 d 010004
8d85 8d85 u 03 01
8d85 8d85 s 	ld	bc,1024 
8d88 8d88 d edb0
8d88 8d88 u 02 01
8d88 8d88 s 	ldir
8d8a 8d8a s 
8d8a 8d8a d cd4900
8d8a 8d8a u 03 01
8d8a 8d8a s 	call @KEY
8d8d 8d8d s 	
8d8d 8d8d d c37a8b
8d8d 8d8d u 03 01
8d8d 8d8d s 	jp main2
8d90 8d90 s 
8d90 8d90 s load:
8d90 8d90 d c39e8b
8d90 8d90 u 03 01
8d90 8d90 s 	jp loop 
8d93 8d93 s 
8d93 8d93 s save:
8d93 8d93 d c39e8b
8d93 8d93 u 03 01
8d93 8d93 s 	jp loop 
8d96 8d96 s 	
8d96 8d96 s quit:
8d96 8d96 d cd2d40
8d96 8d96 u 03 01
8d96 8d96 s 	call @EXIT
8d99 8d99 s 	
8d99 8d99 s nextbar:
8d99 8d99 d 3a4788
8d99 8d99 u 03 01
8d99 8d99 s 	ld a,(cursorx)
8d9c 8d9c d 215088
8d9c 8d9c u 03 01
8d9c 8d9c s 	ld hl,gridres
8d9f 8d9f d 46
8d9f 8d9f u 01 01
8d9f 8d9f s 	ld b,(hl)
8da0 8da0 d 80
8da0 8da0 u 01 01
8da0 8da0 s 	add a,b
8da1 8da1 d fe40
8da1 8da1 u 02 01
8da1 8da1 s 	cp 64
8da3 8da3 d d2f18c
8da3 8da3 u 03 01
8da3 8da3 s 	jp nc, cont
8da6 8da6 d 324788
8da6 8da6 u 03 01
8da6 8da6 s 	ld (cursorx),a
8da9 8da9 d 21588b
8da9 8da9 u 03 01
8da9 8da9 s 	ld hl,memcursorx 
8dac 8dac d 77
8dac 8dac u 01 01
8dac 8dac s 	ld (hl),a
8dad 8dad d c3f18c
8dad 8dad u 03 01
8dad 8dad s 	jp cont
8db0 8db0 s 
8db0 8db0 s prevbar:
8db0 8db0 d 3a4788
8db0 8db0 u 03 01
8db0 8db0 s 	ld a,(cursorx)
8db3 8db3 d 215088
8db3 8db3 u 03 01
8db3 8db3 s 	ld hl,gridres
8db6 8db6 d 46
8db6 8db6 u 01 01
8db6 8db6 s 	ld b,(hl)
8db7 8db7 d 90
8db7 8db7 u 01 01
8db7 8db7 s 	sub a,b
8db8 8db8 d daf18c
8db8 8db8 u 03 01
8db8 8db8 s 	jp c, cont
8dbb 8dbb d 324788
8dbb 8dbb u 03 01
8dbb 8dbb s 	ld (cursorx),a
8dbe 8dbe d 21588b
8dbe 8dbe u 03 01
8dbe 8dbe s 	ld hl,memcursorx 
8dc1 8dc1 d 77
8dc1 8dc1 u 01 01
8dc1 8dc1 s 	ld (hl),a
8dc2 8dc2 d c3f18c
8dc2 8dc2 u 03 01
8dc2 8dc2 s 	jp cont
8dc5 8dc5 s 
8dc5 8dc5 s setbar1x macro
8dc5 8dc5 s 	ld (cursorx), a
8dc5 8dc5 s 	ld hl,memcursorx 
8dc5 8dc5 s 	ld (hl),a
8dc5 8dc5 s 
8dc5 8dc5 s 	ld a, (cursory)
8dc5 8dc5 s 	cp 9
8dc5 8dc5 s 	jp c,cont
8dc5 8dc5 s 	; else change y cursor 
8dc5 8dc5 s 	sub 7 
8dc5 8dc5 s 	ld (cursory),a
8dc5 8dc5 s 	
8dc5 8dc5 s 	ld a,(memcursory) 
8dc5 8dc5 s 	sub 6
8dc5 8dc5 s 	ld (memcursory),a
8dc5 8dc5 s 
8dc5 8dc5 s 	jp cont
8dc5 8dc5 s 	endm
8dc5 8dc5 s 
8dc5 8dc5 s 
8dc5 8dc5 s setbar2x macro
8dc5 8dc5 s 	ld (cursorx), a
8dc5 8dc5 s 	ld hl,memcursorx 
8dc5 8dc5 s 	ld (hl),a
8dc5 8dc5 s 
8dc5 8dc5 s 	ld a, (cursory)
8dc5 8dc5 s 	cp 10
8dc5 8dc5 s 	jp nc,cont
8dc5 8dc5 s 	; else change y cursor 
8dc5 8dc5 s 	add 7 
8dc5 8dc5 s 	ld (cursory),a
8dc5 8dc5 s 	
8dc5 8dc5 s 	ld a,(memcursory) 
8dc5 8dc5 s 	add 6
8dc5 8dc5 s 	ld (memcursory),a
8dc5 8dc5 s 
8dc5 8dc5 s 	jp cont
8dc5 8dc5 s 	endm 
8dc5 8dc5 s 
8dc5 8dc5 s bar1:
8dc5 8dc5 d 3e00
8dc5 8dc5 u 02 01
8dc5 8dc5 s 	ld a,0
8dc7 8dc7 s 	setbar1x 
8dc7 8dc7 d 324788
8dc7 8dc7 u 03 01
8dc7 8dc7 s 	ld (cursorx), a
8dca 8dca d 21588b
8dca 8dca u 03 01
8dca 8dca s 	ld hl,memcursorx 
8dcd 8dcd d 77
8dcd 8dcd u 01 01
8dcd 8dcd s 	ld (hl),a
8dce 8dce s 
8dce 8dce d 3a4888
8dce 8dce u 03 01
8dce 8dce s 	ld a, (cursory)
8dd1 8dd1 d fe09
8dd1 8dd1 u 02 01
8dd1 8dd1 s 	cp 9
8dd3 8dd3 d daf18c
8dd3 8dd3 u 03 01
8dd3 8dd3 s 	jp c,cont
8dd6 8dd6 s 	; else change y cursor 
8dd6 8dd6 d d607
8dd6 8dd6 u 02 01
8dd6 8dd6 s 	sub 7 
8dd8 8dd8 d 324888
8dd8 8dd8 u 03 01
8dd8 8dd8 s 	ld (cursory),a
8ddb 8ddb s 	
8ddb 8ddb d 3a598b
8ddb 8ddb u 03 01
8ddb 8ddb s 	ld a,(memcursory) 
8dde 8dde d d606
8dde 8dde u 02 01
8dde 8dde s 	sub 6
8de0 8de0 d 32598b
8de0 8de0 u 03 01
8de0 8de0 s 	ld (memcursory),a
8de3 8de3 s 
8de3 8de3 d c3f18c
8de3 8de3 u 03 01
8de3 8de3 s 	jp cont
8de6 8de6 s 	endm
8de6 8de6 s 	
8de6 8de6 s bar2:	
8de6 8de6 d 3e10
8de6 8de6 u 02 01
8de6 8de6 s 	ld a,16
8de8 8de8 s 	setbar1x 
8de8 8de8 d 324788
8de8 8de8 u 03 01
8de8 8de8 s 	ld (cursorx), a
8deb 8deb d 21588b
8deb 8deb u 03 01
8deb 8deb s 	ld hl,memcursorx 
8dee 8dee d 77
8dee 8dee u 01 01
8dee 8dee s 	ld (hl),a
8def 8def s 
8def 8def d 3a4888
8def 8def u 03 01
8def 8def s 	ld a, (cursory)
8df2 8df2 d fe09
8df2 8df2 u 02 01
8df2 8df2 s 	cp 9
8df4 8df4 d daf18c
8df4 8df4 u 03 01
8df4 8df4 s 	jp c,cont
8df7 8df7 s 	; else change y cursor 
8df7 8df7 d d607
8df7 8df7 u 02 01
8df7 8df7 s 	sub 7 
8df9 8df9 d 324888
8df9 8df9 u 03 01
8df9 8df9 s 	ld (cursory),a
8dfc 8dfc s 	
8dfc 8dfc d 3a598b
8dfc 8dfc u 03 01
8dfc 8dfc s 	ld a,(memcursory) 
8dff 8dff d d606
8dff 8dff u 02 01
8dff 8dff s 	sub 6
8e01 8e01 d 32598b
8e01 8e01 u 03 01
8e01 8e01 s 	ld (memcursory),a
8e04 8e04 s 
8e04 8e04 d c3f18c
8e04 8e04 u 03 01
8e04 8e04 s 	jp cont
8e07 8e07 s 	endm
8e07 8e07 s 
8e07 8e07 s bar3:
8e07 8e07 d 3e20
8e07 8e07 u 02 01
8e07 8e07 s 	ld a,32
8e09 8e09 s 	setbar1x 
8e09 8e09 d 324788
8e09 8e09 u 03 01
8e09 8e09 s 	ld (cursorx), a
8e0c 8e0c d 21588b
8e0c 8e0c u 03 01
8e0c 8e0c s 	ld hl,memcursorx 
8e0f 8e0f d 77
8e0f 8e0f u 01 01
8e0f 8e0f s 	ld (hl),a
8e10 8e10 s 
8e10 8e10 d 3a4888
8e10 8e10 u 03 01
8e10 8e10 s 	ld a, (cursory)
8e13 8e13 d fe09
8e13 8e13 u 02 01
8e13 8e13 s 	cp 9
8e15 8e15 d daf18c
8e15 8e15 u 03 01
8e15 8e15 s 	jp c,cont
8e18 8e18 s 	; else change y cursor 
8e18 8e18 d d607
8e18 8e18 u 02 01
8e18 8e18 s 	sub 7 
8e1a 8e1a d 324888
8e1a 8e1a u 03 01
8e1a 8e1a s 	ld (cursory),a
8e1d 8e1d s 	
8e1d 8e1d d 3a598b
8e1d 8e1d u 03 01
8e1d 8e1d s 	ld a,(memcursory) 
8e20 8e20 d d606
8e20 8e20 u 02 01
8e20 8e20 s 	sub 6
8e22 8e22 d 32598b
8e22 8e22 u 03 01
8e22 8e22 s 	ld (memcursory),a
8e25 8e25 s 
8e25 8e25 d c3f18c
8e25 8e25 u 03 01
8e25 8e25 s 	jp cont
8e28 8e28 s 	endm
8e28 8e28 s 
8e28 8e28 s bar4:
8e28 8e28 d 3e30
8e28 8e28 u 02 01
8e28 8e28 s 	ld a,48
8e2a 8e2a s 	setbar1x 
8e2a 8e2a d 324788
8e2a 8e2a u 03 01
8e2a 8e2a s 	ld (cursorx), a
8e2d 8e2d d 21588b
8e2d 8e2d u 03 01
8e2d 8e2d s 	ld hl,memcursorx 
8e30 8e30 d 77
8e30 8e30 u 01 01
8e30 8e30 s 	ld (hl),a
8e31 8e31 s 
8e31 8e31 d 3a4888
8e31 8e31 u 03 01
8e31 8e31 s 	ld a, (cursory)
8e34 8e34 d fe09
8e34 8e34 u 02 01
8e34 8e34 s 	cp 9
8e36 8e36 d daf18c
8e36 8e36 u 03 01
8e36 8e36 s 	jp c,cont
8e39 8e39 s 	; else change y cursor 
8e39 8e39 d d607
8e39 8e39 u 02 01
8e39 8e39 s 	sub 7 
8e3b 8e3b d 324888
8e3b 8e3b u 03 01
8e3b 8e3b s 	ld (cursory),a
8e3e 8e3e s 	
8e3e 8e3e d 3a598b
8e3e 8e3e u 03 01
8e3e 8e3e s 	ld a,(memcursory) 
8e41 8e41 d d606
8e41 8e41 u 02 01
8e41 8e41 s 	sub 6
8e43 8e43 d 32598b
8e43 8e43 u 03 01
8e43 8e43 s 	ld (memcursory),a
8e46 8e46 s 
8e46 8e46 d c3f18c
8e46 8e46 u 03 01
8e46 8e46 s 	jp cont
8e49 8e49 s 	endm
8e49 8e49 s 
8e49 8e49 s bar5:
8e49 8e49 d 3e00
8e49 8e49 u 02 01
8e49 8e49 s 	ld a,0
8e4b 8e4b s 	setbar2x 
8e4b 8e4b d 324788
8e4b 8e4b u 03 01
8e4b 8e4b s 	ld (cursorx), a
8e4e 8e4e d 21588b
8e4e 8e4e u 03 01
8e4e 8e4e s 	ld hl,memcursorx 
8e51 8e51 d 77
8e51 8e51 u 01 01
8e51 8e51 s 	ld (hl),a
8e52 8e52 s 
8e52 8e52 d 3a4888
8e52 8e52 u 03 01
8e52 8e52 s 	ld a, (cursory)
8e55 8e55 d fe0a
8e55 8e55 u 02 01
8e55 8e55 s 	cp 10
8e57 8e57 d d2f18c
8e57 8e57 u 03 01
8e57 8e57 s 	jp nc,cont
8e5a 8e5a s 	; else change y cursor 
8e5a 8e5a d c607
8e5a 8e5a u 02 01
8e5a 8e5a s 	add 7 
8e5c 8e5c d 324888
8e5c 8e5c u 03 01
8e5c 8e5c s 	ld (cursory),a
8e5f 8e5f s 	
8e5f 8e5f d 3a598b
8e5f 8e5f u 03 01
8e5f 8e5f s 	ld a,(memcursory) 
8e62 8e62 d c606
8e62 8e62 u 02 01
8e62 8e62 s 	add 6
8e64 8e64 d 32598b
8e64 8e64 u 03 01
8e64 8e64 s 	ld (memcursory),a
8e67 8e67 s 
8e67 8e67 d c3f18c
8e67 8e67 u 03 01
8e67 8e67 s 	jp cont
8e6a 8e6a s 	endm
8e6a 8e6a s 
8e6a 8e6a s bar6:
8e6a 8e6a d 3e10
8e6a 8e6a u 02 01
8e6a 8e6a s 	ld a,16
8e6c 8e6c s 	setbar2x
8e6c 8e6c d 324788
8e6c 8e6c u 03 01
8e6c 8e6c s 	ld (cursorx), a
8e6f 8e6f d 21588b
8e6f 8e6f u 03 01
8e6f 8e6f s 	ld hl,memcursorx 
8e72 8e72 d 77
8e72 8e72 u 01 01
8e72 8e72 s 	ld (hl),a
8e73 8e73 s 
8e73 8e73 d 3a4888
8e73 8e73 u 03 01
8e73 8e73 s 	ld a, (cursory)
8e76 8e76 d fe0a
8e76 8e76 u 02 01
8e76 8e76 s 	cp 10
8e78 8e78 d d2f18c
8e78 8e78 u 03 01
8e78 8e78 s 	jp nc,cont
8e7b 8e7b s 	; else change y cursor 
8e7b 8e7b d c607
8e7b 8e7b u 02 01
8e7b 8e7b s 	add 7 
8e7d 8e7d d 324888
8e7d 8e7d u 03 01
8e7d 8e7d s 	ld (cursory),a
8e80 8e80 s 	
8e80 8e80 d 3a598b
8e80 8e80 u 03 01
8e80 8e80 s 	ld a,(memcursory) 
8e83 8e83 d c606
8e83 8e83 u 02 01
8e83 8e83 s 	add 6
8e85 8e85 d 32598b
8e85 8e85 u 03 01
8e85 8e85 s 	ld (memcursory),a
8e88 8e88 s 
8e88 8e88 d c3f18c
8e88 8e88 u 03 01
8e88 8e88 s 	jp cont
8e8b 8e8b s 	endm
8e8b 8e8b s 	
8e8b 8e8b s bar7:
8e8b 8e8b d 3e20
8e8b 8e8b u 02 01
8e8b 8e8b s 	ld a,32
8e8d 8e8d s 	setbar2x
8e8d 8e8d d 324788
8e8d 8e8d u 03 01
8e8d 8e8d s 	ld (cursorx), a
8e90 8e90 d 21588b
8e90 8e90 u 03 01
8e90 8e90 s 	ld hl,memcursorx 
8e93 8e93 d 77
8e93 8e93 u 01 01
8e93 8e93 s 	ld (hl),a
8e94 8e94 s 
8e94 8e94 d 3a4888
8e94 8e94 u 03 01
8e94 8e94 s 	ld a, (cursory)
8e97 8e97 d fe0a
8e97 8e97 u 02 01
8e97 8e97 s 	cp 10
8e99 8e99 d d2f18c
8e99 8e99 u 03 01
8e99 8e99 s 	jp nc,cont
8e9c 8e9c s 	; else change y cursor 
8e9c 8e9c d c607
8e9c 8e9c u 02 01
8e9c 8e9c s 	add 7 
8e9e 8e9e d 324888
8e9e 8e9e u 03 01
8e9e 8e9e s 	ld (cursory),a
8ea1 8ea1 s 	
8ea1 8ea1 d 3a598b
8ea1 8ea1 u 03 01
8ea1 8ea1 s 	ld a,(memcursory) 
8ea4 8ea4 d c606
8ea4 8ea4 u 02 01
8ea4 8ea4 s 	add 6
8ea6 8ea6 d 32598b
8ea6 8ea6 u 03 01
8ea6 8ea6 s 	ld (memcursory),a
8ea9 8ea9 s 
8ea9 8ea9 d c3f18c
8ea9 8ea9 u 03 01
8ea9 8ea9 s 	jp cont
8eac 8eac s 	endm
8eac 8eac s 	
8eac 8eac s bar8:
8eac 8eac d 3e30
8eac 8eac u 02 01
8eac 8eac s 	ld a,48
8eae 8eae s 	setbar2x 
8eae 8eae d 324788
8eae 8eae u 03 01
8eae 8eae s 	ld (cursorx), a
8eb1 8eb1 d 21588b
8eb1 8eb1 u 03 01
8eb1 8eb1 s 	ld hl,memcursorx 
8eb4 8eb4 d 77
8eb4 8eb4 u 01 01
8eb4 8eb4 s 	ld (hl),a
8eb5 8eb5 s 
8eb5 8eb5 d 3a4888
8eb5 8eb5 u 03 01
8eb5 8eb5 s 	ld a, (cursory)
8eb8 8eb8 d fe0a
8eb8 8eb8 u 02 01
8eb8 8eb8 s 	cp 10
8eba 8eba d d2f18c
8eba 8eba u 03 01
8eba 8eba s 	jp nc,cont
8ebd 8ebd s 	; else change y cursor 
8ebd 8ebd d c607
8ebd 8ebd u 02 01
8ebd 8ebd s 	add 7 
8ebf 8ebf d 324888
8ebf 8ebf u 03 01
8ebf 8ebf s 	ld (cursory),a
8ec2 8ec2 s 	
8ec2 8ec2 d 3a598b
8ec2 8ec2 u 03 01
8ec2 8ec2 s 	ld a,(memcursory) 
8ec5 8ec5 d c606
8ec5 8ec5 u 02 01
8ec5 8ec5 s 	add 6
8ec7 8ec7 d 32598b
8ec7 8ec7 u 03 01
8ec7 8ec7 s 	ld (memcursory),a
8eca 8eca s 
8eca 8eca d c3f18c
8eca 8eca u 03 01
8eca 8eca s 	jp cont
8ecd 8ecd s 	endm
8ecd 8ecd s 
8ecd 8ecd s faster:
8ecd 8ecd d 3a4d88
8ecd 8ecd u 03 01
8ecd 8ecd s 	ld a,(tempo)
8ed0 8ed0 d fe01
8ed0 8ed0 u 02 01
8ed0 8ed0 s 	cp 1 
8ed2 8ed2 d caf18c
8ed2 8ed2 u 03 01
8ed2 8ed2 s 	jp z,cont
8ed5 8ed5 s 	
8ed5 8ed5 d 3d
8ed5 8ed5 u 01 01
8ed5 8ed5 s 	dec a
8ed6 8ed6 d 4f
8ed6 8ed6 u 01 01
8ed6 8ed6 s 	ld c,a
8ed7 8ed7 d 324d88
8ed7 8ed7 u 03 01
8ed7 8ed7 s 	ld (tempo),a
8eda 8eda d 3e00
8eda 8eda u 02 01
8eda 8eda s 	ld a,0
8edc 8edc d 214c88
8edc 8edc u 03 01
8edc 8edc s 	ld hl,delayc
8edf 8edf d 3600
8edf 8edf u 02 01
8edf 8edf s 	ld (hl),0
8ee1 8ee1 d cd8991
8ee1 8ee1 u 03 01
8ee1 8ee1 s 	call showtempo
8ee4 8ee4 d c3f18c
8ee4 8ee4 u 03 01
8ee4 8ee4 s 	jp cont
8ee7 8ee7 s 
8ee7 8ee7 s faster1:
8ee7 8ee7 d 3a4d88
8ee7 8ee7 u 03 01
8ee7 8ee7 s 	ld a,(tempo)
8eea 8eea d fe11
8eea 8eea u 02 01
8eea 8eea s 	cp $11
8eec 8eec d daf18c
8eec 8eec u 03 01
8eec 8eec s 	jp c,cont
8eef 8eef s 	
8eef 8eef d d610
8eef 8eef u 02 01
8eef 8eef s 	sub $10
8ef1 8ef1 d 4f
8ef1 8ef1 u 01 01
8ef1 8ef1 s 	ld c,a
8ef2 8ef2 d 324d88
8ef2 8ef2 u 03 01
8ef2 8ef2 s 	ld (tempo),a
8ef5 8ef5 d 3e00
8ef5 8ef5 u 02 01
8ef5 8ef5 s 	ld a,0
8ef7 8ef7 d 214c88
8ef7 8ef7 u 03 01
8ef7 8ef7 s 	ld hl,delayc
8efa 8efa d 3600
8efa 8efa u 02 01
8efa 8efa s 	ld (hl),0
8efc 8efc d cd8991
8efc 8efc u 03 01
8efc 8efc s 	call showtempo
8eff 8eff d c3f18c
8eff 8eff u 03 01
8eff 8eff s 	jp cont
8f02 8f02 s 	
8f02 8f02 s slower:
8f02 8f02 d 3a4d88
8f02 8f02 u 03 01
8f02 8f02 s 	ld a,(tempo)
8f05 8f05 d feff
8f05 8f05 u 02 01
8f05 8f05 s 	cp a,255
8f07 8f07 d caf18c
8f07 8f07 u 03 01
8f07 8f07 s 	jp z,cont
8f0a 8f0a s 	
8f0a 8f0a d 3c
8f0a 8f0a u 01 01
8f0a 8f0a s 	inc a
8f0b 8f0b d 4f
8f0b 8f0b u 01 01
8f0b 8f0b s 	ld c,a
8f0c 8f0c d 324d88
8f0c 8f0c u 03 01
8f0c 8f0c s 	ld (tempo),a
8f0f 8f0f d 3e00
8f0f 8f0f u 02 01
8f0f 8f0f s 	ld a,0
8f11 8f11 d 214c88
8f11 8f11 u 03 01
8f11 8f11 s 	ld hl,delayc
8f14 8f14 d 3600
8f14 8f14 u 02 01
8f14 8f14 s 	ld (hl),0
8f16 8f16 s 
8f16 8f16 d cd8991
8f16 8f16 u 03 01
8f16 8f16 s 	call showtempo
8f19 8f19 d c3f18c
8f19 8f19 u 03 01
8f19 8f19 s 	jp cont	
8f1c 8f1c s 
8f1c 8f1c s slower1:
8f1c 8f1c d 3a4d88
8f1c 8f1c u 03 01
8f1c 8f1c s 	ld a,(tempo)
8f1f 8f1f d fef0
8f1f 8f1f u 02 01
8f1f 8f1f s 	cp a,$f0
8f21 8f21 d d2f18c
8f21 8f21 u 03 01
8f21 8f21 s 	jp nc,cont
8f24 8f24 s 	
8f24 8f24 d c610
8f24 8f24 u 02 01
8f24 8f24 s 	add $10
8f26 8f26 d 4f
8f26 8f26 u 01 01
8f26 8f26 s 	ld c,a
8f27 8f27 d 324d88
8f27 8f27 u 03 01
8f27 8f27 s 	ld (tempo),a
8f2a 8f2a d 3e00
8f2a 8f2a u 02 01
8f2a 8f2a s 	ld a,0
8f2c 8f2c d 214c88
8f2c 8f2c u 03 01
8f2c 8f2c s 	ld hl,delayc
8f2f 8f2f d 3600
8f2f 8f2f u 02 01
8f2f 8f2f s 	ld (hl),0
8f31 8f31 s 
8f31 8f31 d cd8991
8f31 8f31 u 03 01
8f31 8f31 s 	call showtempo
8f34 8f34 d c3f18c
8f34 8f34 u 03 01
8f34 8f34 s 	jp cont	
8f37 8f37 s 
8f37 8f37 s testsoundx macro 
8f37 8f37 s 	call gettrackdrum
8f37 8f37 s 	ld b,a
8f37 8f37 s 	
8f37 8f37 s 	ld a,$90+9
8f37 8f37 s 	out (8),a
8f37 8f37 s   
8f37 8f37 s 	call short_delay
8f37 8f37 s 
8f37 8f37 s 	ld a,b
8f37 8f37 s 	out (8),a 
8f37 8f37 s   
8f37 8f37 s 	call short_delay  
8f37 8f37 s   
8f37 8f37 s 	ld a,127
8f37 8f37 s 	out (8),a
8f37 8f37 s   
8f37 8f37 s 	endm 
8f37 8f37 s 
8f37 8f37 s instrup:
8f37 8f37 d cda291
8f37 8f37 u 03 01
8f37 8f37 s 	call gettrackdrum
8f3a 8f3a d 3c
8f3a 8f3a u 01 01
8f3a 8f3a s 	inc a 
8f3b 8f3b d 77
8f3b 8f3b u 01 01
8f3b 8f3b s 	ld (hl), a
8f3c 8f3c d c3f18c
8f3c 8f3c u 03 01
8f3c 8f3c s 	jp cont 
8f3f 8f3f s 
8f3f 8f3f s instrdown:
8f3f 8f3f d cda291
8f3f 8f3f u 03 01
8f3f 8f3f s 	call gettrackdrum
8f42 8f42 d 3d
8f42 8f42 u 01 01
8f42 8f42 s 	dec a 
8f43 8f43 d 77
8f43 8f43 u 01 01
8f43 8f43 s 	ld (hl), a
8f44 8f44 d c3f18c
8f44 8f44 u 03 01
8f44 8f44 s 	jp cont
8f47 8f47 s 
8f47 8f47 s restorecellx macro 
8f47 8f47 s 	ld a,(memcursorx)
8f47 8f47 s 	
8f47 8f47 s 	ld hl,data
8f47 8f47 s 	ld d,0
8f47 8f47 s 	ld e,a
8f47 8f47 s 	add hl,de	
8f47 8f47 s 	ld a,(hl)
8f47 8f47 s 	endm 
8f47 8f47 s 
8f47 8f47 s setgridx macro
8f47 8f47 s         local setpos1
8f47 8f47 s 	call memcursor
8f47 8f47 s 	ld (hl),SETSYM 
8f47 8f47 s 	ld hl,lastcur
8f47 8f47 s 	ld (hl),SETSYM 
8f47 8f47 s 	endm 
8f47 8f47 s 
8f47 8f47 s erasegridx macro
8f47 8f47 s         local setpos1
8f47 8f47 s 	call memcursor
8f47 8f47 s 	ld a, (hl)
8f47 8f47 s 	;;  erase
8f47 8f47 s 	push hl
8f47 8f47 s 	restorecellx 
8f47 8f47 s 	pop hl
8f47 8f47 s 	ld (hl),a
8f47 8f47 s 	ld hl,lastcur
8f47 8f47 s 	ld (hl),a 
8f47 8f47 s 	endm 
8f47 8f47 s 
8f47 8f47 s gettrackdrumx macro 
8f47 8f47 s 	call gettracknr
8f47 8f47 s 	dec a
8f47 8f47 s 	ld hl,instracks
8f47 8f47 s 	ld d,0
8f47 8f47 s 	ld e,a
8f47 8f47 s 	add hl, de 
8f47 8f47 s 	ld a,(hl)
8f47 8f47 s 	endm
8f47 8f47 s 
8f47 8f47 s 
8f47 8f47 s setgridandsound:
8f47 8f47 s 	
8f47 8f47 s 	testsoundx
8f47 8f47 d cda291
8f47 8f47 u 03 01
8f47 8f47 s 	call gettrackdrum
8f4a 8f4a d 47
8f4a 8f4a u 01 01
8f4a 8f4a s 	ld b,a
8f4b 8f4b s 	
8f4b 8f4b d 3e99
8f4b 8f4b u 02 01
8f4b 8f4b s 	ld a,$90+9
8f4d 8f4d d d308
8f4d 8f4d u 02 01
8f4d 8f4d s 	out (8),a
8f4f 8f4f s   
8f4f 8f4f d cd7992
8f4f 8f4f u 03 01
8f4f 8f4f s 	call short_delay
8f52 8f52 s 
8f52 8f52 d 78
8f52 8f52 u 01 01
8f52 8f52 s 	ld a,b
8f53 8f53 d d308
8f53 8f53 u 02 01
8f53 8f53 s 	out (8),a 
8f55 8f55 s   
8f55 8f55 d cd7992
8f55 8f55 u 03 01
8f55 8f55 s 	call short_delay  
8f58 8f58 s   
8f58 8f58 d 3e7f
8f58 8f58 u 02 01
8f58 8f58 s 	ld a,127
8f5a 8f5a d d308
8f5a 8f5a u 02 01
8f5a 8f5a s 	out (8),a
8f5c 8f5c s   
8f5c 8f5c s 	endm
8f5c 8f5c s 	setgridx 
8f5c 8f5c d cda090
8f5c 8f5c u 03 01
8f5c 8f5c s 	call memcursor
8f5f 8f5f d 368f
8f5f 8f5f u 02 01
8f5f 8f5f s 	ld (hl),SETSYM 
8f61 8f61 d 214488
8f61 8f61 u 03 01
8f61 8f61 s 	ld hl,lastcur
8f64 8f64 d 368f
8f64 8f64 u 02 01
8f64 8f64 s 	ld (hl),SETSYM 
8f66 8f66 s 	endm
8f66 8f66 s 
8f66 8f66 d c3f18c
8f66 8f66 u 03 01
8f66 8f66 s 	jp cont 
8f69 8f69 s 
8f69 8f69 s setgridandsoundr:
8f69 8f69 s 	
8f69 8f69 s 	testsoundx
8f69 8f69 d cda291
8f69 8f69 u 03 01
8f69 8f69 s 	call gettrackdrum
8f6c 8f6c d 47
8f6c 8f6c u 01 01
8f6c 8f6c s 	ld b,a
8f6d 8f6d s 	
8f6d 8f6d d 3e99
8f6d 8f6d u 02 01
8f6d 8f6d s 	ld a,$90+9
8f6f 8f6f d d308
8f6f 8f6f u 02 01
8f6f 8f6f s 	out (8),a
8f71 8f71 s   
8f71 8f71 d cd7992
8f71 8f71 u 03 01
8f71 8f71 s 	call short_delay
8f74 8f74 s 
8f74 8f74 d 78
8f74 8f74 u 01 01
8f74 8f74 s 	ld a,b
8f75 8f75 d d308
8f75 8f75 u 02 01
8f75 8f75 s 	out (8),a 
8f77 8f77 s   
8f77 8f77 d cd7992
8f77 8f77 u 03 01
8f77 8f77 s 	call short_delay  
8f7a 8f7a s   
8f7a 8f7a d 3e7f
8f7a 8f7a u 02 01
8f7a 8f7a s 	ld a,127
8f7c 8f7c d d308
8f7c 8f7c u 02 01
8f7c 8f7c s 	out (8),a
8f7e 8f7e s   
8f7e 8f7e s 	endm
8f7e 8f7e s 	setgridx 
8f7e 8f7e d cda090
8f7e 8f7e u 03 01
8f7e 8f7e s 	call memcursor
8f81 8f81 d 368f
8f81 8f81 u 02 01
8f81 8f81 s 	ld (hl),SETSYM 
8f83 8f83 d 214488
8f83 8f83 u 03 01
8f83 8f83 s 	ld hl,lastcur
8f86 8f86 d 368f
8f86 8f86 u 02 01
8f86 8f86 s 	ld (hl),SETSYM 
8f88 8f88 s 	endm
8f88 8f88 s 
8f88 8f88 d c9
8f88 8f88 u 01 01
8f88 8f88 s 	ret
8f89 8f89 s 	
8f89 8f89 s setgrid:
8f89 8f89 s 	
8f89 8f89 s 	setgridx 
8f89 8f89 d cda090
8f89 8f89 u 03 01
8f89 8f89 s 	call memcursor
8f8c 8f8c d 368f
8f8c 8f8c u 02 01
8f8c 8f8c s 	ld (hl),SETSYM 
8f8e 8f8e d 214488
8f8e 8f8e u 03 01
8f8e 8f8e s 	ld hl,lastcur
8f91 8f91 d 368f
8f91 8f91 u 02 01
8f91 8f91 s 	ld (hl),SETSYM 
8f93 8f93 s 	endm
8f93 8f93 d c3f18c
8f93 8f93 u 03 01
8f93 8f93 s 	jp cont
8f96 8f96 s 
8f96 8f96 s setgridr:
8f96 8f96 s 	
8f96 8f96 s 	setgridx 
8f96 8f96 d cda090
8f96 8f96 u 03 01
8f96 8f96 s 	call memcursor
8f99 8f99 d 368f
8f99 8f99 u 02 01
8f99 8f99 s 	ld (hl),SETSYM 
8f9b 8f9b d 214488
8f9b 8f9b u 03 01
8f9b 8f9b s 	ld hl,lastcur
8f9e 8f9e d 368f
8f9e 8f9e u 02 01
8f9e 8f9e s 	ld (hl),SETSYM 
8fa0 8fa0 s 	endm
8fa0 8fa0 d c9
8fa0 8fa0 u 01 01
8fa0 8fa0 s 	ret
8fa1 8fa1 s 
8fa1 8fa1 s erasegrid:
8fa1 8fa1 s 	
8fa1 8fa1 s 	erasegridx 
8fa1 8fa1 d cda090
8fa1 8fa1 u 03 01
8fa1 8fa1 s 	call memcursor
8fa4 8fa4 d 7e
8fa4 8fa4 u 01 01
8fa4 8fa4 s 	ld a, (hl)
8fa5 8fa5 s 	;;  erase
8fa5 8fa5 d e5
8fa5 8fa5 u 01 01
8fa5 8fa5 s 	push hl
8fa6 8fa6 s 	restorecellx 
8fa6 8fa6 d 3a588b
8fa6 8fa6 u 03 01
8fa6 8fa6 s 	ld a,(memcursorx)
8fa9 8fa9 s 	
8fa9 8fa9 d 21c480
8fa9 8fa9 u 03 01
8fa9 8fa9 s 	ld hl,data
8fac 8fac d 1600
8fac 8fac u 02 01
8fac 8fac s 	ld d,0
8fae 8fae d 5f
8fae 8fae u 01 01
8fae 8fae s 	ld e,a
8faf 8faf d 19
8faf 8faf u 01 01
8faf 8faf s 	add hl,de	
8fb0 8fb0 d 7e
8fb0 8fb0 u 01 01
8fb0 8fb0 s 	ld a,(hl)
8fb1 8fb1 s 	endm
8fb1 8fb1 d e1
8fb1 8fb1 u 01 01
8fb1 8fb1 s 	pop hl
8fb2 8fb2 d 77
8fb2 8fb2 u 01 01
8fb2 8fb2 s 	ld (hl),a
8fb3 8fb3 d 214488
8fb3 8fb3 u 03 01
8fb3 8fb3 s 	ld hl,lastcur
8fb6 8fb6 d 77
8fb6 8fb6 u 01 01
8fb6 8fb6 s 	ld (hl),a 
8fb7 8fb7 s 	endm
8fb7 8fb7 d c3f18c
8fb7 8fb7 u 03 01
8fb7 8fb7 s 	jp cont
8fba 8fba s 
8fba 8fba s erasegridr:
8fba 8fba s 	
8fba 8fba s 	erasegridx 
8fba 8fba d cda090
8fba 8fba u 03 01
8fba 8fba s 	call memcursor
8fbd 8fbd d 7e
8fbd 8fbd u 01 01
8fbd 8fbd s 	ld a, (hl)
8fbe 8fbe s 	;;  erase
8fbe 8fbe d e5
8fbe 8fbe u 01 01
8fbe 8fbe s 	push hl
8fbf 8fbf s 	restorecellx 
8fbf 8fbf d 3a588b
8fbf 8fbf u 03 01
8fbf 8fbf s 	ld a,(memcursorx)
8fc2 8fc2 s 	
8fc2 8fc2 d 21c480
8fc2 8fc2 u 03 01
8fc2 8fc2 s 	ld hl,data
8fc5 8fc5 d 1600
8fc5 8fc5 u 02 01
8fc5 8fc5 s 	ld d,0
8fc7 8fc7 d 5f
8fc7 8fc7 u 01 01
8fc7 8fc7 s 	ld e,a
8fc8 8fc8 d 19
8fc8 8fc8 u 01 01
8fc8 8fc8 s 	add hl,de	
8fc9 8fc9 d 7e
8fc9 8fc9 u 01 01
8fc9 8fc9 s 	ld a,(hl)
8fca 8fca s 	endm
8fca 8fca d e1
8fca 8fca u 01 01
8fca 8fca s 	pop hl
8fcb 8fcb d 77
8fcb 8fcb u 01 01
8fcb 8fcb s 	ld (hl),a
8fcc 8fcc d 214488
8fcc 8fcc u 03 01
8fcc 8fcc s 	ld hl,lastcur
8fcf 8fcf d 77
8fcf 8fcf u 01 01
8fcf 8fcf s 	ld (hl),a 
8fd0 8fd0 s 	endm
8fd0 8fd0 d c9
8fd0 8fd0 u 01 01
8fd0 8fd0 s 	ret 
8fd1 8fd1 s 
8fd1 8fd1 s startstop:
8fd1 8fd1 d 3a4a88
8fd1 8fd1 u 03 01
8fd1 8fd1 s 	ld a,(status)
8fd4 8fd4 d ee01
8fd4 8fd4 u 02 01
8fd4 8fd4 s 	xor 1
8fd6 8fd6 d 324a88
8fd6 8fd6 u 03 01
8fd6 8fd6 s 	ld (status), a
8fd9 8fd9 d b7
8fd9 8fd9 u 01 01
8fd9 8fd9 s 	or a
8fda 8fda d 200e
8fda 8fda u 02 01
8fda 8fda s 	jr nz, showplay
8fdc 8fdc s 	
8fdc 8fdc d 117c3c
8fdc 8fdc u 03 01
8fdc 8fdc s 	ld de,$3c00 + 64 + 60
8fdf 8fdf d 210080
8fdf 8fdf u 03 01
8fdf 8fdf s 	ld hl,stopped 
8fe2 8fe2 d 010100
8fe2 8fe2 u 03 01
8fe2 8fe2 s 	ld bc,1 
8fe5 8fe5 d edb0
8fe5 8fe5 u 02 01
8fe5 8fe5 s 	ldir
8fe7 8fe7 d c3f18c
8fe7 8fe7 u 03 01
8fe7 8fe7 s 	jp cont 
8fea 8fea s showplay:
8fea 8fea d 117c3c
8fea 8fea u 03 01
8fea 8fea s 	ld de,$3c00 + 64 + 60
8fed 8fed d 210180
8fed 8fed u 03 01
8fed 8fed s 	ld hl,playing  
8ff0 8ff0 d 010100
8ff0 8ff0 u 03 01
8ff0 8ff0 s 	ld bc,1
8ff3 8ff3 d edb0
8ff3 8ff3 u 02 01
8ff3 8ff3 s 	ldir
8ff5 8ff5 d c3f18c
8ff5 8ff5 u 03 01
8ff5 8ff5 s 	jp cont 
8ff8 8ff8 s 
8ff8 8ff8 s trackstatus:
8ff8 8ff8 d 3a4b88
8ff8 8ff8 u 03 01
8ff8 8ff8 s 	ld a,(track)
8ffb 8ffb d ee01
8ffb 8ffb u 02 01
8ffb 8ffb s 	xor 1
8ffd 8ffd d 324b88
8ffd 8ffd u 03 01
8ffd 8ffd s 	ld (track), a
9000 9000 d b7
9000 9000 u 01 01
9000 9000 s 	or a
9001 9001 d 200e
9001 9001 u 02 01
9001 9001 s 	jr nz, showtrackstatus
9003 9003 s 	
9003 9003 d 117e3c
9003 9003 u 03 01
9003 9003 s 	ld de,$3c00 + 64 + 62
9006 9006 d 210280
9006 9006 u 03 01
9006 9006 s 	ld hl,free 
9009 9009 d 010100
9009 9009 u 03 01
9009 9009 s 	ld bc,1
900c 900c d edb0
900c 900c u 02 01
900c 900c s 	ldir
900e 900e d c3f18c
900e 900e u 03 01
900e 900e s 	jp cont
9011 9011 s 	
9011 9011 s showtrackstatus:	
9011 9011 d 117e3c
9011 9011 u 03 01
9011 9011 s 	ld de,$3c00 + 64 + 62
9014 9014 d 210380
9014 9014 u 03 01
9014 9014 s 	ld hl,tracked   
9017 9017 d 010100
9017 9017 u 03 01
9017 9017 s 	ld bc,1
901a 901a d edb0
901a 901a u 02 01
901a 901a s 	ldir
901c 901c d c3f18c
901c 901c u 03 01
901c 901c s 	jp cont 
901f 901f s 
901f 901f s 
901f 901f s left:	
901f 901f d 3a4788
901f 901f u 03 01
901f 901f s 	ld a,(cursorx)
9022 9022 d fe00
9022 9022 u 02 01
9022 9022 s 	cp 0
9024 9024 d caf18c
9024 9024 u 03 01
9024 9024 s 	jp z, cont
9027 9027 d 3d
9027 9027 u 01 01
9027 9027 s 	dec a	
9028 9028 d 324788
9028 9028 u 03 01
9028 9028 s 	ld (cursorx),a
902b 902b d 21588b
902b 902b u 03 01
902b 902b s 	ld hl,memcursorx 
902e 902e d 77
902e 902e u 01 01
902e 902e s 	ld (hl),a
902f 902f d c3f18c
902f 902f u 03 01
902f 902f s 	jp cont
9032 9032 s right:
9032 9032 d 3a4788
9032 9032 u 03 01
9032 9032 s 	ld a,(cursorx)
9035 9035 d fe3f
9035 9035 u 02 01
9035 9035 s 	cp 63
9037 9037 d caf18c
9037 9037 u 03 01
9037 9037 s 	jp z, cont
903a 903a d 3c
903a 903a u 01 01
903a 903a s 	inc a
903b 903b d 324788
903b 903b u 03 01
903b 903b s 	ld (cursorx),a
903e 903e d 21588b
903e 903e u 03 01
903e 903e s 	ld hl,memcursorx 
9041 9041 d 77
9041 9041 u 01 01
9041 9041 s 	ld (hl),a
9042 9042 d c3f18c
9042 9042 u 03 01
9042 9042 s 	jp cont
9045 9045 s up:
9045 9045 d 3a4888
9045 9045 u 03 01
9045 9045 s 	ld a,(cursory)
9048 9048 d fe03
9048 9048 u 02 01
9048 9048 s 	cp 3
904a 904a d caf18c
904a 904a u 03 01
904a 904a s 	jp z, cont
904d 904d d fe0a
904d 904d u 02 01
904d 904d s 	cp 10
904f 904f d 2004
904f 904f u 02 01
904f 904f s 	jr nz,up1
9051 9051 d 3e08
9051 9051 u 02 01
9051 9051 s 	ld a,8
9053 9053 d 1801
9053 9053 u 02 01
9053 9053 s 	jr up2
9055 9055 s up1:	 
9055 9055 d 3d
9055 9055 u 01 01
9055 9055 s 	dec a
9056 9056 s 
9056 9056 s up2:	
9056 9056 d 324888
9056 9056 u 03 01
9056 9056 s 	ld (cursory),a
9059 9059 s 
9059 9059 d 21598b
9059 9059 u 03 01
9059 9059 s 	ld hl,memcursory
905c 905c d 7e
905c 905c u 01 01
905c 905c s 	ld a,(hl)
905d 905d d 3d
905d 905d u 01 01
905d 905d s 	dec a
905e 905e d 77
905e 905e u 01 01
905e 905e s 	ld (hl),a 
905f 905f d c3f18c
905f 905f u 03 01
905f 905f s 	jp cont
9062 9062 s 
9062 9062 s down:
9062 9062 d 3a4888
9062 9062 u 03 01
9062 9062 s 	ld a,(cursory)
9065 9065 d fe0f
9065 9065 u 02 01
9065 9065 s 	cp 15
9067 9067 d caf18c
9067 9067 u 03 01
9067 9067 s 	jp z, cont
906a 906a d fe08
906a 906a u 02 01
906a 906a s 	cp 8
906c 906c d 2004
906c 906c u 02 01
906c 906c s 	jr nz,down1
906e 906e d 3e0a
906e 906e u 02 01
906e 906e s 	ld a,10
9070 9070 d 1801
9070 9070 u 02 01
9070 9070 s 	jr down2
9072 9072 s down1:	
9072 9072 d 3c
9072 9072 u 01 01
9072 9072 s 	inc a
9073 9073 s down2:	 
9073 9073 d 324888
9073 9073 u 03 01
9073 9073 s 	ld (cursory),a
9076 9076 s 	
9076 9076 d 21598b
9076 9076 u 03 01
9076 9076 s 	ld hl,memcursory 
9079 9079 d 7e
9079 9079 u 01 01
9079 9079 s 	ld a,(hl)
907a 907a d 3c
907a 907a u 01 01
907a 907a s 	inc a
907b 907b d 77
907b 907b u 01 01
907b 907b s 	ld (hl),a
907c 907c d c3f18c
907c 907c u 03 01
907c 907c s 	jp cont
907f 907f s 
907f 907f s 	
907f 907f s cursor:
907f 907f d 3a4988
907f 907f u 03 01
907f 907f s 	ld a,(blink)
9082 9082 d 3c
9082 9082 u 01 01
9082 9082 s 	inc a
9083 9083 d 324988
9083 9083 u 03 01
9083 9083 s 	ld (blink),a
9086 9086 d 21003c
9086 9086 u 03 01
9086 9086 s 	ld hl,$3c00
9089 9089 d 3a4788
9089 9089 u 03 01
9089 9089 s 	ld a,(cursorx)
908c 908c d b7
908c 908c u 01 01
908c 908c s 	or a
908d 908d d 2804
908d 908d u 02 01
908d 908d s 	jr z, moveyup
908f 908f d 47
908f 908f u 01 01
908f 908f s 	ld b,a
9090 9090 s movex:	
9090 9090 d 23
9090 9090 u 01 01
9090 9090 s 	inc hl 
9091 9091 d 10fd
9091 9091 u 02 01
9091 9091 s 	djnz movex
9093 9093 s moveyup:	
9093 9093 d 3a4888
9093 9093 u 03 01
9093 9093 s 	ld a,(cursory)
9096 9096 d b7
9096 9096 u 01 01
9096 9096 s 	or a
9097 9097 d c8
9097 9097 u 01 01
9097 9097 s 	ret z
9098 9098 d 47
9098 9098 u 01 01
9098 9098 s 	ld b,a
9099 9099 d 114000
9099 9099 u 03 01
9099 9099 s 	ld de,64
909c 909c s movey:
909c 909c d 19
909c 909c u 01 01
909c 909c s 	add hl,de 
909d 909d d 10fd
909d 909d u 02 01
909d 909d s 	djnz movey
909f 909f d c9
909f 909f u 01 01
909f 909f s 	ret 
90a0 90a0 s 
90a0 90a0 s memcursor:
90a0 90a0 d 215288
90a0 90a0 u 03 01
90a0 90a0 s 	ld hl,tracks1
90a3 90a3 d 3a588b
90a3 90a3 u 03 01
90a3 90a3 s 	ld a,(memcursorx)
90a6 90a6 d b7
90a6 90a6 u 01 01
90a6 90a6 s 	or a
90a7 90a7 d 2804
90a7 90a7 u 02 01
90a7 90a7 s 	jr z, mmoveyup
90a9 90a9 d 47
90a9 90a9 u 01 01
90a9 90a9 s 	ld b,a
90aa 90aa s mmovex:	
90aa 90aa d 23
90aa 90aa u 01 01
90aa 90aa s 	inc hl 
90ab 90ab d 10fd
90ab 90ab u 02 01
90ab 90ab s 	djnz mmovex
90ad 90ad s mmoveyup:	
90ad 90ad d 3a598b
90ad 90ad u 03 01
90ad 90ad s 	ld a,(memcursory)
90b0 90b0 d b7
90b0 90b0 u 01 01
90b0 90b0 s 	or a
90b1 90b1 d c8
90b1 90b1 u 01 01
90b1 90b1 s 	ret z
90b2 90b2 d 47
90b2 90b2 u 01 01
90b2 90b2 s 	ld b,a
90b3 90b3 d 114000
90b3 90b3 u 03 01
90b3 90b3 s 	ld de,64
90b6 90b6 s mmovey:
90b6 90b6 d 19
90b6 90b6 u 01 01
90b6 90b6 s 	add hl,de 
90b7 90b7 d 10fd
90b7 90b7 u 02 01
90b7 90b7 s 	djnz mmovey
90b9 90b9 d c9
90b9 90b9 u 01 01
90b9 90b9 s 	ret 
90ba 90ba s 
90ba 90ba s 	
90ba 90ba d 010000
90ba 90ba u 03 01
90ba 90ba s dly.01:	ld	bc,d10000th
90bd 90bd s 	sett	0
90bd 90bd d 0b
90bd 90bd u 01 01
90bd 90bd s dly:	dec	bc
90be 90be d 78
90be 90be u 01 01
90be 90be s 	ld	a,b
90bf 90bf d b1
90bf 90bf u 01 01
90bf 90bf s 	or	c
90c0 90c0 d c2bd90
90c0 90c0 u 03 01
90c0 90c0 s 	jp	nz,dly
90c3 90c3 d c9
90c3 90c3 u 01 01
90c3 90c3 s 	ret
90c4 90c4 s 
90c4 90c4 s 
90c4 90c4 s nextnote:
90c4 90c4 s 
90c4 90c4 d 3a5b8b
90c4 90c4 u 03 01
90c4 90c4 s 	ld a,(qtrackpos)
90c7 90c7 d 3c
90c7 90c7 u 01 01
90c7 90c7 s 	inc a
90c8 90c8 d 47
90c8 90c8 u 01 01
90c8 90c8 s 	ld b,a
90c9 90c9 s 	
90c9 90c9 d 3a4f88
90c9 90c9 u 03 01
90c9 90c9 s 	ld a,(numticks)
90cc 90cc d b8
90cc 90cc u 01 01
90cc 90cc s 	cp b
90cd 90cd d 78
90cd 90cd u 01 01
90cd 90cd s 	ld a,b
90ce 90ce d 2002
90ce 90ce u 02 01
90ce 90ce s 	jr nz,nextnote0
90d0 90d0 s 
90d0 90d0 s 	; max tick number reached, set to 0
90d0 90d0 d 3e00
90d0 90d0 u 02 01
90d0 90d0 s 	ld a, 0
90d2 90d2 s 
90d2 90d2 s nextnote0:
90d2 90d2 d 325b8b
90d2 90d2 u 03 01
90d2 90d2 s 	ld (qtrackpos),a
90d5 90d5 s 
90d5 90d5 d 47
90d5 90d5 u 01 01
90d5 90d5 s 	ld b, a
90d6 90d6 d 3a5188
90d6 90d6 u 03 01
90d6 90d6 s 	ld a, (quantpat)
90d9 90d9 d a0
90d9 90d9 u 01 01
90d9 90d9 s 	and b
90da 90da d 325a8b
90da 90da u 03 01
90da 90da s 	ld (trackpos),a
90dd 90dd s 
90dd 90dd d b8
90dd 90dd u 01 01
90dd 90dd s 	cp b
90de 90de d 2808
90de 90de u 02 01
90de 90de s 	jr z, nextnote1
90e0 90e0 s 
90e0 90e0 s 	;; ENTER sample keyboard; this one makes noise,
90e0 90e0 s 	;; ONLY sample when (qtrackpos) = (trackpos)
90e0 90e0 s 
90e0 90e0 s 	keydown k_enter 
90e0 90e0 d 3a4038
90e0 90e0 u 03 01
90e0 90e0 s 	ld	a,(k_enter >> 8)
90e3 90e3 d e601
90e3 90e3 u 02 01
90e3 90e3 s 	and	k_enter % $100
90e5 90e5 s 	endm
90e5 90e5 d c4698f
90e5 90e5 u 03 01
90e5 90e5 s 	call nz,setgridandsoundr
90e8 90e8 s 
90e8 90e8 s nextnote1:
90e8 90e8 s 
90e8 90e8 s 	;; sample keyboard
90e8 90e8 s 
90e8 90e8 s 	keydown k_space 
90e8 90e8 d 3a4038
90e8 90e8 u 03 01
90e8 90e8 s 	ld	a,(k_space >> 8)
90eb 90eb d e680
90eb 90eb u 02 01
90eb 90eb s 	and	k_space % $100
90ed 90ed s 	endm
90ed 90ed d c4968f
90ed 90ed u 03 01
90ed 90ed s 	call nz,setgridr
90f0 90f0 s 
90f0 90f0 s 	keydown k_clear
90f0 90f0 d 3a4038
90f0 90f0 u 03 01
90f0 90f0 s 	ld	a,(k_clear >> 8)
90f3 90f3 d e602
90f3 90f3 u 02 01
90f3 90f3 s 	and	k_clear % $100
90f5 90f5 s 	endm
90f5 90f5 d c4ba8f
90f5 90f5 u 03 01
90f5 90f5 s 	call nz,erasegridr
90f8 90f8 s 
90f8 90f8 d 3a5a8b
90f8 90f8 u 03 01
90f8 90f8 s 	ld a, (trackpos)
90fb 90fb s 
90fb 90fb d cb7f
90fb 90fb u 02 01
90fb 90fb s 	bit 7,a
90fd 90fd d c8
90fd 90fd u 01 01
90fd 90fd s 	ret z
90fe 90fe s 	
90fe 90fe d 3e00
90fe 90fe u 02 01
90fe 90fe s 	ld a,0
9100 9100 d 325b8b
9100 9100 u 03 01
9100 9100 s 	ld (qtrackpos),a
9103 9103 d 325a8b
9103 9103 u 03 01
9103 9103 s 	ld (trackpos),a
9106 9106 s 	
9106 9106 d c9
9106 9106 u 01 01
9106 9106 s 	ret
9107 9107 s 
9107 9107 s showplaycursor:
9107 9107 s 	
9107 9107 d 218480
9107 9107 u 03 01
9107 9107 s 	ld	hl,title+2*64 
910a 910a d 11803c
910a 910a u 03 01
910a 910a s 	ld	de,$3c00+2*64 
910d 910d d 014000
910d 910d u 03 01
910d 910d s 	ld	bc,64 
9110 9110 d edb0
9110 9110 u 02 01
9110 9110 s 	ldir
9112 9112 s 
9112 9112 d 214482
9112 9112 u 03 01
9112 9112 s 	ld	hl,title+9*64 
9115 9115 d 11403e
9115 9115 u 03 01
9115 9115 s 	ld	de,$3c00+9*64 
9118 9118 d 014000
9118 9118 u 03 01
9118 9118 s 	ld	bc,64 
911b 911b d edb0
911b 911b u 02 01
911b 911b s 	ldir
911d 911d s 
911d 911d d 3a5b8b
911d 911d u 03 01
911d 911d s 	ld a,(qtrackpos)
9120 9120 s 	
9120 9120 d 21803c
9120 9120 u 03 01
9120 9120 s 	ld hl,$3c00+2*64
9123 9123 d 5f
9123 9123 u 01 01
9123 9123 s 	ld e,a
9124 9124 d 1600
9124 9124 u 02 01
9124 9124 s 	ld d,0 
9126 9126 d 19
9126 9126 u 01 01
9126 9126 s 	add hl,de
9127 9127 s 
9127 9127 d cb77
9127 9127 u 02 01
9127 9127 s 	bit 6,a
9129 9129 d 2003
9129 9129 u 02 01
9129 9129 s 	jr nz,showcurtrack2
912b 912b s 	
912b 912b d 36aa
912b 912b u 02 01
912b 912b s 	ld (hl),POSMARKSYM
912d 912d d c9
912d 912d u 01 01
912d 912d s 	ret
912e 912e s showcurtrack2:
912e 912e d 118001
912e 912e u 03 01
912e 912e s 	ld de,6*64
9131 9131 d 19
9131 9131 u 01 01
9131 9131 s 	add hl,de
9132 9132 d 36aa
9132 9132 u 02 01
9132 9132 s 	ld (hl),POSMARKSYM
9134 9134 d c9
9134 9134 u 01 01
9134 9134 s 	ret
9135 9135 s 	
9135 9135 s 	
9135 9135 s d10000th	equ	1774080 / t($) / 10000
9135 9135 s 
9135 9135 s 	  
9135 9135 s screenupdate:
9135 9135 s 	
9135 9135 s 	;;  swap in track 1 
9135 9135 d 215288
9135 9135 u 03 01
9135 9135 s 	ld	hl,tracks1	
9138 9138 d 11c03c
9138 9138 u 03 01
9138 9138 s 	ld	de,$3c00+3*64 
913b 913b d 018001
913b 913b u 03 01
913b 913b s 	ld	bc,6*64
913e 913e d edb0
913e 913e u 02 01
913e 913e s 	ldir
9140 9140 s 
9140 9140 s 	;;  swap in track 1 
9140 9140 d 21d289
9140 9140 u 03 01
9140 9140 s 	ld	hl,tracks2 
9143 9143 d 11803e
9143 9143 u 03 01
9143 9143 s 	ld	de,$3c00+10*64 
9146 9146 d 018001
9146 9146 u 03 01
9146 9146 s 	ld	bc,6*64
9149 9149 d edb0
9149 9149 u 02 01
9149 9149 s 	ldir
914b 914b s 
914b 914b d c9
914b 914b u 01 01
914b 914b s 	ret
914c 914c s 
914c 914c s showcursor:
914c 914c s 
914c 914c d 2a4588
914c 914c u 03 01
914c 914c s 	ld hl,(lastcurpos)
914f 914f d 3a4488
914f 914f u 03 01
914f 914f s 	ld a,(lastcur)
9152 9152 d 77
9152 9152 u 01 01
9152 9152 s 	ld (hl),a
9153 9153 d cd7f90
9153 9153 u 03 01
9153 9153 s 	call cursor
9156 9156 d 224588
9156 9156 u 03 01
9156 9156 s 	ld (lastcurpos),hl
9159 9159 d 7e
9159 9159 u 01 01
9159 9159 s 	ld a,(hl)
915a 915a d 324488
915a 915a u 03 01
915a 915a s 	ld (lastcur),a
915d 915d s 	
915d 915d d 3a4988
915d 915d u 03 01
915d 915d s 	ld a,(blink)
9160 9160 d fe7f
9160 9160 u 02 01
9160 9160 s 	cp a,127
9162 9162 d 3803
9162 9162 u 02 01
9162 9162 s 	jr c,cur2
9164 9164 d 3658
9164 9164 u 02 01
9164 9164 s 	ld (hl), CURSYM 
9166 9166 d c9
9166 9166 u 01 01
9166 9166 s 	ret 
9167 9167 s 
9167 9167 s cur2:
9167 9167 d e5
9167 9167 u 01 01
9167 9167 s 	push hl
9168 9168 s 	restorecellx
9168 9168 d 3a588b
9168 9168 u 03 01
9168 9168 s 	ld a,(memcursorx)
916b 916b s 	
916b 916b d 21c480
916b 916b u 03 01
916b 916b s 	ld hl,data
916e 916e d 1600
916e 916e u 02 01
916e 916e s 	ld d,0
9170 9170 d 5f
9170 9170 u 01 01
9170 9170 s 	ld e,a
9171 9171 d 19
9171 9171 u 01 01
9171 9171 s 	add hl,de	
9172 9172 d 7e
9172 9172 u 01 01
9172 9172 s 	ld a,(hl)
9173 9173 s 	endm
9173 9173 d e1
9173 9173 u 01 01
9173 9173 s 	pop hl 
9174 9174 d c9
9174 9174 u 01 01
9174 9174 s 	ret
9175 9175 s 	
9175 9175 s 	
9175 9175 s byte2ascii: 			; input c, output de ASCII 
9175 9175 d 79
9175 9175 u 01 01
9175 9175 s    ld a, c
9176 9176 d 1f
9176 9176 u 01 01
9176 9176 s    rra
9177 9177 d 1f
9177 9177 u 01 01
9177 9177 s    rra
9178 9178 d 1f
9178 9178 u 01 01
9178 9178 s    rra
9179 9179 d 1f
9179 9179 u 01 01
9179 9179 s    rra
917a 917a d cd7f91
917a 917a u 03 01
917a 917a s    call convnibble 
917d 917d d 57
917d 917d u 01 01
917d 917d s    ld d, a	
917e 917e d 79
917e 917e u 01 01
917e 917e s    ld  a,c
917f 917f s convnibble:
917f 917f d e60f
917f 917f u 02 01
917f 917f s    and  $0F
9181 9181 d c690
9181 9181 u 02 01
9181 9181 s    add  a,$90
9183 9183 d 27
9183 9183 u 01 01
9183 9183 s    daa
9184 9184 d ce40
9184 9184 u 02 01
9184 9184 s    adc  a,$40
9186 9186 d 27
9186 9186 u 01 01
9186 9186 s    daa
9187 9187 d 5f
9187 9187 u 01 01
9187 9187 s    ld e, a	
9188 9188 d c9
9188 9188 u 01 01
9188 9188 s    ret
9189 9189 s 
9189 9189 s showtempo:
9189 9189 d 3a4d88
9189 9189 u 03 01
9189 9189 s 	ld a,(tempo)
918c 918c d 4f
918c 918c u 01 01
918c 918c s 	ld c,a 
918d 918d d 21503c
918d 918d u 03 01
918d 918d s 	ld hl,$3c00+64+16
9190 9190 d cd7591
9190 9190 u 03 01
9190 9190 s 	call byte2ascii
9193 9193 d 72
9193 9193 u 01 01
9193 9193 s 	ld (hl),d
9194 9194 d 23
9194 9194 u 01 01
9194 9194 s 	inc hl
9195 9195 d 73
9195 9195 u 01 01
9195 9195 s 	ld (hl),e
9196 9196 d c9
9196 9196 u 01 01
9196 9196 s 	ret
9197 9197 s 
9197 9197 s gettracknr:
9197 9197 d 3a598b
9197 9197 u 03 01
9197 9197 s 	ld a,(memcursory)
919a 919a d c601
919a 919a u 02 01
919a 919a s 	add 1
919c 919c d fe07
919c 919c u 02 01
919c 919c s 	cp 7
919e 919e d d8
919e 919e u 01 01
919e 919e s 	ret c
919f 919f d d606
919f 919f u 02 01
919f 919f s 	sub 6
91a1 91a1 d c9
91a1 91a1 u 01 01
91a1 91a1 s 	ret
91a2 91a2 s 
91a2 91a2 s 
91a2 91a2 s 
91a2 91a2 s gettrackdrum:
91a2 91a2 s 	gettrackdrumx
91a2 91a2 d cd9791
91a2 91a2 u 03 01
91a2 91a2 s 	call gettracknr
91a5 91a5 d 3d
91a5 91a5 u 01 01
91a5 91a5 s 	dec a
91a6 91a6 d 21528b
91a6 91a6 u 03 01
91a6 91a6 s 	ld hl,instracks
91a9 91a9 d 1600
91a9 91a9 u 02 01
91a9 91a9 s 	ld d,0
91ab 91ab d 5f
91ab 91ab u 01 01
91ab 91ab s 	ld e,a
91ac 91ac d 19
91ac 91ac u 01 01
91ac 91ac s 	add hl, de 
91ad 91ad d 7e
91ad 91ad u 01 01
91ad 91ad s 	ld a,(hl)
91ae 91ae s 	endm
91ae 91ae d c9
91ae 91ae u 01 01
91ae 91ae s 	ret
91af 91af s 
91af 91af s gettrackdrumreg: ; input: e register, starting at 0
91af 91af d 21528b
91af 91af u 03 01
91af 91af s 	ld hl,instracks
91b2 91b2 d 1600
91b2 91b2 u 02 01
91b2 91b2 s 	ld d,0
91b4 91b4 d 19
91b4 91b4 u 01 01
91b4 91b4 s 	add hl, de 
91b5 91b5 d 46
91b5 91b5 u 01 01
91b5 91b5 s 	ld b,(hl)
91b6 91b6 d c9
91b6 91b6 u 01 01
91b6 91b6 s 	ret
91b7 91b7 s 
91b7 91b7 s showtrackdrum:
91b7 91b7 d cda291
91b7 91b7 u 03 01
91b7 91b7 s 	call gettrackdrum
91ba 91ba d 4f
91ba 91ba u 01 01
91ba 91ba s 	ld c, a
91bb 91bb d 21613c
91bb 91bb u 03 01
91bb 91bb s 	ld hl,$3c00+64+33
91be 91be d cd7591
91be 91be u 03 01
91be 91be s 	call byte2ascii
91c1 91c1 d 72
91c1 91c1 u 01 01
91c1 91c1 s 	ld (hl),d
91c2 91c2 d 23
91c2 91c2 u 01 01
91c2 91c2 s 	inc hl
91c3 91c3 d 73
91c3 91c3 u 01 01
91c3 91c3 s 	ld (hl),e
91c4 91c4 d c9
91c4 91c4 u 01 01
91c4 91c4 s 	ret
91c5 91c5 s 
91c5 91c5 s showtrack:
91c5 91c5 d cd9791
91c5 91c5 u 03 01
91c5 91c5 s 	call gettracknr 
91c8 91c8 d 4f
91c8 91c8 u 01 01
91c8 91c8 s 	ld c,a 
91c9 91c9 d 21473c
91c9 91c9 u 03 01
91c9 91c9 s 	ld hl,$3c00+64+7
91cc 91cc d cd7f91
91cc 91cc u 03 01
91cc 91cc s 	call convnibble 
91cf 91cf d 73
91cf 91cf u 01 01
91cf 91cf s 	ld (hl),e
91d0 91d0 d c9
91d0 91d0 u 01 01
91d0 91d0 s 	ret
91d1 91d1 s 
91d1 91d1 s playnotes:
91d1 91d1 d 3a5b8b
91d1 91d1 u 03 01
91d1 91d1 s 	ld a,(qtrackpos)
91d4 91d4 s 	
91d4 91d4 d cb77
91d4 91d4 u 02 01
91d4 91d4 s 	bit 6,a
91d6 91d6 d 2005
91d6 91d6 u 02 01
91d6 91d6 s 	jr nz,playhightracks ; > 64  
91d8 91d8 s 	
91d8 91d8 d 215288
91d8 91d8 u 03 01
91d8 91d8 s 	ld hl,tracks1
91db 91db s 	
91db 91db d 1803
91db 91db u 02 01
91db 91db s 	jr playtracks
91dd 91dd s 
91dd 91dd s playhightracks:
91dd 91dd s 
91dd 91dd d 21d289
91dd 91dd u 03 01
91dd 91dd s 	ld hl,tracks2
91e0 91e0 s 
91e0 91e0 s playtracks: 
91e0 91e0 s 	; add note index
91e0 91e0 s 	; clear bit 6
91e0 91e0 d cbb7
91e0 91e0 u 02 01
91e0 91e0 s 	res 6,a
91e2 91e2 d 5f
91e2 91e2 u 01 01
91e2 91e2 s 	ld e,a
91e3 91e3 d 1600
91e3 91e3 u 02 01
91e3 91e3 s 	ld d,0
91e5 91e5 d 19
91e5 91e5 u 01 01
91e5 91e5 s 	add hl,de
91e6 91e6 d 014000
91e6 91e6 u 03 01
91e6 91e6 s 	ld bc,64
91e9 91e9 s 
91e9 91e9 d e5
91e9 91e9 u 01 01
91e9 91e9 s 	push hl
91ea 91ea d c5
91ea 91ea u 01 01
91ea 91ea s 	push bc
91eb 91eb d 4e
91eb 91eb u 01 01
91eb 91eb s 	ld c,(hl) ; -> c is on or off
91ec 91ec d 1600
91ec 91ec u 02 01
91ec 91ec s 	ld d,0
91ee 91ee d 1e00
91ee 91ee u 02 01
91ee 91ee s 	ld e,0 ; e is track number 
91f0 91f0 d cdaf91
91f0 91f0 u 03 01
91f0 91f0 s 	call gettrackdrumreg ; -> b is drum note 
91f3 91f3 d cd4992
91f3 91f3 u 03 01
91f3 91f3 s 	call playnote
91f6 91f6 s 
91f6 91f6 d c1
91f6 91f6 u 01 01
91f6 91f6 s 	pop bc
91f7 91f7 d e1
91f7 91f7 u 01 01
91f7 91f7 s 	pop hl
91f8 91f8 s 	
91f8 91f8 d 09
91f8 91f8 u 01 01
91f8 91f8 s 	add hl,bc
91f9 91f9 s 
91f9 91f9 d e5
91f9 91f9 u 01 01
91f9 91f9 s 	push hl
91fa 91fa d c5
91fa 91fa u 01 01
91fa 91fa s 	push bc
91fb 91fb s 
91fb 91fb d 4e
91fb 91fb u 01 01
91fb 91fb s 	ld c,(hl)
91fc 91fc d 1600
91fc 91fc u 02 01
91fc 91fc s 	ld d,0
91fe 91fe d 1e01
91fe 91fe u 02 01
91fe 91fe s 	ld e,1 
9200 9200 d cdaf91
9200 9200 u 03 01
9200 9200 s 	call gettrackdrumreg 
9203 9203 d cd4992
9203 9203 u 03 01
9203 9203 s 	call playnote
9206 9206 s 
9206 9206 d c1
9206 9206 u 01 01
9206 9206 s 	pop bc
9207 9207 d e1
9207 9207 u 01 01
9207 9207 s 	pop hl
9208 9208 s 
9208 9208 d 09
9208 9208 u 01 01
9208 9208 s 	add hl,bc
9209 9209 s 
9209 9209 d e5
9209 9209 u 01 01
9209 9209 s 	push hl
920a 920a d c5
920a 920a u 01 01
920a 920a s 	push bc
920b 920b s 	
920b 920b d 4e
920b 920b u 01 01
920b 920b s 	ld c,(hl) 
920c 920c d 1600
920c 920c u 02 01
920c 920c s 	ld d,0
920e 920e d 1e02
920e 920e u 02 01
920e 920e s 	ld e,2
9210 9210 d cdaf91
9210 9210 u 03 01
9210 9210 s 	call gettrackdrumreg 
9213 9213 d cd4992
9213 9213 u 03 01
9213 9213 s 	call playnote
9216 9216 s 
9216 9216 d c1
9216 9216 u 01 01
9216 9216 s 	pop bc
9217 9217 d e1
9217 9217 u 01 01
9217 9217 s 	pop hl
9218 9218 s 
9218 9218 d 09
9218 9218 u 01 01
9218 9218 s 	add hl,bc
9219 9219 s 
9219 9219 d e5
9219 9219 u 01 01
9219 9219 s 	push hl
921a 921a d c5
921a 921a u 01 01
921a 921a s 	push bc
921b 921b s 
921b 921b d 4e
921b 921b u 01 01
921b 921b s 	ld c,(hl) 
921c 921c d 1600
921c 921c u 02 01
921c 921c s 	ld d,0
921e 921e d 1e03
921e 921e u 02 01
921e 921e s 	ld e,3 
9220 9220 d cdaf91
9220 9220 u 03 01
9220 9220 s 	call gettrackdrumreg 
9223 9223 d cd4992
9223 9223 u 03 01
9223 9223 s 	call playnote
9226 9226 s 
9226 9226 d c1
9226 9226 u 01 01
9226 9226 s 	pop bc
9227 9227 d e1
9227 9227 u 01 01
9227 9227 s 	pop hl
9228 9228 s 
9228 9228 d 09
9228 9228 u 01 01
9228 9228 s 	add hl,bc
9229 9229 s 
9229 9229 d e5
9229 9229 u 01 01
9229 9229 s 	push hl
922a 922a d c5
922a 922a u 01 01
922a 922a s 	push bc
922b 922b s 
922b 922b d 4e
922b 922b u 01 01
922b 922b s 	ld c,(hl) 
922c 922c d 1600
922c 922c u 02 01
922c 922c s 	ld d,0
922e 922e d 1e04
922e 922e u 02 01
922e 922e s 	ld e,4 
9230 9230 d cdaf91
9230 9230 u 03 01
9230 9230 s 	call gettrackdrumreg 
9233 9233 d cd4992
9233 9233 u 03 01
9233 9233 s 	call playnote
9236 9236 s 
9236 9236 d c1
9236 9236 u 01 01
9236 9236 s 	pop bc
9237 9237 d e1
9237 9237 u 01 01
9237 9237 s 	pop hl
9238 9238 s 	
9238 9238 d 09
9238 9238 u 01 01
9238 9238 s 	add hl,bc
9239 9239 s 
9239 9239 d e5
9239 9239 u 01 01
9239 9239 s 	push hl
923a 923a d c5
923a 923a u 01 01
923a 923a s 	push bc
923b 923b s 
923b 923b d 4e
923b 923b u 01 01
923b 923b s 	ld c,(hl) 
923c 923c d 1600
923c 923c u 02 01
923c 923c s 	ld d,0
923e 923e d 1e05
923e 923e u 02 01
923e 923e s 	ld e,5 
9240 9240 d cdaf91
9240 9240 u 03 01
9240 9240 s 	call gettrackdrumreg 
9243 9243 d cd4992
9243 9243 u 03 01
9243 9243 s 	call playnote
9246 9246 s 
9246 9246 d c1
9246 9246 u 01 01
9246 9246 s 	pop bc	
9247 9247 d e1
9247 9247 u 01 01
9247 9247 s 	pop hl
9248 9248 s 	
9248 9248 d c9
9248 9248 u 01 01
9248 9248 s 	ret
9249 9249 s 	
9249 9249 s 	
9249 9249 s playnote: ; input note on / off in c, instrument in b 
9249 9249 s 
9249 9249 d 79
9249 9249 u 01 01
9249 9249 s 	ld a, c
924a 924a d fe8f
924a 924a u 02 01
924a 924a s 	cp SETSYM
924c 924c d c0
924c 924c u 01 01
924c 924c s 	ret nz
924d 924d s 	
924d 924d d 3e99
924d 924d u 02 01
924d 924d s 	ld a,$90+9
924f 924f d d308
924f 924f u 02 01
924f 924f s 	out (8),a
9251 9251 s   
9251 9251 d cd7992
9251 9251 u 03 01
9251 9251 s 	call short_delay
9254 9254 s 
9254 9254 d 78
9254 9254 u 01 01
9254 9254 s 	ld a,b
9255 9255 d d308
9255 9255 u 02 01
9255 9255 s 	out (8),a 
9257 9257 s   
9257 9257 d cd7992
9257 9257 u 03 01
9257 9257 s 	call short_delay  
925a 925a s   
925a 925a d 3e7f
925a 925a u 02 01
925a 925a s 	ld a,127
925c 925c d d308
925c 925c u 02 01
925c 925c s 	out (8),a
925e 925e s   
925e 925e d c9
925e 925e u 01 01
925e 925e s 	ret 
925f 925f s 	
925f 925f s showgridres:
925f 925f d 3a5088
925f 925f u 03 01
925f 925f s 	ld a,(gridres)
9262 9262 d 4f
9262 9262 u 01 01
9262 9262 s 	ld c, a
9263 9263 d 21723c
9263 9263 u 03 01
9263 9263 s 	ld hl,$3c00+64+50
9266 9266 d cd7591
9266 9266 u 03 01
9266 9266 s 	call byte2ascii
9269 9269 d 72
9269 9269 u 01 01
9269 9269 s 	ld (hl),d
926a 926a d 23
926a 926a u 01 01
926a 926a s 	inc hl
926b 926b d 73
926b 926b u 01 01
926b 926b s 	ld (hl),e
926c 926c d c9
926c 926c u 01 01
926c 926c s 	ret
926d 926d s 
926d 926d s showbars:
926d 926d d 3a4e88
926d 926d u 03 01
926d 926d s 	ld a,(numbars)
9270 9270 d 4f
9270 9270 u 01 01
9270 9270 s 	ld c, a
9271 9271 d 216a3c
9271 9271 u 03 01
9271 9271 s 	ld hl,$3c00+64+42
9274 9274 d cd7f91
9274 9274 u 03 01
9274 9274 s 	call convnibble
9277 9277 d 73
9277 9277 u 01 01
9277 9277 s 	ld (hl),e
9278 9278 d c9
9278 9278 u 01 01
9278 9278 s 	ret
9279 9279 s 
9279 9279 s 
9279 9279 s short_delay:
9279 9279 d 11ff00
9279 9279 u 03 01
9279 9279 s     ld de,$00ff
927c 927c s delloop: 
927c 927c d 1b
927c 927c u 01 01
927c 927c s     dec de
927d 927d d 7a
927d 927d u 01 01
927d 927d s     ld a,d
927e 927e d b3
927e 927e u 01 01
927e 927e s     or e
927f 927f d c27c92
927f 927f u 03 01
927f 927f s     jp nz,delloop
9282 9282 d c9
9282 9282 u 01 01
9282 9282 s     ret 
9283 9283 s 
9283 9283 s 	end main 
8b5c e
0033 v @DSP
9045 a up
8ff8 a trackstatus
9107 a showplaycursor
8b58 a memcursorx
8b59 a memcursory
8bef a trackcury
8f47 a setgridandsound
8b5a a trackpos
8b5b a qtrackpos
8f1c a slower1
8003 a tracked
80c4 a data
8852 a tracks1
89d2 a tracks2
90bd a dly
8f89 a setgrid
384020 v k_left
9072 a down1
9073 a down2
8001 a playing
382008 v k_semi
8d68 a countticks
8002 a free
8c15 a nostep
91c5 a showtrack
907f a cursor
9197 a gettracknr
0058 v CURSYM
8d96 a quit
9055 a up1
9056 a up2
9032 a right
90d2 a nextnote0
90e8 a nextnote1
8000 a stopped
914c a showcursor
917f a convnibble
005b v KCURUP
8db0 a prevbar
8c4b a scancont
0009 v KCURRIGHT
8fd1 a startstop
384080 v k_space
002b v @KBD
0049 v @KEY
9093 a moveyup
8844 a lastcur
8ee7 a faster1
8b5c a main
9090 a movex
909c a movey
8fea a showplay
8849 a blink
381001 v k_0
381002 v k_1
381004 v k_2
381008 v k_3
381010 v k_4
381020 v k_5
381040 v k_6
381080 v k_7
382001 v k_8
382002 v k_9
380101 v k_@
380102 v k_A
380104 v k_B
380108 v k_C
380110 v k_D
380120 v k_E
380140 v k_F
380180 v k_G
380201 v k_H
380202 v k_I
380204 v k_J
380208 v k_K
380210 v k_L
380220 v k_M
380240 v k_N
380280 v k_O
380401 v k_P
380402 v k_Q
380404 v k_R
380408 v k_S
380410 v k_T
380420 v k_U
380440 v k_V
380480 v k_W
380801 v k_X
380802 v k_Y
380804 v k_Z
402d v @EXIT
8404 a helpt
901f a left
384010 v k_down
8ecd a faster
8d41 a gridres16
8d4d a gridres32
8f69 a setgridandsoundr
90c4 a nextnote
8004 a title
8fba a erasegridr
008f v SETSYM
0000 v d10000th
90a0 a memcursor
884e a numbars
925f a showgridres
8850 a gridres
91d1 a playnotes
384001 v k_enter
91a2 a gettrackdrum
884d a tempo
388001 v k_shift
9135 a screenupdate
8d93 a save
8cf1 a cont
8f02 a slower
8d03 a chgridres
382040 v k_dot
000d v ENTER
9175 a byte2ascii
8c2c a scan
91af a gettrackdrumreg
4467 v @DSPLY
90ad a mmoveyup
0008 v KCURLEFT
8f37 a instrup
8fa1 a erasegrid
382004 v k_colon
8845 a lastcurpos
90aa a mmovex
90b6 a mmovey
8d1d a gridres2
8d29 a gridres4
8d35 a gridres8
884f a numticks
00aa v POSMARKSYM
8d5a a chgnumbars
91e0 a playtracks
9062 a down
382010 v k_comma
8d99 a nextbar
8b7a a main2
91b7 a showtrackdrum
382020 v k_dash
382080 v k_slash
8dc5 a bar1
8de6 a bar2
8e07 a bar3
8e28 a bar4
8e49 a bar5
8e6a a bar6
8e8b a bar7
8eac a bar8
384040 v k_right
884c a delayc
8f96 a setgridr
9011 a showtrackstatus
9279 a short_delay
8847 a cursorx
8848 a cursory
8d72 a help
9189 a showtempo
884b a track
8c24 a cur1
9167 a cur2
8d90 a load
8c0b a showtrackcur
926d a showbars
8b9e a loop
384002 v k_clear
9249 a playnote
8f3f a instrdown
927c a delloop
8b52 a instracks
8d0e a chgridres1
8c53 a scancont1
90ba a dly.01
884a a status
384004 v k_break
91dd a playhightracks
384008 v k_up
912e a showcurtrack2
000a v KCURDOWN
8851 a quantpat
