   1:				; TRACKER Version 1.2
   2:				; to do: mute track, real-time sequencing, MIDI in, more sensible pre-selected instruments, .... 
   3:				
   4:     -	8000          		org $8000
   5:				
   6:     -	00AA          	POSMARKSYM equ	$aa
   7:     -	008F          	SETSYM 	equ	$8f
   8:     -	0058          	CURSYM 	equ	'X'
   9:     -	000D          	ENTER	equ	$0d ; @DSPLY with newline
  10:				
  11:     -	0008          	KCURLEFT	equ 8
  12:     -	0009          	KCURRIGHT	equ 9
  13:     -	005B          	KCURUP		equ 91
  14:     -	000A          	KCURDOWN	equ 10
  15:				
  16:     -	4467          	@DSPLY		equ	$4467
  17:     -	402D          	@EXIT		equ	$402d
  18:     -	002B          	@KBD    	equ 	$002b 
  19:     -	0049          	@KEY    	equ 	$0049 
  20:     -	0033          	@DSP    	equ 	$0033
  21:				
  22:     -	8000  53      	stopped: ascii   'S'
  23:     -	8001  50      	playing: ascii   'P'
  24:     -	8002  46      	free: 	 ascii   'F'
  25:     -	8003  54      	tracked: ascii   'T'
  26:				
  27:				
  28:     -	8004  2A2A2A2A	title:	ascii   '***** MIDI/80 DRUM TRACKER V1.3 -- (C) 2024 BY LAMBDAMIKEL *****'
	              2A204D49
	              44492F38
	              30204452
	              554D2054
	              5241434B
	              45522056
	              312E3320
	              2D2D2028
	              43292032
	              30323420
	              4259204C
	              414D4244
	              414D494B
	              454C202A
	              2A2A2A2A
  29:     -	8044  54524143		ascii   'TRACK: 1 SPEED: -- VOL: 7F NOTE: 24 BARS: 8 STEP: 01 PAT: A S-F '
	              4B3A2031
	              20535045
	              45443A20
	              2D2D2056
	              4F4C3A20
	              3746204E
	              4F54453A
	              20323420
	              42415253
	              3A203820
	              53544550
	              3A203031
	              20504154
	              3A204120
	              532D4620
  30:     -	8084  313D3D3D		ascii	'1===-===+===-===2===-===+===-===3===-===+===-===4===-===+===-===' 
	              2D3D3D3D
	              2B3D3D3D
	              2D3D3D3D
	              323D3D3D
	              2D3D3D3D
	              2B3D3D3D
	              2D3D3D3D
	              333D3D3D
	              2D3D3D3D
	              2B3D3D3D
	              2D3D3D3D
	              343D3D3D
	              2D3D3D3D
	              2B3D3D3D
	              2D3D3D3D
  31:     -	80C4  7C2E2E2E	data:	ascii   '|...-...+...-...|...-...+...-...|...-...+...-...|...-...+...-...'
	              2D2E2E2E
	              2B2E2E2E
	              2D2E2E2E
	              7C2E2E2E
	              2D2E2E2E
	              2B2E2E2E
	              2D2E2E2E
	              7C2E2E2E
	              2D2E2E2E
	              2B2E2E2E
	              2D2E2E2E
	              7C2E2E2E
	              2D2E2E2E
	              2B2E2E2E
	              2D2E2E2E
  32:     -	8104  7C2E2E2E		ascii   '|...-...+...-...|...-...+...-...|...-...+...-...|...-...+...-...'
	              2D2E2E2E
	              2B2E2E2E
	              2D2E2E2E
	              7C2E2E2E
	              2D2E2E2E
	              2B2E2E2E
	              2D2E2E2E
	              7C2E2E2E
	              2D2E2E2E
	              2B2E2E2E
	              2D2E2E2E
	              7C2E2E2E
	              2D2E2E2E
	              2B2E2E2E
	              2D2E2E2E
  33:     -	8144  7C2E2E2E		ascii   '|...-...+...-...|...-...+...-...|...-...+...-...|...-...+...-...'
	              2D2E2E2E
	              2B2E2E2E
	              2D2E2E2E
	              7C2E2E2E
	              2D2E2E2E
	              2B2E2E2E
	              2D2E2E2E
	              7C2E2E2E
	              2D2E2E2E
	              2B2E2E2E
	              2D2E2E2E
	              7C2E2E2E
	              2D2E2E2E
	              2B2E2E2E
	              2D2E2E2E
  34:     -	8184  7C2E2E2E		ascii   '|...-...+...-...|...-...+...-...|...-...+...-...|...-...+...-...'
	              2D2E2E2E
	              2B2E2E2E
	              2D2E2E2E
	              7C2E2E2E
	              2D2E2E2E
	              2B2E2E2E
	              2D2E2E2E
	              7C2E2E2E
	              2D2E2E2E
	              2B2E2E2E
	              2D2E2E2E
	              7C2E2E2E
	              2D2E2E2E
	              2B2E2E2E
	              2D2E2E2E
  35:     -	81C4  7C2E2E2E		ascii   '|...-...+...-...|...-...+...-...|...-...+...-...|...-...+...-...'
	              2D2E2E2E
	              2B2E2E2E
	              2D2E2E2E
	              7C2E2E2E
	              2D2E2E2E
	              2B2E2E2E
	              2D2E2E2E
	              7C2E2E2E
	              2D2E2E2E
	              2B2E2E2E
	              2D2E2E2E
	              7C2E2E2E
	              2D2E2E2E
	              2B2E2E2E
	              2D2E2E2E
  36:     -	8204  7C2E2E2E		ascii   '|...-...+...-...|...-...+...-...|...-...+...-...|...-...+...-...'
	              2D2E2E2E
	              2B2E2E2E
	              2D2E2E2E
	              7C2E2E2E
	              2D2E2E2E
	              2B2E2E2E
	              2D2E2E2E
	              7C2E2E2E
	              2D2E2E2E
	              2B2E2E2E
	              2D2E2E2E
	              7C2E2E2E
	              2D2E2E2E
	              2B2E2E2E
	              2D2E2E2E
  37:     -	8244  353D3D3D		ascii	'5===-===+===-===6===-===+===-===7===-===+===-===8===-===+===-===' 
	              2D3D3D3D
	              2B3D3D3D
	              2D3D3D3D
	              363D3D3D
	              2D3D3D3D
	              2B3D3D3D
	              2D3D3D3D
	              373D3D3D
	              2D3D3D3D
	              2B3D3D3D
	              2D3D3D3D
	              383D3D3D
	              2D3D3D3D
	              2B3D3D3D
	              2D3D3D3D
  38:     -	8284  7C2E2E2E		ascii   '|...-...+...-...|...-...+...-...|...-...+...-...|...-...+...-...'
	              2D2E2E2E
	              2B2E2E2E
	              2D2E2E2E
	              7C2E2E2E
	              2D2E2E2E
	              2B2E2E2E
	              2D2E2E2E
	              7C2E2E2E
	              2D2E2E2E
	              2B2E2E2E
	              2D2E2E2E
	              7C2E2E2E
	              2D2E2E2E
	              2B2E2E2E
	              2D2E2E2E
  39:     -	82C4  7C2E2E2E		ascii   '|...-...+...-...|...-...+...-...|...-...+...-...|...-...+...-...'
	              2D2E2E2E
	              2B2E2E2E
	              2D2E2E2E
	              7C2E2E2E
	              2D2E2E2E
	              2B2E2E2E
	              2D2E2E2E
	              7C2E2E2E
	              2D2E2E2E
	              2B2E2E2E
	              2D2E2E2E
	              7C2E2E2E
	              2D2E2E2E
	              2B2E2E2E
	              2D2E2E2E
  40:     -	8304  7C2E2E2E		ascii   '|...-...+...-...|...-...+...-...|...-...+...-...|...-...+...-...'
	              2D2E2E2E
	              2B2E2E2E
	              2D2E2E2E
	              7C2E2E2E
	              2D2E2E2E
	              2B2E2E2E
	              2D2E2E2E
	              7C2E2E2E
	              2D2E2E2E
	              2B2E2E2E
	              2D2E2E2E
	              7C2E2E2E
	              2D2E2E2E
	              2B2E2E2E
	              2D2E2E2E
  41:     -	8344  7C2E2E2E		ascii   '|...-...+...-...|...-...+...-...|...-...+...-...|...-...+...-...'
	              2D2E2E2E
	              2B2E2E2E
	              2D2E2E2E
	              7C2E2E2E
	              2D2E2E2E
	              2B2E2E2E
	              2D2E2E2E
	              7C2E2E2E
	              2D2E2E2E
	              2B2E2E2E
	              2D2E2E2E
	              7C2E2E2E
	              2D2E2E2E
	              2B2E2E2E
	              2D2E2E2E
  42:     -	8384  7C2E2E2E		ascii   '|...-...+...-...|...-...+...-...|...-...+...-...|...-...+...-...'
	              2D2E2E2E
	              2B2E2E2E
	              2D2E2E2E
	              7C2E2E2E
	              2D2E2E2E
	              2B2E2E2E
	              2D2E2E2E
	              7C2E2E2E
	              2D2E2E2E
	              2B2E2E2E
	              2D2E2E2E
	              7C2E2E2E
	              2D2E2E2E
	              2B2E2E2E
	              2D2E2E2E
  43:     -	83C4  7C2E2E2E		ascii   '|...-...+...-...|...-...+...-...|...-...+...-...|...-...+...-...'
	              2D2E2E2E
	              2B2E2E2E
	              2D2E2E2E
	              7C2E2E2E
	              2D2E2E2E
	              2B2E2E2E
	              2D2E2E2E
	              7C2E2E2E
	              2D2E2E2E
	              2B2E2E2E
	              2D2E2E2E
	              7C2E2E2E
	              2D2E2E2E
	              2B2E2E2E
	              2D2E2E2E
  44:				
  45:     -	8404  2A2A2A2A	helpt:	ascii   '************************** HELP PAGE ***************************'
	              2A2A2A2A
	              2A2A2A2A
	              2A2A2A2A
	              2A2A2A2A
	              2A2A2A2A
	              2A2A2048
	              454C5020
	              50414745
	              202A2A2A
	              2A2A2A2A
	              2A2A2A2A
	              2A2A2A2A
	              2A2A2A2A
	              2A2A2A2A
	              2A2A2A2A
  46:     -	8444  43555253		ascii   'CURSOR MOVEMENT       : A D W X                                 '
	              4F52204D
	              4F56454D
	              454E5420
	              20202020
	              20203A20
	              41204420
	              57205820
	              20202020
	              20202020
	              20202020
	              20202020
	              20202020
	              20202020
	              20202020
	              20202020
  47:     -	8484  58204355		ascii   'X CURSOR MOVEMENT FINE: Z C                                     '
	              52534F52
	              204D4F56
	              454D454E
	              54204649
	              4E453A20
	              5A204320
	              20202020
	              20202020
	              20202020
	              20202020
	              20202020
	              20202020
	              20202020
	              20202020
	              20202020
  48:     -	84C4  4A554D50		ascii   'JUMP TO BAR POS       : 1 2 3 4 5 6 7 8                         '
	              20544F20
	              42415220
	              504F5320
	              20202020
	              20203A20
	              31203220
	              33203420
	              35203620
	              37203820
	              20202020
	              20202020
	              20202020
	              20202020
	              20202020
	              20202020
  49:     -	8504  4348414E		ascii   'CHANGE BAR COUNT      : B                                       '
	              47452042
	              41522043
	              4F554E54
	              20202020
	              20203A20
	              42202020
	              20202020
	              20202020
	              20202020
	              20202020
	              20202020
	              20202020
	              20202020
	              20202020
	              20202020
  50:     -	8544  4E455854		ascii   'NEXT / PREV GRID POS  : ARROW-UP ARROW-DOWN                     '
	              202F2050
	              52455620
	              47524944
	              20504F53
	              20203A20
	              4152524F
	              572D5550
	              20415252
	              4F572D44
	              4F574E20
	              20202020
	              20202020
	              20202020
	              20202020
	              20202020
  51:     -	8584  434C4541		ascii   'CLEAR GRID POS        : CLEAR                                   '
	              52204752
	              49442050
	              4F532020
	              20202020
	              20203A20
	              434C4541
	              52202020
	              20202020
	              20202020
	              20202020
	              20202020
	              20202020
	              20202020
	              20202020
	              20202020
  52:     -	85C4  53455420		ascii   'SET   GRID POS        : SPACE                                   '
	              20204752
	              49442050
	              4F532020
	              20202020
	              20203A20
	              53504143
	              45202020
	              20202020
	              20202020
	              20202020
	              20202020
	              20202020
	              20202020
	              20202020
	              20202020
  53:     -	8604  53455420		ascii   'SET   GRID POS & SOUND: ENTER                                   '
	              20204752
	              49442050
	              4F532026
	              20534F55
	              4E443A20
	              454E5445
	              52202020
	              20202020
	              20202020
	              20202020
	              20202020
	              20202020
	              20202020
	              20202020
	              20202020
  54:     -	8644  504C4159		ascii   'PLAY & STOP           : P                                       '
	              20262053
	              544F5020
	              20202020
	              20202020
	              20203A20
	              50202020
	              20202020
	              20202020
	              20202020
	              20202020
	              20202020
	              20202020
	              20202020
	              20202020
	              20202020
  55:     -	8684  544F4747		ascii   'TOGGLE TRACKING       : T                                       '
	              4C452054
	              5241434B
	              494E4720
	              20202020
	              20203A20
	              54202020
	              20202020
	              20202020
	              20202020
	              20202020
	              20202020
	              20202020
	              20202020
	              20202020
	              20202020
  56:     -	86C4  4348414E		ascii   'CHANGE PLAYBACK SPEED : N M , .                                 '
	              47452050
	              4C415942
	              41434B20
	              53504545
	              44203A20
	              4E204D20
	              2C202E20
	              20202020
	              20202020
	              20202020
	              20202020
	              20202020
	              20202020
	              20202020
	              20202020
  57:     -	8704  4348414E		ascii   'CHANGE CUR TRACK DRUM : ARROW-LEFT ARROW-RIGHT                  '
	              47452043
	              55522054
	              5241434B
	              20445255
	              4D203A20
	              4152524F
	              572D4C45
	              46542041
	              52524F57
	              2D524947
	              48542020
	              20202020
	              20202020
	              20202020
	              20202020
  58:     -	8744  4348414E		ascii   'CHANGE GRID STEP      : G                                       '
	              47452047
	              52494420
	              53544550
	              20202020
	              20203A20
	              47202020
	              20202020
	              20202020
	              20202020
	              20202020
	              20202020
	              20202020
	              20202020
	              20202020
	              20202020
  59:     -	8784  4C4F4144		ascii   'LOAD & SAVE           : L S                                     '
	              20262053
	              41564520
	              20202020
	              20202020
	              20203A20
	              4C205320
	              20202020
	              20202020
	              20202020
	              20202020
	              20202020
	              20202020
	              20202020
	              20202020
	              20202020
  60:     -	87C4  48454C50		ascii   'HELP                  : H                                       '
	              20202020
	              20202020
	              20202020
	              20202020
	              20203A20
	              48202020
	              20202020
	              20202020
	              20202020
	              20202020
	              20202020
	              20202020
	              20202020
	              20202020
	              20202020
  61:     -	8804  51554954		ascii   'QUIT                  : Q                                       '	
	              20202020
	              20202020
	              20202020
	              20202020
	              20203A20
	              51202020
	              20202020
	              20202020
	              20202020
	              20202020
	              20202020
	              20202020
	              20202020
	              20202020
	              20202020
  62:				
  63:				
  64:     -	8844  2E      	lastcur	     byte	'.'
  65:     -	8845  C03C    	lastcurpos   word 	$3c00+3*64 
  66:				
  67:     -	8847  00      	cursorx	byte 	0
  68:     -	8848  03      	cursory	byte 	3
  69:     -	8849  00      	blink   byte    0
  70:     -	884A  00      	status  byte    0
  71:     -	884B  00      	track	byte    0
  72:     -	884C  00      	delayc 	byte	0
  73:     -	884D  0A      	tempo   byte	10
  74:     -	884E  08      	numbars byte	8
  75:     -	884F  80      	numticks byte	8*16 
  76:     -	8850  04      	gridres byte  	4 
  77:     -	8851  FC      	quantpat  byte  11111100b
  78:     -	8852          	tracks1 defs    6*64 		
  79:     -	89D2          	tracks2 defs    6*64
  80:				
  81:     -	8B52  24262833	instracks byte 36, 38, 40, 51, 44, 46 
	              2C2E
  82:				
  83:     -	8B58  00      	memcursorx byte 	0
  84:     -	8B59  00      	memcursory byte 	0
  85:					
  86:     -	8B5A  00      	trackpos    byte        0
  87:     -	8B5B  00      	qtrackpos   byte 	0
  88:				
  89:				
  90:				
  91:				keydown macro key
  92:					ld	a,(key >> 8)
  93:					and	key % $100
  94:					endm 
  95:				
  96:     -	0101          	k_@	equ	$380101
  97:     -	0102          	k_A	equ	$380102
  98:     -	0104          	k_B	equ	$380104
  99:     -	0108          	k_C	equ	$380108
 100:     -	0110          	k_D	equ	$380110
 101:     -	0120          	k_E	equ	$380120
 102:     -	0140          	k_F	equ	$380140
 103:     -	0180          	k_G	equ	$380180
 104:				
 105:     -	0201          	k_H	equ	$380201
 106:     -	0202          	k_I	equ	$380202
 107:     -	0204          	k_J	equ	$380204
 108:     -	0208          	k_K	equ	$380208
 109:     -	0210          	k_L	equ	$380210
 110:     -	0220          	k_M	equ	$380220
 111:     -	0240          	k_N	equ	$380240
 112:     -	0280          	k_O	equ	$380280
 113:				
 114:     -	0401          	k_P	equ	$380401
 115:     -	0402          	k_Q	equ	$380402
 116:     -	0404          	k_R	equ	$380404
 117:     -	0408          	k_S	equ	$380408
 118:     -	0410          	k_T	equ	$380410
 119:     -	0420          	k_U	equ	$380420
 120:     -	0440          	k_V	equ	$380440
 121:     -	0480          	k_W	equ	$380480
 122:				
 123:     -	0801          	k_X	equ	$380801
 124:     -	0802          	k_Y	equ	$380802
 125:     -	0804          	k_Z	equ	$380804
 126:				
 127:     -	1001          	k_0	equ	$381001
 128:     -	1002          	k_1	equ	$381002
 129:     -	1004          	k_2	equ	$381004
 130:     -	1008          	k_3	equ	$381008
 131:     -	1010          	k_4	equ	$381010
 132:     -	1020          	k_5	equ	$381020
 133:     -	1040          	k_6	equ	$381040
 134:     -	1080          	k_7	equ	$381080
 135:				
 136:     -	2001          	k_8	equ	$382001
 137:     -	2002          	k_9	equ	$382002
 138:     -	2004          	k_colon	equ	$382004
 139:     -	2008          	k_semi	equ	$382008
 140:     -	2010          	k_comma	equ	$382010
 141:     -	2020          	k_dash	equ	$382020
 142:     -	2040          	k_dot	equ	$382040
 143:     -	2080          	k_slash	equ	$382080
 144:				
 145:     -	4001          	k_enter	equ	$384001
 146:     -	4002          	k_clear	equ	$384002
 147:     -	4004          	k_break	equ	$384004
 148:     -	4008          	k_up	equ	$384008
 149:     -	4010          	k_down	equ	$384010
 150:     -	4020          	k_left	equ	$384020
 151:     -	4040          	k_right	equ	$384040
 152:     -	4080          	k_space	equ	$384080
 153:				
 154:     -	8001          	k_shift	equ	$388001
 155:				
 156:				
 157:     -	8B5C          	main:
 158:				
 159:    0+11	8B5C  DBFF    		in  a,($ff)
 160:   11+7	8B5E  F610    		or  a,$10 		; enable IO on Model III 
 161:					; and a,~$20 		; disable video wait states M III 
 162:   18+7	8B60  E6BF    		and a,~$40 		; slode mode M4 
 163:   25+11	8B62  D3EC    		out ($ec),a
 164:				
 165:   36+10	8B64  21C480  		ld	hl,data 
 166:   46+10	8B67  115288  		ld	de,tracks1
 167:   56+10	8B6A  018001  		ld	bc,6*64 
 168:   66+16+5	8B6D  EDB0    		ldir
 169:				
 170:   82+10	8B6F  21C480  		ld	hl,data 
 171:   92+10	8B72  11D289  		ld	de,tracks2 
 172:  102+10	8B75  018001  		ld	bc,6*64 
 173:  112+16+5	8B78  EDB0    		ldir
 174:				
 175:     -	8B7A          	main2:
 176:				
 177:  128+10	8B7A  21003C  		ld	hl,$3c00
 178:  138+10	8B7D  11013C  		ld	de,$3c00+1
 179:  148+10	8B80  01FF03  		ld	bc,1024-1
 180:  158+10	8B83  3620    		ld	(hl),' '
 181:  168+16+5	8B85  EDB0    		ldir
 182:				
 183:  184+10	8B87  210480  		ld	hl,title
 184:  194+10	8B8A  11003C  		ld	de,$3c00
 185:  204+10	8B8D  010004  		ld	bc,1024
 186:  214+16+5	8B90  EDB0    		ldir
 187:				
 188:				
 189:  230+17	8B92  CD3591  		call screenupdate
 190:  247+17	8B95  CD4C91  		call showcursor
 191:  264+17	8B98  CD0791  		call showplaycursor
 192:  281+17	8B9B  CD8991  		call showtempo
 193:				
 194:     -	8B9E          	loop:
 195:  298+13	8B9E  3A4A88  		ld a, (status) ; stopped ? 
 196:  311+4	8BA1  B7      		or a
 197:  315+10	8BA2  CA158C  		jp z, nostep
 198:					
 199:  325+13	8BA5  3A4C88  		ld a, (delayc)
 200:  338+4	8BA8  3C      		inc a
 201:  342+10	8BA9  214C88  		ld hl,delayc
 202:  352+7	8BAC  77      		ld (hl), a
 203:  359+4	8BAD  47      		ld b, a
 204:  363+13	8BAE  3A4D88  		ld a, (tempo) 
 205:  376+4	8BB1  B8      		cp b
 206:  380+10	8BB2  C2158C  		jp nz, nostep
 207:					
 208:					;;  inc note pointer
 209:  390+17	8BB5  CDC490  		call nextnote
 210:  407+17	8BB8  CD0791  		call showplaycursor
 211:  424+17	8BBB  CDD191  		call playnotes
 212:				
 213:  441+7	8BBE  3E00    		ld a,0
 214:  448+13	8BC0  324C88  		ld (delayc),a
 215:				
 216:  461+13	8BC3  3A4B88  		ld a,(track)
 217:  474+4	8BC6  B7      		or a
 218:  478+10	8BC7  CA158C  		jp z, nostep
 219:				
 220:					;; tracked - set screen cursor x to playcursor x
 221:				
 222:  488+13	8BCA  3A5A8B  		ld a,(trackpos)
 223:  501+8	8BCD  CB77    		bit 6,a
 224:  509+7+5	8BCF  201E    		jr nz,trackcury ; > 64 inc y
 225:				
 226:  516+8	8BD1  CBB7    		res 6,a
 227:  524+13	8BD3  324788  		ld (cursorx),a
 228:  537+13	8BD6  32588B  		ld (memcursorx),a
 229:					
 230:  550+13	8BD9  3A4888  		ld a,(cursory)
 231:  563+7	8BDC  FE0A    		cp 10
 232:  570+7+5	8BDE  382B    		jr c, showtrackcur
 233:				
 234:					
 235:  577+7	8BE0  D607    		sub 7
 236:  584+13	8BE2  324888  		ld (cursory), a
 237:  597+13	8BE5  3A598B  		ld a,(memcursory)
 238:  610+7	8BE8  D606    		sub 6
 239:  617+13	8BEA  32598B  		ld (memcursory),a
 240:					
 241:  630+12	8BED  181C    		jr showtrackcur	
 242:				
 243:     -	8BEF          	trackcury:
 244:  642+8	8BEF  CBB7    		res 6,a	
 245:					
 246:  650+13	8BF1  324788  		ld (cursorx),a
 247:  663+13	8BF4  32588B  		ld (memcursorx),a
 248:				
 249:  676+13	8BF7  3A4888  		ld a,(cursory)
 250:  689+7	8BFA  FE0A    		cp 10
 251:  696+7+5	8BFC  300D    		jr nc,showtrackcur
 252:					
 253:  703+7	8BFE  C607    		add 7	
 254:  710+13	8C00  324888  		ld (cursory),a
 255:  723+13	8C03  3A598B  		ld a,(memcursory)
 256:  736+7	8C06  C606    		add 6 
 257:  743+13	8C08  32598B  		ld (memcursory),a
 258:					
 259:				
 260:     -	8C0B          	showtrackcur:
 261:  756+10	8C0B  214988  		ld hl, blink
 262:  766+10	8C0E  367F    		ld (hl), 127
 263:				
 264:  776+17	8C10  CD4C91  		call showcursor
 265:				
 266:  793+12	8C13  1817    		jr scan 
 267:					
 268:     -	8C15          	nostep:
 269:				
 270:  805+13	8C15  3A4988  		ld a,(blink)
 271:  818+4	8C18  3C      		inc a
 272:  822+13	8C19  324988  		ld (blink), a
 273:				
 274:  835+7	8C1C  FE00    		cp 0
 275:  842+10	8C1E  C2248C  		jp nz, cur1
 276:  852+17	8C21  CD4C91  		call showcursor
 277:				
 278:     -	8C24          	cur1:	 
 279:  869+7	8C24  FE7F    		cp 127
 280:  876+10	8C26  C22C8C  		jp nz, scan  
 281:  886+17	8C29  CD4C91  		call showcursor
 282:						
 283:     -	8C2C          	scan:
 284:					
 285:  903+13	8C2C  3A4A88  		ld a, (status) 
 286:  916+4	8C2F  B7      		or a
 287:  920+7+5	8C30  2019    		jr nz,scancont
 288:				
 289:					;; here we only sample if the tracking is stopped!
 290:				
 291:  927+17	8C32  CD2B00  		call @KBD
 292:  944+7	8C35  FE00    		cp 0
 293:  951+10	8C37  CA9E8B  		jp z,loop
 294:				
 295:  961+7	8C3A  FE20    	        cp ' ' ; space
 296:  968+10	8C3C  CA898F  		jp z,setgrid 
 297:				
 298:  978+7	8C3F  FE0D    		cp 13 ; enter
 299:  985+10	8C41  CA478F  		jp z,setgridandsound
 300:				
 301:  995+7	8C44  FE1F    		cp 31 ; clear 
 302: 1002+10	8C46  CAA18F  		jp z,erasegrid
 303:				
 304: 1012+12	8C49  1808    		jr scancont1
 305:				
 306:     -	8C4B          	scancont:
 307:				
 308: 1024+17	8C4B  CD2B00  		call @KBD
 309: 1041+7	8C4E  FE00    		cp 0
 310: 1048+10	8C50  CA9E8B  		jp z,loop
 311:				
 312:     -	8C53          	scancont1:
 313:				
 314: 1058+7	8C53  FE5A    		cp 'Z' 
 315: 1065+10	8C55  CA1F90  		jp z,left
 316: 1075+7	8C58  FE59    		cp 'Y' 
 317: 1082+10	8C5A  CA1F90  		jp z,left
 318: 1092+7	8C5D  FE41    		cp 'A' 
 319: 1099+10	8C5F  CAB08D  		jp z,prevbar
 320: 1109+7	8C62  FE43    		cp 'C'
 321: 1116+10	8C64  CA3290  		jp z,right
 322: 1126+7	8C67  FE44    		cp 'D'
 323: 1133+10	8C69  CA998D  		jp z,nextbar
 324: 1143+7	8C6C  FE57    		cp 'W'
 325: 1150+10	8C6E  CA4590  		jp z,up
 326: 1160+7	8C71  FE58    		cp 'X' 
 327: 1167+10	8C73  CA6290  		jp z,down
 328:				
 329: 1177+7	8C76  FE2C    		cp ',' 
 330: 1184+10	8C78  CACD8E  		jp z,faster	
 331: 1194+7	8C7B  FE2E    		cp '.'
 332: 1201+10	8C7D  CA028F  		jp z,slower 
 333: 1211+7	8C80  FE4E    		cp 'N' 
 334: 1218+10	8C82  CAE78E  		jp z,faster1
 335: 1228+7	8C85  FE4D    		cp 'M' 
 336: 1235+10	8C87  CA1C8F  		jp z,slower1 
 337:						
 338: 1245+7	8C8A  FE50    		cp 'P' 
 339: 1252+10	8C8C  CAD18F  		jp z,startstop
 340:				
 341: 1262+7	8C8F  FE54    		cp 'T'
 342: 1269+10	8C91  CAF88F  		jp z,trackstatus
 343:					
 344: 1279+7	8C94  FE08    		cp KCURLEFT
 345: 1286+10	8C96  CA3F8F  		jp z,instrdown
 346:				
 347: 1296+7	8C99  FE09    		cp KCURRIGHT
 348: 1303+10	8C9B  CA378F  		jp z,instrup 
 349:				
 350: 1313+7	8C9E  FE5B    		cp KCURUP 
 351: 1320+10	8CA0  CA998D  		jp z,nextbar
 352:				
 353: 1330+7	8CA3  FE0A    		cp KCURDOWN 
 354: 1337+10	8CA5  CAB08D  		jp z,prevbar
 355:				
 356: 1347+7	8CA8  FE31    		cp '1'
 357: 1354+10	8CAA  CAC58D  		jp z,bar1
 358:				
 359: 1364+7	8CAD  FE32    		cp '2'
 360: 1371+10	8CAF  CAE68D  		jp z,bar2
 361:				
 362: 1381+7	8CB2  FE33    		cp '3'
 363: 1388+10	8CB4  CA078E  		jp z,bar3
 364:				
 365: 1398+7	8CB7  FE34    		cp '4'
 366: 1405+10	8CB9  CA288E  		jp z,bar4
 367:				
 368: 1415+7	8CBC  FE35    		cp '5'
 369: 1422+10	8CBE  CA498E  		jp z,bar5
 370:				
 371: 1432+7	8CC1  FE36    		cp '6'
 372: 1439+10	8CC3  CA6A8E  		jp z,bar6
 373:				
 374: 1449+7	8CC6  FE37    		cp '7'
 375: 1456+10	8CC8  CA8B8E  		jp z,bar7
 376:				
 377: 1466+7	8CCB  FE38    		cp '8'
 378: 1473+10	8CCD  CAAC8E  		jp z,bar8
 379:				
 380: 1483+7	8CD0  FE51    		cp 'Q'
 381: 1490+10	8CD2  CA968D  		jp z,quit
 382:				
 383: 1500+7	8CD5  FE48    		cp 'H'
 384: 1507+10	8CD7  CA728D  		jp z,help
 385:				
 386: 1517+7	8CDA  FE4C    		cp 'L'
 387: 1524+10	8CDC  CA908D  		jp z,load
 388:				
 389: 1534+7	8CDF  FE53    		cp 'S'
 390: 1541+10	8CE1  CA938D  		jp z,save
 391:				
 392: 1551+7	8CE4  FE47    		cp 'G'
 393: 1558+10	8CE6  CA038D  		jp z,chgridres
 394:				
 395: 1568+7	8CE9  FE42    		cp 'B'
 396: 1575+10	8CEB  CA5A8D  		jp z,chgnumbars 
 397:				
 398: 1585+10	8CEE  C39E8B  		jp loop 
 399:					
 400:					;;  do a screen update after keypress and continue 
 401:     -	8CF1          	cont:
 402: 1595+17	8CF1  CD3591  		call screenupdate
 403: 1612+17	8CF4  CDC591  		call showtrack
 404: 1629+17	8CF7  CDB791  		call showtrackdrum
 405: 1646+17	8CFA  CD5F92  		call showgridres
 406: 1663+17	8CFD  CD6D92  		call showbars
 407:					
 408: 1680+10	8D00  C39E8B  		jp loop
 409:				
 410:     -	8D03          	chgridres:
 411: 1690+13	8D03  3A5088  		ld a,(gridres)
 412: 1703+8	8D06  CB27    		sla a 
 413: 1711+7	8D08  E61F    		and $1f
 414: 1718+7+5	8D0A  2002    		jr nz,chgridres1
 415: 1725+7	8D0C  3E01    		ld a,1
 416:					
 417:     -	8D0E          	chgridres1: 
 418: 1732+13	8D0E  325088  		ld (gridres),a
 419:					
 420: 1745+7	8D11  FE01    		cp a,1
 421: 1752+7+5	8D13  2008    		jr nz, gridres2
 422: 1759+7	8D15  3EFF    		ld a,11111111b
 423: 1766+13	8D17  325188  		ld (quantpat), a	
 424: 1779+10	8D1A  C3F18C  		jp cont
 425:					
 426:     -	8D1D          	gridres2:
 427: 1789+7	8D1D  FE02    		cp a,2
 428: 1796+7+5	8D1F  2008    		jr nz, gridres4
 429: 1803+7	8D21  3EFE    		ld a,11111110b
 430: 1810+13	8D23  325188  		ld (quantpat), a	
 431: 1823+10	8D26  C3F18C  		jp cont
 432:				
 433:     -	8D29          	gridres4:
 434: 1833+7	8D29  FE04    		cp a,4
 435: 1840+7+5	8D2B  2008    		jr nz, gridres8
 436: 1847+7	8D2D  3EFC    		ld a,11111100b
 437: 1854+13	8D2F  325188  		ld (quantpat), a	
 438: 1867+10	8D32  C3F18C  		jp cont
 439:				
 440:     -	8D35          	gridres8:
 441: 1877+7	8D35  FE08    		cp a,8
 442: 1884+7+5	8D37  2008    		jr nz, gridres16
 443: 1891+7	8D39  3EF8    		ld a,11111000b
 444: 1898+13	8D3B  325188  		ld (quantpat), a	
 445: 1911+10	8D3E  C3F18C  		jp cont
 446:				
 447:     -	8D41          	gridres16:
 448: 1921+7	8D41  FE10    		cp a,16
 449: 1928+7+5	8D43  2008    		jr nz, gridres32
 450: 1935+7	8D45  3EF0    		ld a,11110000b
 451: 1942+13	8D47  325188  		ld (quantpat), a	
 452: 1955+10	8D4A  C3F18C  		jp cont
 453:				
 454:     -	8D4D          	gridres32:
 455: 1965+7	8D4D  FE20    		cp a,32
 456: 1972+10	8D4F  C2F18C  		jp nz, cont 
 457: 1982+7	8D52  3EE0    		ld a,11100000b
 458: 1989+13	8D54  325188  		ld (quantpat), a	
 459: 2002+10	8D57  C3F18C  		jp cont
 460:				
 461:				
 462:     -	8D5A          	chgnumbars:
 463: 2012+13	8D5A  3A4E88  		ld a,(numbars)
 464: 2025+4	8D5D  3D      		dec a 
 465: 2029+4	8D5E  3C      		inc a
 466: 2033+7	8D5F  E607    		and $07
 467: 2040+4	8D61  3C      		inc a	
 468: 2044+13	8D62  324E88  		ld (numbars),a
 469:				
 470: 2057+4	8D65  47      		ld b,a
 471: 2061+7	8D66  3E00    		ld a,0
 472:     -	8D68          	countticks:	
 473: 2068+7	8D68  C610    		add 16 
 474: 2075+8+5	8D6A  10FC    		djnz countticks
 475:				
 476: 2083+13	8D6C  324F88  		ld (numticks),a
 477: 2096+10	8D6F  C3F18C  		jp cont 
 478:				
 479:     -	8D72          	help:
 480:				
 481: 2106+10	8D72  21003C  		ld	hl,$3c00
 482: 2116+10	8D75  11013C  		ld	de,$3c00+1
 483: 2126+10	8D78  01FF03  		ld	bc,1024-1
 484: 2136+10	8D7B  3620    		ld	(hl),' '
 485: 2146+16+5	8D7D  EDB0    		ldir
 486:				
 487: 2162+10	8D7F  210484  		ld	hl,helpt
 488: 2172+10	8D82  11003C  		ld	de,$3c00
 489: 2182+10	8D85  010004  		ld	bc,1024 
 490: 2192+16+5	8D88  EDB0    		ldir
 491:				
 492: 2208+17	8D8A  CD4900  		call @KEY
 493:					
 494: 2225+10	8D8D  C37A8B  		jp main2
 495:				
 496:     -	8D90          	load:
 497: 2235+10	8D90  C39E8B  		jp loop 
 498:				
 499:     -	8D93          	save:
 500: 2245+10	8D93  C39E8B  		jp loop 
 501:					
 502:     -	8D96          	quit:
 503: 2255+17	8D96  CD2D40  		call @EXIT
 504:					
 505:     -	8D99          	nextbar:
 506: 2272+13	8D99  3A4788  		ld a,(cursorx)
 507: 2285+10	8D9C  215088  		ld hl,gridres
 508: 2295+7	8D9F  46      		ld b,(hl)
 509: 2302+4	8DA0  80      		add a,b
 510: 2306+7	8DA1  FE40    		cp 64
 511: 2313+10	8DA3  D2F18C  		jp nc, cont
 512: 2323+13	8DA6  324788  		ld (cursorx),a
 513: 2336+10	8DA9  21588B  		ld hl,memcursorx 
 514: 2346+7	8DAC  77      		ld (hl),a
 515: 2353+10	8DAD  C3F18C  		jp cont
 516:				
 517:     -	8DB0          	prevbar:
 518: 2363+13	8DB0  3A4788  		ld a,(cursorx)
 519: 2376+10	8DB3  215088  		ld hl,gridres
 520: 2386+7	8DB6  46      		ld b,(hl)
 521: 2393+4	8DB7  90      		sub a,b
 522: 2397+10	8DB8  DAF18C  		jp c, cont
 523: 2407+13	8DBB  324788  		ld (cursorx),a
 524: 2420+10	8DBE  21588B  		ld hl,memcursorx 
 525: 2430+7	8DC1  77      		ld (hl),a
 526: 2437+10	8DC2  C3F18C  		jp cont
 527:				
 528:				setbar1x macro
 529:					ld (cursorx), a
 530:					ld hl,memcursorx 
 531:					ld (hl),a
 532:				
 533:					ld a, (cursory)
 534:					cp 9
 535:					jp c,cont
 536:					; else change y cursor 
 537:					sub 7 
 538:					ld (cursory),a
 539:					
 540:					ld a,(memcursory) 
 541:					sub 6
 542:					ld (memcursory),a
 543:				
 544:					jp cont
 545:					endm
 546:				
 547:				
 548:				setbar2x macro
 549:					ld (cursorx), a
 550:					ld hl,memcursorx 
 551:					ld (hl),a
 552:				
 553:					ld a, (cursory)
 554:					cp 10
 555:					jp nc,cont
 556:					; else change y cursor 
 557:					add 7 
 558:					ld (cursory),a
 559:					
 560:					ld a,(memcursory) 
 561:					add 6
 562:					ld (memcursory),a
 563:				
 564:					jp cont
 565:					endm 
 566:				
 567:     -	8DC5          	bar1:
 568: 2447+7	8DC5  3E00    		ld a,0
 569: 2454+123	8DC7  32478821		setbar1x 
	              588B773A
	              4888FE09
	              DAF18CD6
	              07324888
	              3A598BD6
	              0632598B
	              C3F18C
 570:					
 571:     -	8DE6          	bar2:	
 572: 2577+7	8DE6  3E10    		ld a,16
 573: 2584+123	8DE8  32478821		setbar1x 
	              588B773A
	              4888FE09
	              DAF18CD6
	              07324888
	              3A598BD6
	              0632598B
	              C3F18C
 574:				
 575:     -	8E07          	bar3:
 576: 2707+7	8E07  3E20    		ld a,32
 577: 2714+123	8E09  32478821		setbar1x 
	              588B773A
	              4888FE09
	              DAF18CD6
	              07324888
	              3A598BD6
	              0632598B
	              C3F18C
 578:				
 579:     -	8E28          	bar4:
 580: 2837+7	8E28  3E30    		ld a,48
 581: 2844+123	8E2A  32478821		setbar1x 
	              588B773A
	              4888FE09
	              DAF18CD6
	              07324888
	              3A598BD6
	              0632598B
	              C3F18C
 582:				
 583:     -	8E49          	bar5:
 584: 2967+7	8E49  3E00    		ld a,0
 585: 2974+123	8E4B  32478821		setbar2x 
	              588B773A
	              4888FE0A
	              D2F18CC6
	              07324888
	              3A598BC6
	              0632598B
	              C3F18C
 586:				
 587:     -	8E6A          	bar6:
 588: 3097+7	8E6A  3E10    		ld a,16
 589: 3104+123	8E6C  32478821		setbar2x
	              588B773A
	              4888FE0A
	              D2F18CC6
	              07324888
	              3A598BC6
	              0632598B
	              C3F18C
 590:					
 591:     -	8E8B          	bar7:
 592: 3227+7	8E8B  3E20    		ld a,32
 593: 3234+123	8E8D  32478821		setbar2x
	              588B773A
	              4888FE0A
	              D2F18CC6
	              07324888
	              3A598BC6
	              0632598B
	              C3F18C
 594:					
 595:     -	8EAC          	bar8:
 596: 3357+7	8EAC  3E30    		ld a,48
 597: 3364+123	8EAE  32478821		setbar2x 
	              588B773A
	              4888FE0A
	              D2F18CC6
	              07324888
	              3A598BC6
	              0632598B
	              C3F18C
 598:				
 599:     -	8ECD          	faster:
 600: 3487+13	8ECD  3A4D88  		ld a,(tempo)
 601: 3500+7	8ED0  FE01    		cp 1 
 602: 3507+10	8ED2  CAF18C  		jp z,cont
 603:					
 604: 3517+4	8ED5  3D      		dec a
 605: 3521+4	8ED6  4F      		ld c,a
 606: 3525+13	8ED7  324D88  		ld (tempo),a
 607: 3538+7	8EDA  3E00    		ld a,0
 608: 3545+10	8EDC  214C88  		ld hl,delayc
 609: 3555+10	8EDF  3600    		ld (hl),0
 610: 3565+17	8EE1  CD8991  		call showtempo
 611: 3582+10	8EE4  C3F18C  		jp cont
 612:				
 613:     -	8EE7          	faster1:
 614: 3592+13	8EE7  3A4D88  		ld a,(tempo)
 615: 3605+7	8EEA  FE11    		cp $11
 616: 3612+10	8EEC  DAF18C  		jp c,cont
 617:					
 618: 3622+7	8EEF  D610    		sub $10
 619: 3629+4	8EF1  4F      		ld c,a
 620: 3633+13	8EF2  324D88  		ld (tempo),a
 621: 3646+7	8EF5  3E00    		ld a,0
 622: 3653+10	8EF7  214C88  		ld hl,delayc
 623: 3663+10	8EFA  3600    		ld (hl),0
 624: 3673+17	8EFC  CD8991  		call showtempo
 625: 3690+10	8EFF  C3F18C  		jp cont
 626:					
 627:     -	8F02          	slower:
 628: 3700+13	8F02  3A4D88  		ld a,(tempo)
 629: 3713+7	8F05  FEFF    		cp a,255
 630: 3720+10	8F07  CAF18C  		jp z,cont
 631:					
 632: 3730+4	8F0A  3C      		inc a
 633: 3734+4	8F0B  4F      		ld c,a
 634: 3738+13	8F0C  324D88  		ld (tempo),a
 635: 3751+7	8F0F  3E00    		ld a,0
 636: 3758+10	8F11  214C88  		ld hl,delayc
 637: 3768+10	8F14  3600    		ld (hl),0
 638:				
 639: 3778+17	8F16  CD8991  		call showtempo
 640: 3795+10	8F19  C3F18C  		jp cont	
 641:				
 642:     -	8F1C          	slower1:
 643: 3805+13	8F1C  3A4D88  		ld a,(tempo)
 644: 3818+7	8F1F  FEF0    		cp a,$f0
 645: 3825+10	8F21  D2F18C  		jp nc,cont
 646:					
 647: 3835+7	8F24  C610    		add $10
 648: 3842+4	8F26  4F      		ld c,a
 649: 3846+13	8F27  324D88  		ld (tempo),a
 650: 3859+7	8F2A  3E00    		ld a,0
 651: 3866+10	8F2C  214C88  		ld hl,delayc
 652: 3876+10	8F2F  3600    		ld (hl),0
 653:				
 654: 3886+17	8F31  CD8991  		call showtempo
 655: 3903+10	8F34  C3F18C  		jp cont	
 656:				
 657:				testsoundx macro 
 658:					call gettrackdrum
 659:					ld b,a
 660:					
 661:					ld a,$90+9
 662:					out (8),a
 663:				  
 664:					call short_delay
 665:				
 666:					ld a,b
 667:					out (8),a 
 668:				  
 669:					call short_delay  
 670:				  
 671:					ld a,127
 672:					out (8),a
 673:				  
 674:					endm 
 675:				
 676:     -	8F37          	instrup:
 677: 3913+17	8F37  CDA291  		call gettrackdrum
 678: 3930+4	8F3A  3C      		inc a 
 679: 3934+7	8F3B  77      		ld (hl), a
 680: 3941+10	8F3C  C3F18C  		jp cont 
 681:				
 682:     -	8F3F          	instrdown:
 683: 3951+17	8F3F  CDA291  		call gettrackdrum
 684: 3968+4	8F42  3D      		dec a 
 685: 3972+7	8F43  77      		ld (hl), a
 686: 3979+10	8F44  C3F18C  		jp cont
 687:				
 688:				restorecellx macro 
 689:					ld a,(memcursorx)
 690:					
 691:					ld hl,data
 692:					ld d,0
 693:					ld e,a
 694:					add hl,de	
 695:					ld a,(hl)
 696:					endm 
 697:				
 698:				setgridx macro
 699:				        local setpos1
 700:					call memcursor
 701:					ld (hl),SETSYM 
 702:					ld hl,lastcur
 703:					ld (hl),SETSYM 
 704:					endm 
 705:				
 706:				erasegridx macro
 707:				        local setpos1
 708:					call memcursor
 709:					ld a, (hl)
 710:					;;  erase
 711:					push hl
 712:					restorecellx 
 713:					pop hl
 714:					ld (hl),a
 715:					ld hl,lastcur
 716:					ld (hl),a 
 717:					endm 
 718:				
 719:				gettrackdrumx macro 
 720:					call gettracknr
 721:					dec a
 722:					ld hl,instracks
 723:					ld d,0
 724:					ld e,a
 725:					add hl, de 
 726:					ld a,(hl)
 727:					endm
 728:				
 729:				
 730:     -	8F47          	setgridandsound:
 731:					
 732: 3989+106	8F47  CDA29147		testsoundx
	              3E99D308
	              CD799278
	              D308CD79
	              923E7FD3
	              08
 733: 4095+47	8F5C  CDA09036		setgridx 
	              8F214488
	              368F
 734:				
 735: 4142+10	8F66  C3F18C  		jp cont 
 736:				
 737:     -	8F69          	setgridandsoundr:
 738:					
 739: 4152+106	8F69  CDA29147		testsoundx
	              3E99D308
	              CD799278
	              D308CD79
	              923E7FD3
	              08
 740: 4258+47	8F7E  CDA09036		setgridx 
	              8F214488
	              368F
 741:				
 742: 4305+10	8F88  C9      		ret
 743:					
 744:     -	8F89          	setgrid:
 745:					
 746: 4315+47	8F89  CDA09036		setgridx 
	              8F214488
	              368F
 747: 4362+10	8F93  C3F18C  		jp cont
 748:				
 749:     -	8F96          	setgridr:
 750:					
 751: 4372+47	8F96  CDA09036		setgridx 
	              8F214488
	              368F
 752: 4419+10	8FA0  C9      		ret
 753:				
 754:     -	8FA1          	erasegrid:
 755:					
 756: 4429+121	8FA1  CDA0907E		erasegridx 
	              E53A588B
	              21C48016
	              005F197E
	              E1772144
	              8877
 757: 4550+10	8FB7  C3F18C  		jp cont
 758:				
 759:     -	8FBA          	erasegridr:
 760:					
 761: 4560+121	8FBA  CDA0907E		erasegridx 
	              E53A588B
	              21C48016
	              005F197E
	              E1772144
	              8877
 762: 4681+10	8FD0  C9      		ret 
 763:				
 764:     -	8FD1          	startstop:
 765: 4691+13	8FD1  3A4A88  		ld a,(status)
 766: 4704+7	8FD4  EE01    		xor 1
 767: 4711+13	8FD6  324A88  		ld (status), a
 768: 4724+4	8FD9  B7      		or a
 769: 4728+7+5	8FDA  200E    		jr nz, showplay
 770:					
 771: 4735+10	8FDC  117C3C  		ld de,$3c00 + 64 + 60
 772: 4745+10	8FDF  210080  		ld hl,stopped 
 773: 4755+10	8FE2  010100  		ld bc,1 
 774: 4765+16+5	8FE5  EDB0    		ldir
 775: 4781+10	8FE7  C3F18C  		jp cont 
 776:     -	8FEA          	showplay:
 777: 4791+10	8FEA  117C3C  		ld de,$3c00 + 64 + 60
 778: 4801+10	8FED  210180  		ld hl,playing  
 779: 4811+10	8FF0  010100  		ld bc,1
 780: 4821+16+5	8FF3  EDB0    		ldir
 781: 4837+10	8FF5  C3F18C  		jp cont 
 782:				
 783:     -	8FF8          	trackstatus:
 784: 4847+13	8FF8  3A4B88  		ld a,(track)
 785: 4860+7	8FFB  EE01    		xor 1
 786: 4867+13	8FFD  324B88  		ld (track), a
 787: 4880+4	9000  B7      		or a
 788: 4884+7+5	9001  200E    		jr nz, showtrackstatus
 789:					
 790: 4891+10	9003  117E3C  		ld de,$3c00 + 64 + 62
 791: 4901+10	9006  210280  		ld hl,free 
 792: 4911+10	9009  010100  		ld bc,1
 793: 4921+16+5	900C  EDB0    		ldir
 794: 4937+10	900E  C3F18C  		jp cont
 795:					
 796:     -	9011          	showtrackstatus:	
 797: 4947+10	9011  117E3C  		ld de,$3c00 + 64 + 62
 798: 4957+10	9014  210380  		ld hl,tracked   
 799: 4967+10	9017  010100  		ld bc,1
 800: 4977+16+5	901A  EDB0    		ldir
 801: 4993+10	901C  C3F18C  		jp cont 
 802:				
 803:				
 804:     -	901F          	left:	
 805: 5003+13	901F  3A4788  		ld a,(cursorx)
 806: 5016+7	9022  FE00    		cp 0
 807: 5023+10	9024  CAF18C  		jp z, cont
 808: 5033+4	9027  3D      		dec a	
 809: 5037+13	9028  324788  		ld (cursorx),a
 810: 5050+10	902B  21588B  		ld hl,memcursorx 
 811: 5060+7	902E  77      		ld (hl),a
 812: 5067+10	902F  C3F18C  		jp cont
 813:     -	9032          	right:
 814: 5077+13	9032  3A4788  		ld a,(cursorx)
 815: 5090+7	9035  FE3F    		cp 63
 816: 5097+10	9037  CAF18C  		jp z, cont
 817: 5107+4	903A  3C      		inc a
 818: 5111+13	903B  324788  		ld (cursorx),a
 819: 5124+10	903E  21588B  		ld hl,memcursorx 
 820: 5134+7	9041  77      		ld (hl),a
 821: 5141+10	9042  C3F18C  		jp cont
 822:     -	9045          	up:
 823: 5151+13	9045  3A4888  		ld a,(cursory)
 824: 5164+7	9048  FE03    		cp 3
 825: 5171+10	904A  CAF18C  		jp z, cont
 826: 5181+7	904D  FE0A    		cp 10
 827: 5188+7+5	904F  2004    		jr nz,up1
 828: 5195+7	9051  3E08    		ld a,8
 829: 5202+12	9053  1801    		jr up2
 830:     -	9055          	up1:	 
 831: 5214+4	9055  3D      		dec a
 832:				
 833:     -	9056          	up2:	
 834: 5218+13	9056  324888  		ld (cursory),a
 835:				
 836: 5231+10	9059  21598B  		ld hl,memcursory
 837: 5241+7	905C  7E      		ld a,(hl)
 838: 5248+4	905D  3D      		dec a
 839: 5252+7	905E  77      		ld (hl),a 
 840: 5259+10	905F  C3F18C  		jp cont
 841:				
 842:     -	9062          	down:
 843: 5269+13	9062  3A4888  		ld a,(cursory)
 844: 5282+7	9065  FE0F    		cp 15
 845: 5289+10	9067  CAF18C  		jp z, cont
 846: 5299+7	906A  FE08    		cp 8
 847: 5306+7+5	906C  2004    		jr nz,down1
 848: 5313+7	906E  3E0A    		ld a,10
 849: 5320+12	9070  1801    		jr down2
 850:     -	9072          	down1:	
 851: 5332+4	9072  3C      		inc a
 852:     -	9073          	down2:	 
 853: 5336+13	9073  324888  		ld (cursory),a
 854:					
 855: 5349+10	9076  21598B  		ld hl,memcursory 
 856: 5359+7	9079  7E      		ld a,(hl)
 857: 5366+4	907A  3C      		inc a
 858: 5370+7	907B  77      		ld (hl),a
 859: 5377+10	907C  C3F18C  		jp cont
 860:				
 861:					
 862:     -	907F          	cursor:
 863: 5387+13	907F  3A4988  		ld a,(blink)
 864: 5400+4	9082  3C      		inc a
 865: 5404+13	9083  324988  		ld (blink),a
 866: 5417+10	9086  21003C  		ld hl,$3c00
 867: 5427+13	9089  3A4788  		ld a,(cursorx)
 868: 5440+4	908C  B7      		or a
 869: 5444+7+5	908D  2804    		jr z, moveyup
 870: 5451+4	908F  47      		ld b,a
 871:     -	9090          	movex:	
 872: 5455+6	9090  23      		inc hl 
 873: 5461+8+5	9091  10FD    		djnz movex
 874:     -	9093          	moveyup:	
 875: 5469+13	9093  3A4888  		ld a,(cursory)
 876: 5482+4	9096  B7      		or a
 877: 5486+5+6	9097  C8      		ret z
 878: 5491+4	9098  47      		ld b,a
 879: 5495+10	9099  114000  		ld de,64
 880:     -	909C          	movey:
 881: 5505+11	909C  19      		add hl,de 
 882: 5516+8+5	909D  10FD    		djnz movey
 883: 5524+10	909F  C9      		ret 
 884:				
 885:     -	90A0          	memcursor:
 886: 5534+10	90A0  215288  		ld hl,tracks1
 887: 5544+13	90A3  3A588B  		ld a,(memcursorx)
 888: 5557+4	90A6  B7      		or a
 889: 5561+7+5	90A7  2804    		jr z, mmoveyup
 890: 5568+4	90A9  47      		ld b,a
 891:     -	90AA          	mmovex:	
 892: 5572+6	90AA  23      		inc hl 
 893: 5578+8+5	90AB  10FD    		djnz mmovex
 894:     -	90AD          	mmoveyup:	
 895: 5586+13	90AD  3A598B  		ld a,(memcursory)
 896: 5599+4	90B0  B7      		or a
 897: 5603+5+6	90B1  C8      		ret z
 898: 5608+4	90B2  47      		ld b,a
 899: 5612+10	90B3  114000  		ld de,64
 900:     -	90B6          	mmovey:
 901: 5622+11	90B6  19      		add hl,de 
 902: 5633+8+5	90B7  10FD    		djnz mmovey
 903: 5641+10	90B9  C9      		ret 
 904:				
 905:					
 906: 5651+10	90BA  010000  	dly.01:	ld	bc,d10000th
 907:     -	0000          		sett	0
 908:    0+6	90BD  0B      	dly:	dec	bc
 909:    6+4	90BE  78      		ld	a,b
 910:   10+4	90BF  B1      		or	c
 911:   14+10	90C0  C2BD90  		jp	nz,dly
 912:   24+10	90C3  C9      		ret
 913:				
 914:				
 915:     -	90C4          	nextnote:
 916:				
 917:   34+13	90C4  3A5B8B  		ld a,(qtrackpos)
 918:   47+4	90C7  3C      		inc a
 919:   51+4	90C8  47      		ld b,a
 920:					
 921:   55+13	90C9  3A4F88  		ld a,(numticks)
 922:   68+4	90CC  B8      		cp b
 923:   72+4	90CD  78      		ld a,b
 924:   76+7+5	90CE  2002    		jr nz,nextnote0
 925:				
 926:					; max tick number reached, set to 0
 927:   83+7	90D0  3E00    		ld a, 0
 928:				
 929:     -	90D2          	nextnote0:
 930:   90+13	90D2  325B8B  		ld (qtrackpos),a
 931:				
 932:  103+4	90D5  47      		ld b, a
 933:  107+13	90D6  3A5188  		ld a, (quantpat)
 934:  120+4	90D9  A0      		and b
 935:  124+13	90DA  325A8B  		ld (trackpos),a
 936:				
 937:  137+4	90DD  B8      		cp b
 938:  141+7+5	90DE  2808    		jr z, nextnote1
 939:				
 940:					;; ENTER sample keyboard; this one makes noise,
 941:					;; ONLY sample when (qtrackpos) = (trackpos)
 942:				
 943:  148+20	90E0  3A4038E6		keydown k_enter 
	              01
 944:  168+10+7	90E5  C4698F  		call nz,setgridandsoundr
 945:				
 946:     -	90E8          	nextnote1:
 947:				
 948:					;; sample keyboard
 949:				
 950:  178+20	90E8  3A4038E6		keydown k_space 
	              80
 951:  198+10+7	90ED  C4968F  		call nz,setgridr
 952:				
 953:  208+20	90F0  3A4038E6		keydown k_clear
	              02
 954:  228+10+7	90F5  C4BA8F  		call nz,erasegridr
 955:				
 956:  238+13	90F8  3A5A8B  		ld a, (trackpos)
 957:				
 958:  251+8	90FB  CB7F    		bit 7,a
 959:  259+5+6	90FD  C8      		ret z
 960:					
 961:  264+7	90FE  3E00    		ld a,0
 962:  271+13	9100  325B8B  		ld (qtrackpos),a
 963:  284+13	9103  325A8B  		ld (trackpos),a
 964:					
 965:  297+10	9106  C9      		ret
 966:				
 967:     -	9107          	showplaycursor:
 968:					
 969:  307+10	9107  218480  		ld	hl,title+2*64 
 970:  317+10	910A  11803C  		ld	de,$3c00+2*64 
 971:  327+10	910D  014000  		ld	bc,64 
 972:  337+16+5	9110  EDB0    		ldir
 973:				
 974:  353+10	9112  214482  		ld	hl,title+9*64 
 975:  363+10	9115  11403E  		ld	de,$3c00+9*64 
 976:  373+10	9118  014000  		ld	bc,64 
 977:  383+16+5	911B  EDB0    		ldir
 978:				
 979:  399+13	911D  3A5B8B  		ld a,(qtrackpos)
 980:					
 981:  412+10	9120  21803C  		ld hl,$3c00+2*64
 982:  422+4	9123  5F      		ld e,a
 983:  426+7	9124  1600    		ld d,0 
 984:  433+11	9126  19      		add hl,de
 985:				
 986:  444+8	9127  CB77    		bit 6,a
 987:  452+7+5	9129  2003    		jr nz,showcurtrack2
 988:					
 989:  459+10	912B  36AA    		ld (hl),POSMARKSYM
 990:  469+10	912D  C9      		ret
 991:     -	912E          	showcurtrack2:
 992:  479+10	912E  118001  		ld de,6*64
 993:  489+11	9131  19      		add hl,de
 994:  500+10	9132  36AA    		ld (hl),POSMARKSYM
 995:  510+10	9134  C9      		ret
 996:					
 997:					
 998:     -	0000          	d10000th	equ	1774080 / t($) / 10000
 999:				
1000:					  
1001:     -	9135          	screenupdate:
1002:					
1003:					;;  swap in track 1 
1004:  520+10	9135  215288  		ld	hl,tracks1	
1005:  530+10	9138  11C03C  		ld	de,$3c00+3*64 
1006:  540+10	913B  018001  		ld	bc,6*64
1007:  550+16+5	913E  EDB0    		ldir
1008:				
1009:					;;  swap in track 1 
1010:  566+10	9140  21D289  		ld	hl,tracks2 
1011:  576+10	9143  11803E  		ld	de,$3c00+10*64 
1012:  586+10	9146  018001  		ld	bc,6*64
1013:  596+16+5	9149  EDB0    		ldir
1014:				
1015:  612+10	914B  C9      		ret
1016:				
1017:     -	914C          	showcursor:
1018:				
1019:  622+16	914C  2A4588  		ld hl,(lastcurpos)
1020:  638+13	914F  3A4488  		ld a,(lastcur)
1021:  651+7	9152  77      		ld (hl),a
1022:  658+17	9153  CD7F90  		call cursor
1023:  675+16	9156  224588  		ld (lastcurpos),hl
1024:  691+7	9159  7E      		ld a,(hl)
1025:  698+13	915A  324488  		ld (lastcur),a
1026:					
1027:  711+13	915D  3A4988  		ld a,(blink)
1028:  724+7	9160  FE7F    		cp a,127
1029:  731+7+5	9162  3803    		jr c,cur2
1030:  738+10	9164  3658    		ld (hl), CURSYM 
1031:  748+10	9166  C9      		ret 
1032:				
1033:     -	9167          	cur2:
1034:  758+11	9167  E5      		push hl
1035:  769+52	9168  3A588B21		restorecellx
	              C4801600
	              5F197E
1036:  821+10	9173  E1      		pop hl 
1037:  831+10	9174  C9      		ret
1038:					
1039:					
1040:     -	9175          	byte2ascii: 			; input c, output de ASCII 
1041:  841+4	9175  79      	   ld a, c
1042:  845+4	9176  1F      	   rra
1043:  849+4	9177  1F      	   rra
1044:  853+4	9178  1F      	   rra
1045:  857+4	9179  1F      	   rra
1046:  861+17	917A  CD7F91  	   call convnibble 
1047:  878+4	917D  57      	   ld d, a	
1048:  882+4	917E  79      	   ld  a,c
1049:     -	917F          	convnibble:
1050:  886+7	917F  E60F    	   and  $0F
1051:  893+7	9181  C690    	   add  a,$90
1052:  900+4	9183  27      	   daa
1053:  904+7	9184  CE40    	   adc  a,$40
1054:  911+4	9186  27      	   daa
1055:  915+4	9187  5F      	   ld e, a	
1056:  919+10	9188  C9      	   ret
1057:				
1058:     -	9189          	showtempo:
1059:  929+13	9189  3A4D88  		ld a,(tempo)
1060:  942+4	918C  4F      		ld c,a 
1061:  946+10	918D  21503C  		ld hl,$3c00+64+16
1062:  956+17	9190  CD7591  		call byte2ascii
1063:  973+7	9193  72      		ld (hl),d
1064:  980+6	9194  23      		inc hl
1065:  986+7	9195  73      		ld (hl),e
1066:  993+10	9196  C9      		ret
1067:				
1068:     -	9197          	gettracknr:
1069: 1003+13	9197  3A598B  		ld a,(memcursory)
1070: 1016+7	919A  C601    		add 1
1071: 1023+7	919C  FE07    		cp 7
1072: 1030+5+6	919E  D8      		ret c
1073: 1035+7	919F  D606    		sub 6
1074: 1042+10	91A1  C9      		ret
1075:				
1076:				
1077:				
1078:     -	91A2          	gettrackdrum:
1079: 1052+60	91A2  CD97913D		gettrackdrumx
	              21528B16
	              005F197E
1080: 1112+10	91AE  C9      		ret
1081:				
1082:     -	91AF          	gettrackdrumreg: ; input: e register, starting at 0
1083: 1122+10	91AF  21528B  		ld hl,instracks
1084: 1132+7	91B2  1600    		ld d,0
1085: 1139+11	91B4  19      		add hl, de 
1086: 1150+7	91B5  46      		ld b,(hl)
1087: 1157+10	91B6  C9      		ret
1088:				
1089:     -	91B7          	showtrackdrum:
1090: 1167+17	91B7  CDA291  		call gettrackdrum
1091: 1184+4	91BA  4F      		ld c, a
1092: 1188+10	91BB  21613C  		ld hl,$3c00+64+33
1093: 1198+17	91BE  CD7591  		call byte2ascii
1094: 1215+7	91C1  72      		ld (hl),d
1095: 1222+6	91C2  23      		inc hl
1096: 1228+7	91C3  73      		ld (hl),e
1097: 1235+10	91C4  C9      		ret
1098:				
1099:     -	91C5          	showtrack:
1100: 1245+17	91C5  CD9791  		call gettracknr 
1101: 1262+4	91C8  4F      		ld c,a 
1102: 1266+10	91C9  21473C  		ld hl,$3c00+64+7
1103: 1276+17	91CC  CD7F91  		call convnibble 
1104: 1293+7	91CF  73      		ld (hl),e
1105: 1300+10	91D0  C9      		ret
1106:				
1107:     -	91D1          	playnotes:
1108: 1310+13	91D1  3A5B8B  		ld a,(qtrackpos)
1109:					
1110: 1323+8	91D4  CB77    		bit 6,a
1111: 1331+7+5	91D6  2005    		jr nz,playhightracks ; > 64  
1112:					
1113: 1338+10	91D8  215288  		ld hl,tracks1
1114:					
1115: 1348+12	91DB  1803    		jr playtracks
1116:				
1117:     -	91DD          	playhightracks:
1118:				
1119: 1360+10	91DD  21D289  		ld hl,tracks2
1120:				
1121:     -	91E0          	playtracks: 
1122:					; add note index
1123:					; clear bit 6
1124: 1370+8	91E0  CBB7    		res 6,a
1125: 1378+4	91E2  5F      		ld e,a
1126: 1382+7	91E3  1600    		ld d,0
1127: 1389+11	91E5  19      		add hl,de
1128: 1400+10	91E6  014000  		ld bc,64
1129:				
1130: 1410+11	91E9  E5      		push hl
1131: 1421+11	91EA  C5      		push bc
1132: 1432+7	91EB  4E      		ld c,(hl) ; -> c is on or off
1133: 1439+7	91EC  1600    		ld d,0
1134: 1446+7	91EE  1E00    		ld e,0 ; e is track number 
1135: 1453+17	91F0  CDAF91  		call gettrackdrumreg ; -> b is drum note 
1136: 1470+17	91F3  CD4992  		call playnote
1137:				
1138: 1487+10	91F6  C1      		pop bc
1139: 1497+10	91F7  E1      		pop hl
1140:					
1141: 1507+11	91F8  09      		add hl,bc
1142:				
1143: 1518+11	91F9  E5      		push hl
1144: 1529+11	91FA  C5      		push bc
1145:				
1146: 1540+7	91FB  4E      		ld c,(hl)
1147: 1547+7	91FC  1600    		ld d,0
1148: 1554+7	91FE  1E01    		ld e,1 
1149: 1561+17	9200  CDAF91  		call gettrackdrumreg 
1150: 1578+17	9203  CD4992  		call playnote
1151:				
1152: 1595+10	9206  C1      		pop bc
1153: 1605+10	9207  E1      		pop hl
1154:				
1155: 1615+11	9208  09      		add hl,bc
1156:				
1157: 1626+11	9209  E5      		push hl
1158: 1637+11	920A  C5      		push bc
1159:					
1160: 1648+7	920B  4E      		ld c,(hl) 
1161: 1655+7	920C  1600    		ld d,0
1162: 1662+7	920E  1E02    		ld e,2
1163: 1669+17	9210  CDAF91  		call gettrackdrumreg 
1164: 1686+17	9213  CD4992  		call playnote
1165:				
1166: 1703+10	9216  C1      		pop bc
1167: 1713+10	9217  E1      		pop hl
1168:				
1169: 1723+11	9218  09      		add hl,bc
1170:				
1171: 1734+11	9219  E5      		push hl
1172: 1745+11	921A  C5      		push bc
1173:				
1174: 1756+7	921B  4E      		ld c,(hl) 
1175: 1763+7	921C  1600    		ld d,0
1176: 1770+7	921E  1E03    		ld e,3 
1177: 1777+17	9220  CDAF91  		call gettrackdrumreg 
1178: 1794+17	9223  CD4992  		call playnote
1179:				
1180: 1811+10	9226  C1      		pop bc
1181: 1821+10	9227  E1      		pop hl
1182:				
1183: 1831+11	9228  09      		add hl,bc
1184:				
1185: 1842+11	9229  E5      		push hl
1186: 1853+11	922A  C5      		push bc
1187:				
1188: 1864+7	922B  4E      		ld c,(hl) 
1189: 1871+7	922C  1600    		ld d,0
1190: 1878+7	922E  1E04    		ld e,4 
1191: 1885+17	9230  CDAF91  		call gettrackdrumreg 
1192: 1902+17	9233  CD4992  		call playnote
1193:				
1194: 1919+10	9236  C1      		pop bc
1195: 1929+10	9237  E1      		pop hl
1196:					
1197: 1939+11	9238  09      		add hl,bc
1198:				
1199: 1950+11	9239  E5      		push hl
1200: 1961+11	923A  C5      		push bc
1201:				
1202: 1972+7	923B  4E      		ld c,(hl) 
1203: 1979+7	923C  1600    		ld d,0
1204: 1986+7	923E  1E05    		ld e,5 
1205: 1993+17	9240  CDAF91  		call gettrackdrumreg 
1206: 2010+17	9243  CD4992  		call playnote
1207:				
1208: 2027+10	9246  C1      		pop bc	
1209: 2037+10	9247  E1      		pop hl
1210:					
1211: 2047+10	9248  C9      		ret
1212:					
1213:					
1214:     -	9249          	playnote: ; input note on / off in c, instrument in b 
1215:				
1216: 2057+4	9249  79      		ld a, c
1217: 2061+7	924A  FE8F    		cp SETSYM
1218: 2068+5+6	924C  C0      		ret nz
1219:					
1220: 2073+7	924D  3E99    		ld a,$90+9
1221: 2080+11	924F  D308    		out (8),a
1222:				  
1223: 2091+17	9251  CD7992  		call short_delay
1224:				
1225: 2108+4	9254  78      		ld a,b
1226: 2112+11	9255  D308    		out (8),a 
1227:				  
1228: 2123+17	9257  CD7992  		call short_delay  
1229:				  
1230: 2140+7	925A  3E7F    		ld a,127
1231: 2147+11	925C  D308    		out (8),a
1232:				  
1233: 2158+10	925E  C9      		ret 
1234:					
1235:     -	925F          	showgridres:
1236: 2168+13	925F  3A5088  		ld a,(gridres)
1237: 2181+4	9262  4F      		ld c, a
1238: 2185+10	9263  21723C  		ld hl,$3c00+64+50
1239: 2195+17	9266  CD7591  		call byte2ascii
1240: 2212+7	9269  72      		ld (hl),d
1241: 2219+6	926A  23      		inc hl
1242: 2225+7	926B  73      		ld (hl),e
1243: 2232+10	926C  C9      		ret
1244:				
1245:     -	926D          	showbars:
1246: 2242+13	926D  3A4E88  		ld a,(numbars)
1247: 2255+4	9270  4F      		ld c, a
1248: 2259+10	9271  216A3C  		ld hl,$3c00+64+42
1249: 2269+17	9274  CD7F91  		call convnibble
1250: 2286+7	9277  73      		ld (hl),e
1251: 2293+10	9278  C9      		ret
1252:				
1253:				
1254:     -	9279          	short_delay:
1255: 2303+10	9279  11FF00  	    ld de,$00ff
1256:     -	927C          	delloop: 
1257: 2313+6	927C  1B      	    dec de
1258: 2319+4	927D  7A      	    ld a,d
1259: 2323+4	927E  B3      	    or e
1260: 2327+10	927F  C27C92  	    jp nz,delloop
1261: 2337+10	9282  C9      	    ret 
1262:				
1263:     -	8B5C          		end main 



Statistics:

     4	passes
     0	jr promotions
   185	symbols
  3971	bytes

    23	macro calls
   938	macro bytes
     0	invented symbols



Symbol Table:

@DSP           =33        51
@DSPLY         =4467      17511
@EXIT          =402D      16429
@KBD           =2B        43
@KEY           =49        73
CURSYM         =58        88
ENTER          =0D        13
KCURDOWN       =0A        10
KCURLEFT       =08        8
KCURRIGHT      =09        9
KCURUP         =5B        91
POSMARKSYM     =AA        170
SETSYM         =8F        143
bar1            8DC5      36293
bar2            8DE6      36326
bar3            8E07      36359
bar4            8E28      36392
bar5            8E49      36425
bar6            8E6A      36458
bar7            8E8B      36491
bar8            8EAC      36524
blink           8849      34889
byte2ascii      9175      37237
chgnumbars      8D5A      36186
chgridres       8D03      36099
chgridres1      8D0E      36110
cont            8CF1      36081
convnibble      917F      37247
countticks      8D68      36200
cur1            8C24      35876
cur2            9167      37223
cursor          907F      36991
cursorx         8847      34887
cursory         8848      34888
d10000th       =00        0
data            80C4      32964
delayc          884C      34892
delloop         927C      37500
dly             90BD      37053
dly.01          90BA      37050
down            9062      36962
down1           9072      36978
down2           9073      36979
erasegrid       8FA1      36769
erasegridr      8FBA      36794
faster          8ECD      36557
faster1         8EE7      36583
free            8002      32770
gettrackdrum    91A2      37282
gettrackdrumreg 91AF      37295
gettracknr      9197      37271
gridres         8850      34896
gridres16       8D41      36161
gridres2        8D1D      36125
gridres32       8D4D      36173
gridres4        8D29      36137
gridres8        8D35      36149
help            8D72      36210
helpt           8404      33796
instracks       8B52      35666
instrdown       8F3F      36671
instrup         8F37      36663
k_0            =00381001  3674113
k_1            =00381002  3674114
k_2            =00381004  3674116
k_3            =00381008  3674120
k_4            =00381010  3674128
k_5            =00381020  3674144
k_6            =00381040  3674176
k_7            =00381080  3674240
k_8            =00382001  3678209
k_9            =00382002  3678210
k_@            =00380101  3670273
k_A            =00380102  3670274
k_B            =00380104  3670276
k_C            =00380108  3670280
k_D            =00380110  3670288
k_E            =00380120  3670304
k_F            =00380140  3670336
k_G            =00380180  3670400
k_H            =00380201  3670529
k_I            =00380202  3670530
k_J            =00380204  3670532
k_K            =00380208  3670536
k_L            =00380210  3670544
k_M            =00380220  3670560
k_N            =00380240  3670592
k_O            =00380280  3670656
k_P            =00380401  3671041
k_Q            =00380402  3671042
k_R            =00380404  3671044
k_S            =00380408  3671048
k_T            =00380410  3671056
k_U            =00380420  3671072
k_V            =00380440  3671104
k_W            =00380480  3671168
k_X            =00380801  3672065
k_Y            =00380802  3672066
k_Z            =00380804  3672068
k_break        =00384004  3686404
k_clear        =00384002  3686402
k_colon        =00382004  3678212
k_comma        =00382010  3678224
k_dash         =00382020  3678240
k_dot          =00382040  3678272
k_down         =00384010  3686416
k_enter        =00384001  3686401
k_left         =00384020  3686432
k_right        =00384040  3686464
k_semi         =00382008  3678216
k_shift        =00388001  3702785
k_slash        =00382080  3678336
k_space        =00384080  3686528
k_up           =00384008  3686408
lastcur         8844      34884
lastcurpos      8845      34885
left            901F      36895
load            8D90      36240
loop            8B9E      35742
main            8B5C      35676
main2           8B7A      35706
memcursor       90A0      37024
memcursorx      8B58      35672
memcursory      8B59      35673
mmovex          90AA      37034
mmovey          90B6      37046
mmoveyup        90AD      37037
movex           9090      37008
movey           909C      37020
moveyup         9093      37011
nextbar         8D99      36249
nextnote        90C4      37060
nextnote0       90D2      37074
nextnote1       90E8      37096
nostep          8C15      35861
numbars         884E      34894
numticks        884F      34895
playhightracks  91DD      37341
playing         8001      32769
playnote        9249      37449
playnotes       91D1      37329
playtracks      91E0      37344
prevbar         8DB0      36272
qtrackpos       8B5B      35675
quantpat        8851      34897
quit            8D96      36246
right           9032      36914
save            8D93      36243
scan            8C2C      35884
scancont        8C4B      35915
scancont1       8C53      35923
screenupdate    9135      37173
setgrid         8F89      36745
setgridandsound 8F47      36679
setgridandsoundr 8F69      36713
setgridr        8F96      36758
short_delay     9279      37497
showbars        926D      37485
showcursor      914C      37196
showcurtrack2   912E      37166
showgridres     925F      37471
showplay        8FEA      36842
showplaycursor  9107      37127
showtempo       9189      37257
showtrack       91C5      37317
showtrackcur    8C0B      35851
showtrackdrum   91B7      37303
showtrackstatus 9011      36881
slower          8F02      36610
slower1         8F1C      36636
startstop       8FD1      36817
status          884A      34890
stopped         8000      32768
tempo           884D      34893
title           8004      32772
track           884B      34891
trackcury       8BEF      35823
tracked         8003      32771
trackpos        8B5A      35674
tracks1         8852      34898
tracks2         89D2      35282
trackstatus     8FF8      36856
up              9045      36933
up1             9055      36949
up2             9056      36950
